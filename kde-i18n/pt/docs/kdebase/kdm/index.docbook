<?xml version="1.0" ?>
<!DOCTYPE book PUBLIC "-//KDE//DTD DocBook XML V4.2-Based Variant V1.1//EN"
"dtd/kdex.dtd" [
  <!ENTITY kappname "&kdm;">
  <!ENTITY package "kdebase">
  <!ENTITY kdmrc "<filename
>kdmrc</filename
>">
  <!ENTITY ksmserver "<application
>ksmserver</application
>">
  <!ENTITY kdesktop "<application
>kdesktop</application
>">
  <!ENTITY XDMCP "<acronym
>XDMCP</acronym
>">
  <!ENTITY xdm "<application
>xdm</application
>">
  <!ENTITY kdmrc-ref SYSTEM "kdmrc-ref.docbook">
  <!ENTITY % addindex "INCLUDE">
  <!ENTITY % Portuguese "INCLUDE"
> <!-- change language only here -->
]>

<book lang="&language;">
<bookinfo>
<title
>O Manual do &kdm;</title>

<authorgroup>
<author
>&Oswald.Buddenhagen; &Oswald.Buddenhagen.mail; </author
><!-- 
<othercredit role="developer">
&Oswald.Buddenhagen; &Oswald.Buddenhagen.mail;
<contrib
>Developer</contrib>
</othercredit>
<othercredit role="reviewer">
&Lauri.Watts; &Lauri.Watts.mail;
<contrib
>Reviewer</contrib>
</othercredit
> -->

<othercredit role="translator"
><firstname
>José</firstname
><surname
>Pires</surname
><affiliation
><address
><email
>jncp@netcabo.pt</email
></address
></affiliation
><contrib
>Tradução</contrib
></othercredit
> 

</authorgroup>

<copyright>
<year
>2000</year>
<holder
>&Neal.Crook;</holder>
</copyright>

<copyright>
<year
>2002</year>
<holder
>&Oswald.Buddenhagen;</holder>
</copyright>

<copyright>
<year
>2003</year>
<holder
>&Lauri.Watts;</holder>
</copyright>

<date
>2003-03-01</date>
<releaseinfo
>0.05.02</releaseinfo>

<abstract>
<para
>Este documento descreve o &kdm;, o Gestor de Ecrã do &kde;. O &kdm; também é conhecido como o <quote
>Gestor de Autenticação</quote
>.</para>
</abstract>

<keywordset>
<keyword
>KDE</keyword>
<keyword
>kdm</keyword>
<keyword
>xdm</keyword>
<keyword
>gestor de ecrã</keyword>
<keyword
>gestor de autenticação</keyword>
</keywordset>
</bookinfo>

<!-- ********************************************************************** -->  
<chapter id="introduction">
<title
>Introdução</title>

<para
>O &kdm; oferece uma interface gráfica que lhe permite autenticar-se num sistema. Ele pede-lhe o nome de utilizador e a senha, autentica o utilizador e inicia uma <quote
>sessão</quote
>. O &kdm; é um substituto do &xdm;, o Gestor de Ecrã do X e é superior a ele em vários aspectos.</para>

</chapter>

<!-- Chapters to write -->
<!-- * Just enough config to get it to run and login to KDE 
     * Adding more session types (GNOME, etc)
     * Adding other customizations to XSession (ssh/gpg-agent, etc)
     * Further customization to KDM (via the kcontrol module, and by 
       hand)
     * XDMCP by query
     * XDMCP by broadcast
     * Sound transparency (if Ade can tell me how!)
     * Document all Keys in the Config File
     * Pull in all options from the KControl Module
     * More resources
-->

<chapter id="quickstart">
<title
>Guia de Iniciação Rápida</title>

<para
>Este é um guia introdutório para os utilizadores que correspondam ao seguinte padrão:</para>

<itemizedlist>
<listitem>
<para
>O X está configurado e funciona com o comando <command
>startx</command
> a partir da linha de comandos.</para>
</listitem>
<listitem>
<para
>Cada utilizador irá só usar um único gestor de janelas ou ambiente de trabalho, e não altera a sua escolha muitas vezes, ou se sente confortável a editar um único ficheiro de texto para alterar a sua opção.</para>
</listitem>
</itemizedlist>

<para
>Este cenário será suficiente para muitos ambientes onde um único utilizador - ou vários utilizadores - normalmente arrancam o computador e se ligam ao seu ambiente favorito.</para>

<procedure>
<title
>Configurar uma Sessão por Omissão</title>
<step>
<para
>Crie ou abra o ficheiro <filename
>~/.xinitrc</filename
></para>
<para
>Se você já tiver um ficheiro <filename
>~/.xinitrc</filename
> funcional, vá para o próximo passo</para>
</step>
<step>
<para
>Se não existir nenhum, adicione uma linha ao ficheiro <filename
>~/.xinitrc</filename
> para iniciar o seu gestor de janelas ou ambiente de trabalho favorito.</para>
<para
>Para o &kde;, você deverá introduzir:</para>
<screen
><userinput
>startkde</userinput
></screen>
<para
>Para os outros gestores de janelas ou ambientes de trabalho, você deverá ver a respectiva documentação para saber o comando correcto.</para>
</step>
<step
><para
>Crie uma ligação, tal como se segue:</para>
<screen
><userinput
><command
>ln</command
> <option
>-s</option
> <parameter
>~/.xinitrc ~/.xsession</parameter
></userinput
></screen>
</step>
</procedure>

<para
>A esta altura, se escrever <userinput
><command
>startx</command
></userinput
> na linha de comandos deverá iniciar o X com uma sessão do &kde;. A próxima tarefa é tentar o &kdm;.</para>

<para
>Como <systemitem class="username"
>root</systemitem
>, escreva <userinput
><command
>kdm</command
></userinput
> na linha de comandos.</para>

<para
>Você deverá ver uma janela de autenticação, a qual será descrita com mais pormenor em <xref linkend="login"/>.</para>

<para
>Se você escrever o seu utilizador e senha normais nos campos indicados e deixar o tipo de sessão <option
>default</option
> seleccionado, deverá abrir uma sessão do &kde; para o seu utilizador.</para>

<para
>Se você tiver outros utilizadores para configurar, você deverá repetir o procedimento acima indicado para cada um deles.</para>

<note>
<para
>Esta é uma introdução rápida para pôr apenas a funcionar. Provavelmente você quererá personalizar ainda mais o &kdm;, por exemplo, para esconder os nomes das contas de sistema, para permitir mais sessões e muito mais. Leia por favor o resto deste manual para saber como fazer estas coisas.</para>
</note>

</chapter>

<chapter id="login"
> 
<title
>A Janela de Autenticação</title
> 

<para
>A interface com o utilizador do &kdm; é feita através de duas janelas. A janela principal é composta por:</para>

<itemizedlist
> 
<listitem>
<para
>Um campo de <guilabel
>Utilizador:</guilabel
> para você poder dar o nome do seu utilizador no sistema.</para>
</listitem>

<listitem>
<para
>Um campo <guilabel
>Senha:</guilabel
> para poder introduzir a sua senha.</para>
</listitem>

<listitem>
<para
>(Opcionalmente) uma imagem gráfica de cada utilizador (por exemplo, uma fotografia digitalizada). Se carregar nessa imagem, o efeito é o mesmo de escrever o nome do utilizador associado a essa imagem no campo <guilabel
>Utilizador:</guilabel
>. (Esta funcionalidade é uma imitação da janela de autenticação do &IRIX;).</para
> 
</listitem>

<listitem>
<para
>Uma lista <guilabel
>Menu</guilabel
> que permite ao &kdm; ser usado para iniciar as sessões com vários tipos de gestor de janelas ou ambientes gráficos no sistema.</para>
</listitem>

<listitem>
<para
>(Opcionalmente) Uma região à esquerda dos campos <guilabel
>Utilizador:</guilabel
>, <guilabel
>Senha:</guilabel
> e <guilabel
>Tipo de Sessão:</guilabel
> que pode ser usada para mostrar uma imagem estática ou um relógio analógico.</para>
</listitem>

<listitem>
<para
>Um botão <guibutton
>OK</guibutton
> que valida o utilizador e a senha e tenta iniciar uma sessão com o tipo seleccionado.</para>
</listitem>

<listitem>
<para
>Um botão <guibutton
>Limpar</guibutton
> que limpa o texto dos campos <guilabel
>Utilizador</guilabel
> e <guilabel
>Senha</guilabel
>.</para>
</listitem
> 

<listitem>
<para
>Um botão <guibutton
>Menu</guibutton
> que abre um menu de acções com os seguintes itens:</para>
 
<itemizedlist>
<listitem>
<para
>(Nos ecrãs locais) Um item <guimenuitem
>Reiniciar o Servidor X </guimenuitem
> que termina o &X-Server; actualmente em execução, inicia um novo e mostra de novo a janela de autenticação. Você poderá usar isto se o conteúdo do seu ecrã parecer estar encravado de alguma forma.</para>
</listitem>

<listitem>
<para
>(Nos ecrãs remotos) Um item <guimenuitem
>Fechar a Ligação</guimenuitem
> que fecha a ligação ao servidor de &XDMCP; ao qual você está ligado de momento. Se você foi para este servidor através de um selector de máquinas, isto levá-lo-á de novo para esse selector, caso contrário só irá reiniciar o &X-Server; e lançar a janela de autenticação de novo.</para>
</listitem>

<listitem>
<para
>(Opcionalmente nos ecrãs locais) Um item <guimenuitem
>Modo de Consola</guimenuitem
> que termina o &X-Server; actualmente em execução e deixa-o de volta na autenticação da consola de texto. O &kdm; irá voltar para a autenticação gráfica se ninguém se ligar na consola durante algum tempo.</para>
</listitem>
</itemizedlist>
</listitem>

<listitem>
<para
>(Opcionalmente) Um botão <guibutton
>Desligar</guibutton
> que mostra a janela de finalização <guibutton
>Desligar</guibutton
>.</para>
</listitem>
</itemizedlist>

<para
>A janela <guilabel
>Desligar</guilabel
> apresenta um conjunto de opções exclusivas que poderão então ser seleccionadas:</para>

<variablelist>
<varlistentry>
<term
>Desligar</term
> 
<listitem>
<para
>Termina o sistema de uma forma controlada, para o preparar para ser desligado.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Reiniciar</term>
<listitem>
<para
>Termina o sistema e arranca-o. Para os sistemas que utilizam o <application
>Lilo</application
>, pode ser usada uma lista opcional que lhe permite seleccionar um 'kernel' de sistema operativo para ser usado no arranque.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Reiniciar o Servidor X</term
> 
<listitem>
<para
>Termina e reinicia o servidor do X. Tipicamente, poderá querer usar esta opção se alterou de alguma forma a configuração do seu X11.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Modo de Consola</term>
<listitem>
<para
>Desliga o &X-Server; e remete o sistema para o modo de consola. Isto é feito ao mudar o sistema para o 'runlevel' ou nível de execução 3. Tipicamente, o gestor do sistema poderá usar esta opção antes de actualizar ou reconfigurar os programas do X11.</para
> 
</listitem>
</varlistentry>
</variablelist>

<para
>Se carregar no botão <guibutton
>OK</guibutton
> inicia a acção seleccionada; se carregar no <guibutton
>Cancelar</guibutton
> volta para a janela principal do &kdm;. </para>

</chapter>

<!-- *********************************************************************** -->
<chapter id="configuring-kdm">
<title
>Configurar o &kdm;</title>

<para
>Este capítulo assume que o &kdm; já está instalado e pronto no seu sistema e que, simplesmente, o utilizador pretende apenas alterar o seu comportamento de alguma forma.</para>

<para
>Quando o &kdm; se inicia, lê a sua configuração na pasta <filename class="directory"
>$KDEDIR/share/config/kdm/</filename
> (esta poderá ser do tipo <filename class="directory"
>/etc/kde3/kdm/</filename
> ou algo do género no seu sistema).</para>

<para
>O ficheiro de configuração principal é o &kdmrc;; todos os outros ficheiros são referenciados a partir daí e poderiam estar guardados com qualquer nome e em qualquer local no sistema - mas normalmente não fará muito sentido por razões óbvias (uma excepção em particular seria referenciar os ficheiros de configuração de um &xdm; já instalado - de facto, quando um &kdm; é instalado, irá de facto tirar partido desta possibilidade se encontrar um &xdm; já instalado).</para>

<para
>Dado que o &kdm; precisa correr antes de qualquer utilizador se autenticar, não está associado com nenhum utilizador em particular. Como tal, não é possível ter um ficheiro <filename
>$<envar
>HOME</envar
>/share/config/kdmrc</filename
> específico para cada utilizador; todos partilham a versão comum do <filename
>kdmrc</filename
>, localizada em <filename
>$<envar
>KDEDIR</envar
>/share/config/kdmrc</filename
>. Daí, parte-se do princípio que a configuração do &kdm; só poderá ser alterada por aqueles utilizadores que tiverem acesso de escrita ao <filename
>$<envar
>KDEDIR</envar
>/share/config/kdmrc</filename
> (o que normalmente está restrito aos administradores de sistema que se ligam como <systemitem class="username"
>root</systemitem
>).</para>

<para
>Poderá ver o ficheiro &kdmrc; que está em uso actualmente no seu sistema e poderá configurar o &kdm;, bastando para tal editar este ficheiro. Em alternativa, poderá usar a ferramenta de configuração gráfica oferecida pelo Centro de Controlo do KDE (situada em <menuchoice
><guisubmenu
>Administração do Sistema</guisubmenu
> <guimenuitem
>Gestor de Autenticação</guimenuitem
></menuchoice
>), o qual se encontra descrito nos <ulink url="help:/kcontrol/login-manager.html"
>ficheiros de ajuda do &kcontrolcenter;</ulink
>. </para>

<para
>O resto deste capítulo descreve a configuração do &kdm; através do módulo de controlo do &kcontrol;, o <link linkend="kdm-files"
>próximo capítulo</link
> descreve as opções disponíveis no &kdmrc; propriamente dito. Se você só precisa de configuração utilizadores locais, o módulo do &kcontrolcenter; deverá ser suficiente para as suas necessidades. Se você precisar de configurar autenticação remota ou várias sessões do &kdm; a correr, você precisa de continuar a ler.</para>

<sect1 id="kdm-kcontrol-module">
<sect1info>
<authorgroup>
<author
>&Thomas.Tanghus; &Thomas.Tanghus.mail;</author>
<author
>&Steffen.Hansen; &Steffen.Hansen.mail;</author>
<author
>&Mike.McBride; &Mike.McBride.mail;</author>
</authorgroup>
</sect1info>

<title
>O Módulo do &kcontrolcenter; do Gestor de Autenticações</title>

<para
>Ao usar este módulo, você poderá configurar o gestor gráfico de autenticações do &kde;, o &kdm;. Poderá configurar como aparecerá o ecrã de autenticação, quem tem acesso à utilização do gestor de autenticações ou quem pode desligar o computador.</para>

<note
><para
>Todas as configurações serão gravadas no ficheiro de configuração &kdmrc;, o qual no seu estado original tem muitos comentários que o ajudam a configurar o &kdm;. Ao usar este módulo do &kcontrolcenter; irá retirar esses comentários do ficheiro. Todas as opções disponíveis no &kdmrc; estão cobertas no <xref linkend="kdm-files"/>.</para>

<para
>As opções listadas neste capitulo farão referências às suas equivalentes no &kdmrc;. Todas as opções disponíveis no módulo do &kcontrol; também estão disponíveis directamente no &kdmrc; mas o inverso não é verdade.</para
></note>

<para
>Para poder organizar todas essas opções, o módulo está dividido em cinco secções: <link linkend="kdmconfig-appearance"
><guilabel
>Aparência</guilabel
></link
>, <link linkend="kdmconfig-font"
><guilabel
>Tipo de Letra</guilabel
></link
>, <link linkend="kdmconfig-background"
><guilabel
>Fundo</guilabel
></link
>, <link linkend="kdmconfig-shutdown"
><guilabel
>Desligar</guilabel
></link
>, <link linkend="kdmconfig-users"
><guilabel
>Utilizadores</guilabel
></link
> e <link linkend="kdmconfig-convenience"
><guilabel
>Conveniência</guilabel
></link
>.</para>

<para
>O utilizador poderá mudar de secção para secção, usando as páginas no topo da janela.</para>

<note
><para
>Se você não estiver ligado como um super-utilizador, terá de carregar no botão <guibutton
>Modo de Administração...</guibutton
>. Ser-lhe-á então pedida a senha de super-utilizador. Se indicar a senha correcta, poderá então modificar a configuração deste módulo.</para
></note>

<sect2 id="kdmconfig-appearance">
<title
>Aparência</title>

<para
>A partir desta página, você poderá alterar a aparência visual do &kdm;, o gestor gráfico de autenticações do &kde;.</para>

<para
>A <guilabel
>Saudação:</guilabel
> é o título do ecrã de autenticação. A configuração deste item é especialmente útil se você tiver muitos servidores onde os utilizadores se possam autenticar. Pode utilizar várias sequências especiais, que estão descritas no item de configuração <link linkend="option-greetstring"
><option
>GreetString</option
></link
> no &kdmrc;. </para>

<para
>Você poderá então optar por mostrar tanto a hora actual do sistema, um logótipo ou nada de especial na área de autenticação. Faça a sua opção nas opções exclusivas chamadas de <guilabel
>Área do logótipo</guilabel
>. Isto corresponde ao <link linkend="option-logoarea"
><option
>LogoArea</option
></link
> do &kdmrc;</para>

<para
>Se optou por <guilabel
>Mostrar um logótipo</guilabel
>, poderá agora escolher um logótipo:</para>

<itemizedlist>
<listitem>
<para
>Largue um ficheiro de imagem no botão correspondente.</para>
</listitem>
<listitem>
<para
>Carregue no botão da imagem e seleccione uma nova na janela de selecção de imagens.</para>
</listitem>
</itemizedlist>

<para
>Se você não indicar nenhum logótipo, será apresentado o predefinido em <filename
>$<envar
>KDEDIR</envar
>/share/apps/kdm/pics/kdelogo.xpm</filename
>.</para>

<para
>Normalmente a janela de autenticação está centrada no ecrã. Utilize as opções de <guilabel
>Posição:</guilabel
> se quiser que esta janela apareça noutro lado do ecrã. Pode indicar a posição relativa (percentagem do tamanho do ecrã) para o centro da janela de autenticação, relativamente ao canto superior esquerdo do ecrã, no campos <guilabel
>X:</guilabel
> e <guilabel
>Y:</guilabel
>, respectivamente. Estes irão corresponder à opção <link linkend="option-greeterpos"
><option
>GreeterPos</option
></link
> no &kdmrc;.</para>

<para
>Enquanto que o estilo do &kde; depende da configuração do utilizador que se encontra ligado, o estilo usado pelo &kdm; poderá ser configurado usando as opções <guilabel
>Estilo da Interface:</guilabel
> e <guilabel
>Esquema de Cores:</guilabel
>. Estas correspondem às opções <link linkend="option-guistyle"
><option
>GUIStyle</option
></link
> e <link linkend="option-colorscheme"
><option
>ColorScheme</option
></link
> do &kdmrc;, respectivamente.</para>

<para
>Por baixo disso, você tem uma lista onde poderá escolher a língua para a sua janela de autenticação, correspondente à opção <option
>Language</option
> do &kdmrc;.</para>

</sect2>

<sect2 id="kdmconfig-font">
<title
>Tipo de Letra</title>

<para
>Nesta secção do módulo você poderá alterar os tipos de letra usados na janela de autenticação. Só estão disponíveis aqui os tipos de letra para todos os utilizadores, não os que você instalou para cada utilizador isoladamente.</para>

<para
>Você poderá escolher três estilos de tipo de letra na lista em baixo (<guilabel
>Saudação:</guilabel
>, <guilabel
>Erro:</guilabel
> e <guilabel
>Normal:</guilabel
>). Quando você carregar no botão do <guibutton
>Escolher...</guibutton
> irá aparecer uma janela na qual poderá escolher as novas características do tipo de letra.</para>

<itemizedlist>
<listitem>
<para
>O tipo de letra <guilabel
>Normal:</guilabel
> é usado em todos os outros locais da janela de autenticação.</para>
</listitem>
<listitem>
<para
>O tipo de letra de <guilabel
>Erro:</guilabel
> é usado quando uma autenticação é mal-sucedida.</para>
</listitem>
<listitem>
<para
>O tipo de letra <guilabel
>Saudação:</guilabel
> é o usado no título (a Mensagem de Boas-Vindas).</para>
</listitem>
</itemizedlist>

<para
>Você poderá também activar a opção <guilabel
>Suavização dos tipos de letra</guilabel
> se você quiser tipos de letra suavizados na janela de autenticação.</para>

</sect2>

<sect2 id="kdmconfig-background">
<title
>Fundo</title>

<para
>Aqui você poderá alterar o fundo do ecrã que é mostrado quando um utilizador se autentica. Você poderá usar uma única cor ou uma imagem como fundo. Se você tiver uma imagem como fundo e optar por centrá-la, a cor de fundo seleccionada será usada à volta da imagem se esta não for grande o suficiente para cobrir o ecrã inteiro.</para>

<para
>As cores de fundo e os efeitos são controlados pelas opções da página <guilabel
>Fundo</guilabel
>, onde você poderá seleccionar uma imagem de fundo e a sua colocação nas opções da página <guilabel
>Papel de parede</guilabel
>.</para>

<para
>Para alterar a cor ou cores de fundo, basta carregar nos botões respectivos e seleccionar uma nova cor.</para>

<para
>A lista por cima dos botões de cores oferece-lhe vários efeitos de mistura. Escolha um da lista para que este seja apresentado no pequeno monitor no cimo da janela. As suas opções são:</para>

<variablelist>
<varlistentry>
<term
>Simples</term>
<listitem
><para
>Ao escolher este modo, poderá seleccionar uma cor, utilizando o botão de cores chamado <guibutton
>Cor 1</guibutton
>, para que o fundo do ecrã inteiro possa ser coberto com esta cor.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Padrão</term>
<listitem
><para
>Ao escolher este modo, poderá seleccionar duas cores (utilizando ambos os botões de cores). </para
> <para
>Poderá então seleccionar um padrão ao carregar em <guilabel
>Configurar</guilabel
>. Isto irá abrir uma janela que lhe dará a oportunidade de seleccionar o dito padrão. Basta carregar no padrão que quiser, carregando de seguida no botão <guibutton
>OK</guibutton
>; o &kde; irá apresentar o padrão escolhido em conjunto com as duas cores previamente escolhidas. Para saber mais sobre padrões, veja a secção <ulink url="help:/kcontrol/background/index.html#bkgnd-patterns"
>Fundo: Adicionar, Remover e Modificar Padrões</ulink
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Programa de Fundo</term>
<listitem
><para
>Se seleccionar esta opção, poderá fazer com que o &kde; use um programa externo para determinar qual o fundo. Este poderá ser qualquer programa à sua escolha. Para mais informações sobre esta opção, veja a secção intitulada de <ulink url="help:/kcontrol/background/index.html#bkgnd-programs"
>Fundo: Usar um programa externo</ulink
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Gradiente Horizontal</term>
<listitem
><para
>Ao escolher este modo, o utilizador poderá seleccionar duas cores (com ambos os botões de cores). O &kde; irá iniciar com a cor seleccionada em <guilabel
>Cor 1</guilabel
> no lado esquerdo do ecrã, transformando-se gradualmente na cor seleccionada em <guilabel
>Cor 2</guilabel
> ao chegar ao lado direito.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Gradiente Vertical</term>
<listitem
><para
>Escolhendo este modo, poderá seleccionar duas cores (com ambos os botões de cores). O &kde; irá iniciar com a cor seleccionada em <guilabel
>Cor 1</guilabel
> no topo do ecrã, transformando-se gradualmente na cor seleccionada em <guilabel
>Cor 2</guilabel
> ao chegar à parte inferior do mesmo.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Gradiente em Pirâmide</term>
<listitem
><para
>Escolhendo este modo, o utilizador poderá seleccionar duas cores (com ambos os botões de cores). O &kde; irá iniciar com a cor seleccionada em <guilabel
>Cor 1</guilabel
> em cada canto do ecrã, transformando-se gradualmente na cor seleccionada em <guilabel
>Cor 2</guilabel
> ao dirigir-se para o centro do ecrã.</para
></listitem
> 
</varlistentry>
<varlistentry>
<term
>Gradiente em Secção de Tubo</term>
<listitem
><para
>Escolhendo este modo, o utilizador poderá seleccionar duas cores (com ambos os botões de cores). O &kde; irá iniciar com a cor seleccionada em <guilabel
>Cor 1</guilabel
> em cada canto do ecrã, transformando-se gradualmente na cor seleccionada em <guilabel
>Cor 2</guilabel
> ao dirigir-se para o centro. O aspecto deste gradiente é diferente do piramidal.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Gradiente Elíptico</term>
<listitem
><para
>Escolhendo este modo, o utilizador pode seleccionar duas cores (com ambos os botões de cores). O &kde; irá iniciar com a cor seleccionada em <guilabel
>Cor 1</guilabel
> no centro do ecrã, transformando-se gradualmente na cor seleccionada em <guilabel
>Cor 2</guilabel
> com um padrão elíptico.</para
></listitem
> 
</varlistentry>
</variablelist>

<para
>O botão de configuração só é necessário se você seleccionar o <guilabel
>Programa de fundo</guilabel
> ou os <guilabel
>Padrões</guilabel
>. Nesse caso, aparecerá outra janela onde poderá configurar as opções específicas.</para>
<para
><emphasis
>Papel de Parede</emphasis
></para>
<para
>Para seleccionar uma nova imagem de fundo, primeiro carregue na secção <guilabel
>Papéis de parede</guilabel
>, onde poderá seleccionar uma imagem na lista <guilabel
>Papel de parede</guilabel
> ou <guibutton
>Escolher...</guibutton
> um novo ficheiro de imagem no selector de ficheiros.</para>

<para
>A imagem pode ser mostrada de seis maneiras diferentes:</para>
<variablelist>
<varlistentry>
<term
>Sem papel de parede</term
> 
<listitem
><para
>Não é apresentada nenhuma imagem, só as cores de fundo.</para>
</listitem
></varlistentry>
<varlistentry>
<term
>Centrado</term
> 
<listitem
><para
>A imagem será centrada no ecrã. As cores de fundo estão presentes em todo o lado que a imagem não cobre.</para
> </listitem>
</varlistentry>
<varlistentry>
<term
>Mosaico</term>
<listitem
><para
>A imagem será duplicada até preencher o ecrã completamente. A primeira imagem será colocada no canto superior esquerdo do ecrã, e será replicada para baixo e para a direita.</para
> </listitem>
</varlistentry>
<varlistentry>
<term
>Mosaico Centrado</term>
<listitem
><para
>A imagem será duplicada até preencher o ecrã completamente. A primeira imagem será colocada no centro do ecrã, e será replicada para cima, para baixo, para a esquerda e para a direita.</para
> </listitem>
</varlistentry>
<varlistentry>
<term
>Centrado Esticado</term>
<listitem
><para
>A imagem será colocada no centro do ecrã. Será escalada de modo a caber no ecrã, mas mantendo as proporções da imagem original. Isto originará uma imagem não distorcida. </para
> </listitem>
</varlistentry>
<varlistentry>
<term
>Escalado</term>
<listitem
><para
>A imagem será escalada de modo a caber no ecrã. Será redimensionada de modo a ajustar-se aos quatro cantos.</para
> </listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="kdmconfig-shutdown">
<title
><guilabel
>Desligar</guilabel
></title>

<para
><guilabel
>Permitir Desligar</guilabel
></para>
<para
>Use estas listas para escolher quem tem permissões para desligar:</para>
<itemizedlist>
<listitem>
<para
><guilabel
>Ninguém</guilabel
>: Nenhum utilizador poderá desligar o computador com o &kdm;. Você precisa estar ligado e executar um comando.</para>
</listitem>
<listitem>
<para
><guilabel
>Todos</guilabel
>: Qualquer utilizador poderá desligar o computador com o &kdm;.</para>
</listitem>
<listitem
><para
><guilabel
>Apenas o 'root'</guilabel
>: O &kdm; necessita que a senha do <systemitem
>root</systemitem
> seja indicada antes de desligar o computador.</para
></listitem
> 
</itemizedlist>

<para
>Você poderá configurar independentemente quem tem permissão para executar um comando de finalização para os utilizadores <guilabel
>Locais:</guilabel
> e <guilabel
>Remotos:</guilabel
>.</para>

<para
><emphasis
>Comandos</emphasis
></para
> <para
>Utilize estes campos de texto para indicar o comando de finalização exacto.</para
> <para
>O comando <guilabel
>Parar:</guilabel
> usa por omissão o <command
>/sbin/halt</command
>. O comando para <guilabel
>Reiniciar:</guilabel
> é, por omissão, o <command
>/sbin/reboot</command
>.</para>

<para
>Quando o <guilabel
>Mostrar as opções do arranque</guilabel
> está activo, o &kdm; irá mostrar-lhe as opções no reinício para o gestor de arranque LILO. Para esta funcionalidade resultar, você precisa de indicar as localizações correctas do seu comando <command
>lilo</command
> e do ficheiro 'map' do LILO. Lembre-se que esta opção não está disponível em todos os sistemas operativos.</para>

</sect2>

<sect2 id="kdmconfig-users">
<title
>Utilizadores</title>

<para
>Aqui, pode alterar a forma como os utilizadores são representados na janela de autenticação.</para>

<para
>Você pode desactivar de todo a lista de utilizadores no &kdm; na secção <guilabel
>Mostrar os Utilizadores</guilabel
>. Poderá optar por:</para>

<variablelist>
<varlistentry>
<term
><guilabel
>Lista de Visíveis</guilabel
></term>
<listitem>
<para
>Só são mostrados os utilizadores que você activou especificamente na lista ao lado</para>
<para
>Se não assinalar esta opção, não será mostrada qualquer lista. Esta é a forma mais segura, dado que um atacante teria aí de adivinhar um utilizador para além da sua senha. É também a forma preferida se tiver bastantes utilizadores para listar, atendendo a que a lista ficaria incomportável.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><guilabel
>Escolha inversa</guilabel
></term>
<listitem>
<para
>Permite-lhe seleccionar uma lista dos utilizadores que <emphasis
>não</emphasis
> deverão ser mostrados; todos os outros utilizadores serão então apresentados.</para>
</listitem>
</varlistentry>
</variablelist>

<para
>Independentemente dos utilizadores que você indicar por nome, você poderá usar a opção <guilabel
>UIDs do Sistema</guilabel
> para indicar um intervalo de <acronym
>UID</acronym
>s válidos que serão mostrados na lista. Por omissão, os IDs de utilizadores abaixo de 1000, que correspondem normalmente a utilizadores do sistema ou dos servidores, bem como os utilizadores com IDs superiores a 65000, não são mostrados.</para>

<para
>Você também pode activar a opção <guilabel
>Ordenar os utilizadores</guilabel
>, para que a lista apareça ordenada alfabeticamente. Se estiver desligada, os utilizadores irão aparecer pela ordem em que estão descritos no ficheiro de senhas. O &kdm; irá também completar automaticamente os nomes dos utilizadores se você activar a opção de <guilabel
>Completação automática</guilabel
>.</para>

<para
>Se você optar por mostrar os utilizadores, então a janela de autenticação irá mostrar as imagens (que você poderá seleccionar) de uma lista de utilizadores. Quando alguém estiver prestes a autenticar-se, poderá seleccionar o seu nome de utilizador ou imagem, indicar a sua senha e ser-lhe-á concedido o acesso.</para>

<para
>Se você permitir as imagens dos utilizadores, você poderá configurar a origem destas imagens.</para>

<para
>Você poderá configurar aqui a imagem de administração para cada utilizador do sistema. Dependendo da ordem seleccionada acima, os utilizadores poderão ser capazes de sobrepor a sua selecção.</para>

<para
>Se optar por não mostrar os utilizadores, então a janela de autenticação será mais tradicional. Os utilizadores irão necessitar de escrever o seu nome de utilizador e a sua senha para terem acesso. É a forma preferida se você tiver muitos utilizadores neste terminal.</para>

</sect2>

<sect2 id="kdmconfig-convenience">
<title
>Conveniência</title>

<para
>Na página de <guilabel
>conveniência</guilabel
> você poderá configurar algumas opções que tornarão a vida mais fácil para as pessoas mais preguiçosas, como a ligação automática ou a desactivação das senhas.</para>

<important
><para
>Por favor pense mais do que duas vezes antes de usar estas opções. Cada uma das opções da página <guilabel
>Conveniência</guilabel
> adequa-se a comprometer a segurança do seu sistema. Na prática, estas opções são só para ser usadas num ambiente completamente não crítico, &eg; um computador privado em casa. </para
></important>

<sect3 id="loginmanager-convenience-autologin">
<title
>Autenticação Automática</title>

<para
>A ligação ou autenticação automática irá dar acesso a toda a gente para uma dada conta do seu sistema, sem efectuar nenhuma autenticação. Você poderá activar esta opção em <guilabel
>Activar a autenticação automática</guilabel
>.</para>

<para
>Você poderá escolher a conta a ser usada para a autenticação automática na lista <guilabel
>Utilizador:</guilabel
>.</para>

</sect3>

<sect3 id="loginmanager-convenience-nopasswd">
<title
><guilabel
>Autenticação sem Senha</guilabel
></title>

<para
>Se usar esta funcionalidade, poderá permitir a certos utilizadores ligarem-se sem terem de indicar as suas senhas. Active esta opção em <guilabel
>Activar as autenticações sem senha</guilabel
>.</para>

<para
>Por baixo desta opção você verá uma lista com os utilizadores no sistema. Active a autenticação sem senha para os utilizadores específicos assinalando a opção que sucede aos nomes dos utilizadores. Por omissão, esta funcionalidade está desactivada para todos os utilizadores.</para>

<important
><para
>Mais uma vez, esta opção só deverá ser usada num ambiente seguro. Se a activar num sistema público, terá de ter em atenção que só os utilizadores com grandes restrições de acesso deverão ter uma autenticação sem senha, como o <systemitem
>guest</systemitem
>.</para
></important>

<para
>Você poderá também escolher qual o utilizador que é <quote
>pré-seleccionado</quote
> quando o &kdm; se inicia. O valor por omissão é <guilabel
>Nenhum</guilabel
>, mas poderá escolher o <guilabel
>Anterior</guilabel
> para que o &kdm; utilize por omissão o último utilizador que se autenticou com sucesso, ou poderá ainda <guilabel
>Especificar</guilabel
> um utilizador em particular como sendo sempre seleccionado da lista. Você poderá também fazer com que o &kdm; ponha o campo da senha em primeiro plano, para que ao chegar ao ecrã de autenticação, possa logo introduzir a senha imediatamente.</para>

<para
>A opção <guilabel
>Ligar automaticamente outra vez depois de abortar o X</guilabel
> permite-lhe ignorar o procedimento de autenticação quando o seu servidor de X estoirou acidentalmente.</para>

</sect3>

</sect2>

</sect1>

</chapter>

&kdmrc-ref;

<!-- ************************************************************ -->   
<chapter id="configuring-your-system-for-kdm">
<title
>Configurar o sistema para utilizar o &kdm;</title>

<para
>Este capítulo assume que o seu sistema já está configurado para iniciar o &X-Window; e que só necessita de o reconfigurar para permitir a autenticação gráfica.</para>

<sect1 id="setting-up-kdm">
<title
>Configurar o &kdm;</title>

<para
>O factor fundamental que controla se o seu computador arranca para uma mensagem do terminal (modo consola) ou para uma ambiente gráfico é o 'runlevel' por omissão. O 'runlevel' ou nível de execução é definido pelo programa <application
> <ulink url="man:init"
>/sbin/init</ulink
></application
> segundo o controlo do ficheiro de configuração <filename
>/etc/inittab</filename
>. Os 'runlevels' por omissão que são usados pelos diferentes sistemas &UNIX; (e pelas diferentes distribuições do Linux) variam mas, se olhar para o ficheiro <filename
>/etc/inittab</filename
>, o início do mesmo deverá ser algo do género:</para>

<screen
># 'Runlevel' por omissão. Os 'runlevels' usados pelo RHS são:
# 0 - desligar (NÃO configure o 'initdefault' para isto)
# 1 - Modo mono-utilizador
# 2 - Multi-utilizador sem NFS
# 3 - Multi-utilizador completo
# 4 - não usado
# 5 - X11
# 6 - reiniciar (NÃO configure o 'initdefault' para isto)

id:3:initdefault:  
</screen>

<para
>Todas as linhas excepto a último deste excerto são comentários (aqui traduzidos para facilitar a compreensão). Os comentários indicam que o 'runlevel' 5 é usado para o X11 e que o 'runlevel' 3 é usado para o modo multi-utilizador sem o X11 (modo de consola). A última linha indica que o 'runlevel' por omissão do sistema é o 3 (modo de consola). Se o seu sistema usar actualmente a autenticação gráfica (por exemplo através do &xdm;), o seu 'runlevel' por omissão irá corresponder ao especificado para o X11.</para>

<para
>O nível de execução com a autenticação gráfica (&xdm;), para algumas das distribuições comuns do Linux, é:</para>

<itemizedlist>
<listitem
><para
>5 no &RedHat; 3.x e posteriores, e no &Mandrake;</para
></listitem>
<listitem
><para
>4 no Slackware</para
></listitem>
<listitem
><para
>3 no &SuSE; 4.x e 5.x</para
></listitem>
</itemizedlist>

<para
>O primeiro passo na configuração do seu sistema é a garantia de que pode iniciar o &kdm; a partir da linha de comandos. Logo que isto esteja a funcionar, pode alterar a configuração do seu sistema de modo a que o &kdm; se inicie automaticamente de cada vez que reinicia o seu sistema.</para>

<para
>Para testar o &kdm;, deverá passar primeiro o seu sistema para um 'runlevel' que não arranque o &xdm;. Para o fazer, indique um comando como o seguinte:</para>

<screen
><command
>/sbin/init <option
>3</option
></command
></screen>

<para
>Em vez do número <option
>3</option
> deverá especificar o 'runlevel' apropriado para o modo de consola no seu sistema.</para>

<para
>Se o seu sistema utiliza Pluggable Authentication Modules (<abbrev
>PAM</abbrev
>), o que é normal nas distribuições recentes do &Linux; e do &Solaris;, deverá verificar se a sua configuração do <abbrev
>PAM</abbrev
> lhe permite autenticar-se através do serviço <literal
>kde</literal
>. Se usou anteriormente o &xdm; com sucesso, não deverá ter de efectuar nenhumas alterações à sua configuração do <abbrev
>PAM</abbrev
> para usar o &kdm;, a qual se encontra em <filename
>/etc/pam.conf</filename
> ou <filename
>/etc/pam.d/kde</filename
>. Nais informações sobre a configuração do <abbrev
>PAM</abbrev
> estão fora do âmbito deste manual, mas o <abbrev
>PAM</abbrev
> vem com alguma documentação compreensível (tente ver em <filename
>/usr/doc/*pam*/html</filename
>).</para>

<para
>Agora é a altura de testar o &kdm;, indicando o seguinte comando:</para>

<screen
><command
>kdm <option
>-nodaemon</option
></command
>
</screen>

<para
>Se obtiver uma janela de autenticação do &kdm; e se conseguir autenticar-se, as coisas estão a correr bem. O factor principal que poderá falhar aqui será o facto do &kdm; não encontrar as bibliotecas dinâmicas do &Qt; ou do &kde;. Se tiver uma distribuição binária das bibliotecas do &kde;, certifique-se que o &kdm; está instalado no mesmo sítio que as bibliotecas assumem que este esteja de facto (normalmente em <filename
>/opt/kde/bin</filename
>) e tente alterar algumas das variáveis de ambiente para apontar para as bibliotecas do &kde; e do &Qt;.</para>

<para
>Por exemplo:</para>

<screen
><command
>export 
<option
>KDEDIR=<replaceable
>/opt/kde</replaceable
></option
></command>
<command
>export 
<option
>QTDIR=<replaceable
>/usr/lib/qt2</replaceable
></option
></command>
<command
>export 
<option
>PATH=<replaceable
>$KDEDIR/bin:$QTDIR/bin:$PATH</replaceable
></option
></command>
<command
>export 
<option
>LD_LIBRARY_PATH=<replaceable
>$KDEDIR/lib:$QTDIR/lib</replaceable
></option
></command
>
</screen>

<para
>Se mesmo assim não tiver sucesso, tente iniciar o &xdm; em alternativa, para confirmar se não não está a passar por um problema de configuração mais sério do X.</para>

<para
>Quando for capaz de iniciar o &kdm; com sucesso, poderá começar a substituir o &xdm; pelo &kdm;. Mais uma vez, isto é dependente da distribuição.</para>

<itemizedlist>
<listitem>
<para
>No caso da &RedHat;, edite o <filename
>/etc/inittab</filename
>, procure esta linha:</para>
<screen
>x:5:respawn:/usr/X11/bin/xdm -nodaemon</screen>
<para
>e substitua por:</para>
<screen
>x:5:respawn:/opt/kde/bin/kdm</screen>
<para
>Isto indica ao <command
>init</command
>(8) para reiniciar o &kdm; quando o sistema estiver no nível de execução ('runlevel') 5. Repare que o &kdm; não necessita da opção <option
>-nodaemon</option
>.</para>
</listitem>
<listitem>
<para
>Para o &Mandrake;, o 'runlevel' do X11 no ficheiro <filename
>/etc/inittab</filename
> invoca o 'shell script' <filename
>/etc/X11/prefdm</filename
>, que é configurado para poder escolher vários gestores gráficos de autenticação, incluindo o &kdm;. Certifique-se que todas as localizações estão correctas na sua instalação.</para
> 
</listitem>
<listitem>
<para
>No caso da &SuSE;, edite o <filename
>/sbin/init.d/xdm</filename
> para adicionar uma linha inicial:</para>

<screen
>. /etc/rc.config
DISPLAYMANAGER=kdm
export DISPLAYMANAGER</screen>
</listitem>
<listitem
><para
>No caso do FreeBSD, edite o <filename
>/etc/ttys</filename
> e descubra a seguinte linha:</para>
<screen
>ttyv8   "/usr/X11R6/bin/xdm -nodaemon"  xterm   off secure</screen>
<para
>e mude-a para o seguinte:</para>
<screen
>ttyv8   "/usr/local/bin/kdm"  xterm   on secure</screen>
</listitem>

<listitem
><para
>Grande parte das outras distribuições são uma variação destas.</para
></listitem>
</itemizedlist>

<para
>Nesta altura, o utilizador poderá testar de novo o &kdm;, passando o seu sistema para o 'runlevel' que deverá executar o &kdm;. Para o fazer, invoque um comando do tipo:</para>

<screen
><command
>/sbin/init <option
>5</option
></command
>
</screen>

<para
>Em vez do número <option
>5</option
> deverá indicar o 'runlevel' apropriado para correr o X11 no seu sistema.</para>

<para
>O passo final é editar o campo <parameter
>initdefault</parameter
> no ficheiro <filename
>/etc/inittab</filename
> para especificar o 'runlevel' apropriado para o X11.</para>

<warning
><para
>Antes de efectuar esta alteração, certifique-se que tem uma forma de reiniciar o seu sistema se ocorrer algum problema. Esta poderá ser uma disquete de <quote
>emergência</quote
> oferecida pela distribuição do seu sistema operativo ou uma disquete de <quote
>emergência</quote
> feita à medida, como a <literal
>tomsrtbt</literal
>. Ignore este conselho por sua conta e risco.</para
></warning>

<para
>Isto normalmente corresponde a mudar a linha:</para>
<screen
>id:3:initdefault:</screen>
<para
>para</para>
<screen
>id:5:initdefault:</screen>

<para
>Quando reiniciar o seu sistema, deverá chegar à autenticação gráfica do &kdm;.</para>

<para
>Se este passo não tiver sucesso, o problema possível será que o ambiente usado durante a altura do arranque difere do ambiente que usou para testar na linha de comandos. Se está a tentar que duas versões do KDE coexistam, tenha um especial cuidado com as configurações que fizer das suas variáveis de ambiente <envar
>PATH</envar
> e <envar
>LD_LIBRARY_PATH</envar
>, de modo a que sejam consistentes e que os programas de arranque não as modifiquem de alguma forma.</para>

</sect1>

</chapter>

<chapter id="different-window-managers-with-kdm">
<title
>Suportar vários gestores de janelas</title>

<para
>O &kdm; detecta a maioria dos gestores de janelas e ambientes de trabalho que estão disponíveis, quando é executado. A instalação de um ambiente novo deverá torná-lo automaticamente disponível na janela principal do &kdm;, em <guilabel
>Tipo de Sessão:</guilabel
>.</para>

<para
>Se tiver um gestor de janelas muito recente, ou se for algo que o &kdm; não suporte, a primeira coisa que deverá verificar é se a aplicação a executar está na sua <envar
>PATH</envar
> e se não mudou de nome, durante a instalação, para algo inesperado.</para>

<para
>Se for o caso de a aplicação ser muito recente e ainda não ser suportada pelo &kdm;, poderá simplesmente adicionar uma sessão nova.</para>

<para
>As sessões estão definidas em ficheiros <firstterm
>.desktop</firstterm
> na pasta <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/apps/kdm/sessions</filename
>. Poderá adicionar simplesmente um ficheiro <literal role="extension"
>.desktop</literal
> apropriado nessa pasta. Os campos são:</para>

<programlisting
>[Desktop Entry]
Encoding=UTF-8 <lineannotation
>Esta é corrigida como <option
>UTF-8</option>
e poderá ser omitida</lineannotation>
Type=XSession <lineannotation
>Esta é corrigida como <option
>XSession</option>
e poderá ser omitida</lineannotation>
Exec=<replaceable
>nome do executável</replaceable
> <lineannotation
>É passado
a um <command
>eval exec</command
> numa linha de comandos Bourne</lineannotation>
TryExec=<replaceable
>nome do executável</replaceable
> <lineannotation
>É 
suportado mas não é necessário</lineannotation>
Name=<replaceable
>nome a mostrar na lista de sessões do &kdm;</replaceable
></programlisting>

<para
>Existem também três sessões <quote
>mágicas</quote
>:</para>

<variablelist>
<varlistentry>
<term
>por omissão</term>
<listitem>
<para
>A sessão por omissão para o &kdm; é, normalmente, o &kde;, mas pode ser configurada pelo administrador de sistemas. </para>
</listitem>
</varlistentry>
<varlistentry>
<term
>personalizado</term>
<listitem>
<para
>A sessão 'personalizada' irá executar o ficheiro ~/.xsession do utilizador, se existir. </para>
</listitem>
</varlistentry>
<varlistentry>
<term
>emergência</term>
<listitem>
<para
>O modo de 'emergência' irá correr uma sessão muito simples e é apenas útil para fins de depuração. </para>
</listitem>
</varlistentry>
</variablelist>

<para
>Para sobrepor um tipo de sessão, copie o ficheiro '.desktop' da pasta de dados para a pasta de configuração e altere-o de acordo com a sua vontade. Para remover os tipos de sessão fornecidos, poderá "escondê-los" com ficheiros '.desktop' que contenham o texto "Hidden=true". Para as sessões 'mágicas' não existem ficheiros '.desktop' por omissão, mas o &kdm; finge que eles existem, pelo que os poderá sobrepor como outro tipo qualquer. Espera-se que já saiba então como adicionar um tipo de sessão novo, por agora ;-)</para>

</chapter>

<chapter id="xdmcp-with-kdm">
<title
>Usar o &kdm; para Autenticações Remotas (&XDMCP;)</title>

<para
>O &XDMCP; é a norma do Open Group, e significa <quote
>X Display Manager Control Protocol</quote
>. Este protocolo é usado para configurar as ligações entre os sistemas remotos na rede.</para>

<para
>O &XDMCP; é útil em situações com vários utilizadores, existindo várias estações de trabalho e um servidor mais poderoso que poderá fornecer os recursos para correr várias sessões do X. Por exemplo, o &XDMCP; é uma boa forma de reutilizar os computadores antigos - um Pentium ou mesmo um computador 486 com 16 Mb RAM é suficiente para correr o X em si, e a utilização do &XDMCP; num desses computadores poderá correr uma sessão completa e moderna do &kde; a partir de um servidor. Por parte do servidor, logo que uma sessão do &kde; (ou de outro ambiente) esteja a correr, a execução de mais outra irá necessitar de muito poucos recursos extra.</para>

<para
>Contudo, ao permitir outro método de autenticação à sua máquina, terá implicações de segurança. Você deverá correr este serviço apenas se quiser permitir aos servidores de X remotos iniciarem as sessões no seu sistema. Os utilizadores com apenas um computador de &UNIX; não deverão necessitar disto.</para>

</chapter>

<chapter id="advanced-topics">
<title
>Tópicos Avançados</title>

<sect1 id="command-sockets">
<title
>'Sockets' de Comandos</title>

<para
>Esta é uma funcionalidade que você poderá usar para controlar remotamente o &kdm;. É principalmente usada pelo &ksmserver; e pelo &kdesktop;, a partir de uma sessão em execução, mas poderá ser usada para outras aplicações.</para>

<para
>Os 'sockets' são do domínio &UNIX; e estão nas sub-pastas da pasta indicada em <option
>FifoDir</option
>=. A sub-pasta é a chave de endereçamento e segurança; os 'sockets' têm todos o nome de ficheiro <filename
>socket</filename
> e as permissões de ficheiros <literal
>rw-rw-rw-</literal
> (0666). Isto deve-se ao facto de alguns sistemas não ligarem às permissões dos ficheiros dos 'sockets'.</para>

<para
>Existem dois tipos de 'sockets': o global (dmctl) e os que são usados por ecrã (dmctl-&lt;ecrã&gt;).</para>

<para
>A sub-pasta do global pertence ao 'root', enquanto as sub-pastas por ecrã pertencem ao utilizador que está na sessão ('root' ou o utilizador autenticado). O grupo que possui as sub-pastas pode ser definido com o FifoGroup=, caso contrário é o 'root'. As permissões dos ficheiros das sub-pastas são rwxr-x--- (0750).</para>

<para
>Os campos de um comando são separados por tabulações (<token
>\t</token
>), enquanto os campos de uma lista são separados por espaços. Os espaços verdadeiros nos campos da lista são identificados por <token
>\s</token
>.</para>

<para
>O comando termina numa mudança de linha (<token
>\n</token
>).</para>

<para
>O mesmo se aplica às respostas. A resposta no caso de sucesso é <returnvalue
>ok</returnvalue
>, seguida provavelmente da informação desejada. A resposta, em caso de erro, é uma palavra do tipo do 'errno' (&eg; <returnvalue
>perm</returnvalue
>, <returnvalue
>noent</returnvalue
>, &etc;), seguida de uma explicação mais descritiva.</para>

<variablelist>
<title
>Comandos globais:</title>
<varlistentry>
<term
><command
>login</command
> <option
>ecrã</option
> (<parameter
>now</parameter
> | <parameter
>schedule</parameter
>) <parameter
>utilizador</parameter
> <parameter
>senha</parameter
> [argumentos_sessão]</term>
<listitem>
<para
>o utilizador autenticado no ecrã indicado. Se for passado o parâmetro <parameter
>now</parameter
> , a sessão em execução possível é encerrada, caso contrário a autenticação é feita após a saída da sessão. Os argumentos da sessão são formatos com o tipo do 'printf' para o .dmrc. As chaves sem listas irão usar os valores previamente gravados.</para>
</listitem>
</varlistentry>
</variablelist>

<variablelist>
<title
>Comandos por ecrã:</title>
<varlistentry>
<term
><command
>lock</command
></term>
<listitem>
<para
>O ecrã é marcado como bloqueado. Se o &X-Server; estoirar neste estado, não será feita qualquer nova autenticação automática, mesmo que a opção esteja activa.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><command
>unlock</command
></term>
<listitem>
<para
>Inverte o efeito do <command
>lock</command
> e activa de novo a autenticação automática.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><command
>suicide</command
></term>
<listitem>
<para
>A sessão actualmente em execução é terminada de forma forçada. Não será tentada qualquer nova autenticação, embora seja agendado para execução um comando "login".</para>
</listitem>
</varlistentry>
</variablelist>

<variablelist>
<title
>Comandos para todos os 'sockets'</title>
<varlistentry>
<term
><command
>caps</command
></term>
<listitem>
<para
>Devolve uma lista das capacidades deste 'socket':</para>

<variablelist>
<varlistentry>
<term
><returnvalue
>&kdm;</returnvalue
></term>
<listitem>
<para
>identifica o kdm, no caso de algum outro gestor de autenticação implementar também este protocolo</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>list</returnvalue
>, <returnvalue
>lock</returnvalue
>, <returnvalue
>suicide</returnvalue
>, <returnvalue
>login</returnvalue
></term>
<listitem>
<para
>O comando respectivo é suportado</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>bootoptions</returnvalue
></term>
<listitem>
<para
>O comando <command
>listbootoptions</command
> e o <option
>=</option
> para <command
>shutdown</command
> são suportados</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>shutdown &lt;lista&gt;</returnvalue
></term>
<listitem>
<para
>O <command
>shutdown</command
> é suportado e é permitido para os utilizadores indicados (por uma lista separada por vírgulas). O <returnvalue
>*</returnvalue
> corresponde a todos os utilizadores autenticadas.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>nuke &lt;lista&gt;</returnvalue
></term>
<listitem>
<para
>O encerramento forçado da sessão poderá ser efectuado para os utilizadores indicados.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>nuke</returnvalue
></term>
<listitem>
<para
>O encerramento forçado da sessão poderá ser efectuado para todos os utilizadores</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>reserve &lt;número&gt;</returnvalue
></term>
<listitem>
<para
>Os ecrãs de reserva são configurados e o <returnvalue
>número</returnvalue
> fica disponível nesta altura</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>list</command
> [<parameter
>all</parameter
> | <parameter
>alllocal</parameter
>]</term>
<listitem>
<para
>Devolve uma lista com todas as sessões em execução. Por omissão, todas as sessões activas são listadas. Se for indicado o parâmetro <parameter
>all</parameter
>, as sessões passivas também são indicadas. Se for passado o <parameter
>alllocal</parameter
>, as sessões passivas também são listadas, mas as sessões remotas recebidas serão ignoradas.</para>
<para
>Cada item de sessão é uma lista, separada por vírgulas, de:</para>
<itemizedlist>
<listitem
><para
>Nome do ecrã ou TTY</para
></listitem>
<listitem
><para
>Nome do VT para as sessões locais</para
></listitem>
<listitem
><para
>O nome do utilizador ligado, sendo vazio para as sessões passivas e para as sessões remotas para fora (modo de selector local)</para
></listitem>
<listitem
><para
>O tipo de sessão ou <quote
>&lt;remote&gt;</quote
> para as sessões remotas para fora, ou ainda vazio para as sessões passivas.</para
></listitem>
<listitem
><para
>Um campo de Opções:</para>
<itemizedlist
><listitem
><para
><literal
>*</literal
> para o ecrã que pertence ao 'socket' do pedido.</para
></listitem>
<listitem
><para
><literal
>!</literal
> para as sessões que não podem ser terminadas pelo 'socket' do pedido.</para
></listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<para
>Poderão ser adicionados campos novos no futuro.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>reserve</command
> [<parameter
>tempo em segundos</parameter
>]</term>
<listitem>
<para
>Inicia um ecrã de autenticação de reserva. Se ninguém se ligar dentro do período de tempo indicado (um minuto, por omissão), o ecrã é de novo removido. Quando a sessão no ecrã sair, o ecrã é também removido.</para>
<para
>Só é permitido nos 'sockets' dos ecrã locais e no 'socket' global.</para
> 
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>activate</command
> (<parameter
>vt</parameter
>|<parameter
>ecrã</parameter
>)</term>
<listitem>
<para
>Muda para um VT em particular (terminal virtual). O VT pode tanto ser indicado directamente (&eg; <parameter
>vt3</parameter
>) como pelo ecrã que o usa (eg; <parameter
>:2</parameter
>).</para>
<para
>Só é permitido nos 'sockets' dos ecrã locais e no 'socket' global.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>listbootoptions</command
></term>
<listitem>
<para
>Lista as opções de arranque disponíveis.</para>
<!--FIXME: "ok" list default current
    default and current are indices into the list and are -1 if unset or
    undeterminable. -->
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>shutdown</command
> (<parameter
>reboot</parameter
> | <parameter
>halt</parameter
>) [<parameter
>=<replaceable
>bootchoice</replaceable
></parameter
>] (<parameter
>ask</parameter
>|<parameter
>trynow</parameter
>|<parameter
>forcenow</parameter
>|<parameter
>schedule</parameter
>|<parameter
>início (<parameter
>-1</parameter
>|<parameter
>fim (<parameter
>force</parameter
>|<parameter
>forcemy</parameter
>|<parameter
>cancel)</parameter
>)</parameter
>)</parameter
>)</term>
<listitem>
<para
>Faz um pedido de encerramento do sistema, seja um reinício (reboot) ou um encerramento total (halt/poweroff).</para>
<para
>Poderá indicar uma opção do SO para o próximo arranque na lista que é devolvida pelo <command
>listbootoptions</command
></para>
<para
>Os encerramentos pedidos nos 'sockets' por ecrã são executados quando a sessão actual nesse ecrã terminar. Esse pedido poderá despoletar uma janela que peça a confirmação e/ou autenticação</para>
<para
>O <parameter
>início</parameter
> é a hora para a qual o encerramento fica agendado. Se começar por um sinal de mais, a hora actual é adicionada. O zero corresponde à execução imediata.</para>
<para
>O <parameter
>fim</parameter
> é a última hora a que o encerramento deverá ser executado, se existirem sessões activas em execução. Se começar por um sinal de mais, a hora final é adicionada. O -1 corresponde a uma espera infinita. Se ainda não tiver atingido o fim e existirem sessões activas, o &kdm; poderá fazer uma das seguintes coisas:</para>
<itemizedlist>
<listitem
><para
><parameter
>cancel</parameter
> - desiste do encerramento</para
></listitem>
<listitem
><para
><parameter
>force</parameter
> - encerra incondicionalmente</para
></listitem>
<listitem
><para
><parameter
>forcemy</parameter
> - desliga imediatamente, se todas as sessões activas pertencerem ao utilizador que fez o pedido. Apenas para os 'sockets' por ecrã.</para
></listitem>
</itemizedlist>
<para
>O <parameter
>início</parameter
> e o <parameter
>fim</parameter
> são indicados em segundos desde o início da contagem do &UNIX; ('epoch').</para>
<para
>O <parameter
>trynow</parameter
> é um sinónimo para <parameter
>0 0 cancel</parameter
>, o <parameter
>forcenow</parameter
> para <parameter
>0 0 force</parameter
> e o <parameter
>schedule</parameter
> para <parameter
>0 -1</parameter
>.</para>
<para
>O <parameter
>ask</parameter
> tenta um encerramento imediato e interage com o utilizador, se existirem sessões activas. Só para os 'sockets' por ecrã.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>shutdown cancel</command
> [<parameter
>local</parameter
>|<parameter
>global</parameter
>}</term>
<listitem>
<para
>Cancela um encerramento escalonado. O 'socket' global cancela sempre o encerramento pendente, enquanto os 'sockets' por ecrã cancelam por omissão o seu pedido em fila de espera.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>shutdown status</command
></term>
<listitem>
<para
>Devolve uma lista com informações sobre os encerramentos.</para>
<para
>Os itens são uma lista, separada por vírgulas, de:</para>
<itemizedlist>
<listitem>
<para
>(<returnvalue
>global</returnvalue
>|<returnvalue
>local</returnvalue
>) - encerramento pendente vs. em espera. Um item local pode ser devolvido apenas para um 'socket' por ecrã.</para>
</listitem>
<listitem
><para
>(<returnvalue
>halt</returnvalue
>|<returnvalue
>reboot</returnvalue
>)</para
></listitem>
<listitem
><para
>start</para
></listitem>
<listitem
><para
>end</para
></listitem>
<listitem
><para
>("ask"|"force"|"forcemy"|"cancel")</para
></listitem>
<listitem
><para
>O ID numérico do utilizador do utilizador que fez o pedido, sendo -1 para o 'socket' global.</para
></listitem>
<listitem
><para
>A opção de SO do próximo arranque ou "-" para nenhuma.</para
></listitem>
</itemizedlist>
<para
>Poderá adicionar campos novos mais tarde</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<para
>Existem duas formas de usar os 'sockets':</para>
<itemizedlist>
<listitem>
<para
>Ligar-se directamente a eles. A FifoDir é exportada como $<envar
>DM_CONTROL</envar
>; o nome dos 'sockets' por ecrã através do $<envar
>DISPLAY</envar
>.</para>
</listitem>
<listitem>
<para
>Se usar o comando <command
>kdmctl</command
> (&eg;, a partir de um 'shell script'). Tente o <command
>kdmctl</command
> <option
>-h</option
> para descobrir mais.</para>
</listitem>
</itemizedlist>

<para
>Aqui está um programa de exemplo que <quote
>arranca com o FreeBSD</quote
>:</para>

<programlisting
>if kdmctl | grep -q shutdown; then
  IFS=$'\t'
  set -- `kdmctl listbootoptions`
  if [ "$1" = ok ]; then
        fbsd=$(echo "$2" | tr ' ' '\n' | sed -ne 's,\\s, ,g;/freebsd/I{p;q}')
        if [ -n "$fbsd" ]; then
      kdmctl shutdown reboot "=$fbsd" ask &gt; /dev/null
        else
          echo "Arranque para FreeBSD indisponível."
        fi
  else
    echo "Opções de arranque indisponíveis."
  fi
else
  echo "Não é possível reiniciar o sistema."
fi</programlisting>

</sect1>
<!-- Riddell: so there's no GUI you need to edit kdmrc to say UseTheme=true and Theme=/path/to/theme.xml
[13:31] <Riddell
> jriddell.org/programs has an example theme 

<sect1 id="dm-themes">
<title
>Themes</title>

&kdm; has limited support for desktop manager themes.  You may enable them
by adding <userinput
>UseTheme=true</userinput
> to <filename
>kdmrc</filename>
and <userinput
>Theme=/path/to/theme.xml</userinput
>.  
</sect1>
-->
</chapter>

<chapter id="Other-Information">
<title
>Outras fontes de informação</title>

<para
>Dado que o &kdm; descende do &xdm;, a <ulink url="man:xdm"
>página de 'man' do xdm</ulink
> poderá dar mais algumas informações adicionais. Para os problemas relacionados com o X tente ver as páginas do 'man' <ulink url="man:X"
>X</ulink
> e do <ulink url="man:startx"
>startx</ulink
>. Se tiver dúvidas acerca do &kdm; que não sejam respondidas por este manual, tire partido do facto que o &kdm; é distribuído segundo os termos da <abbrev
>&GNU;</abbrev
> Public License: veja o código-fonte. </para>

</chapter>


<chapter id="credits"
><title
>Créditos e Licença</title>

<para
>O &kdm; deriva ou inclui código do &xdm; (C) Keith Packard, MIT X Consortium.</para>

<para
>O &kdm; 0.1 foi criado pelo &Matthias.Ettrich;. As versões posteriores até ao &kde; 2.0.x foram feitas pelo &Steffen.Hansen;. Algumas novas funcionalidades para o &kde; 2.1.x e uma grande reengenharia para o &kde; 2.2.x foi feita pelo &Oswald.Buddenhagen;.</para>

<para
>Todas as partes do código do &kdm; tem o 'copyright' dos autores e estão licenciadas segundo os termos da <ulink url="common/gpl-license.html"
>GPL da &GNU;</ulink
>. Todos os que estiverem interessados, podem alterar o &kdm; e redistribuir o resultado desde que os nomes dos autores sejam mencionados.</para>

<para
>O &kdm; necessita da biblioteca &Qt;, a qual tem o 'copyright' da Troll Tech AS.</para>

<para
>Contributos para a documentação: <itemizedlist>

<listitem
><para
>Documentação escrita por &Steffen.Hansen; <email
>stefh@dit.ou.dk</email
></para
></listitem>

<listitem
><para
>Documentação extendida por Gregor Zumstein<email
>zumstein@ssd.ethz.ch</email
>. Última actualização em 09 de Agosto de 1998</para
></listitem>

<listitem
><para
>Documentação revista para o &kde; 2 por &Neal.Crook; &Neal.Crook.mail;. Última actualização em 06 de Agosto de 2000</para
></listitem>

<listitem
><para
>Documentação extendida e revista para o &kde; 2.2 por &Oswald.Buddenhagen; &Oswald.Buddenhagen.mail;. Última actualização em 30 de Agosto de 2001</para
></listitem>

</itemizedlist
></para>

<para
>A documentação tem o copyright de &Steffen.Hansen;, Gregor Zumstein, &Neal.Crook; e &Oswald.Buddenhagen;. Este documento também inclui grandes partes da página de 'man' do &xdm;, a qual tem o &copy; Keith Packard.</para>
&underFDL; &underGPL; </chapter>

<glossary id="glossary">
<title
>Glossário</title>

<glossentry id="gloss-greeter">
<glossterm
>saudação</glossterm>
<glossdef
><para
>A saudação é a janela de autenticação, &ie; a parte do &kdm; que o utilizador vê.</para>
</glossdef>
</glossentry>

<glossentry>
<glossterm id="gloss-entropy"
>entropia</glossterm>
<glossdef
><para
>A entropia de um sistema é a medida da sua imprevisibilidade. Esta é usada durante a geração de números aleatórios.</para
></glossdef>
</glossentry>

</glossary>
</book>
<!--
Local Variables:
mode: xml
sgml-omittag: nil
sgml-shorttag: t
End:
-->

