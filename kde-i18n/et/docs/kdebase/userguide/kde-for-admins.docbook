<part id="kde-for-administrators">
<partinfo>
<authorgroup>
<author
><personname
> <firstname
>Waldo</firstname
> <surname
>Bastian</surname
> </personname
> <email
>bastian@kde.org</email
> </author>
<othercredit role="reviewer"
>&Philip.Rodrigues; &Philip.Rodrigues.mail; </othercredit>
</authorgroup>
</partinfo>

<title
>&kde; administraatoritele</title>

<chapter id="kde-internals">
<title
>&kde; seestpoolt</title>

<sect1 id="kde-for-admins-overview">
<title
>Ülevaade</title>
<para
>veel kirjutamata</para>
</sect1>

<sect1 id="directory-layout">
<title
>Kataloogistruktuur</title>

<para
>&kde; määratleb failisüsteemi hierarhia, mida kasutab nii &kde; keskkond kui ka kõik &kde; rakendused. Üldiselt salvestab &kde; kõik failid kindla struktuuriga kataloogipuusse. </para>

<para
>Vaikimisi kasutab &kde; kaht kataloogipuud:</para>

<itemizedlist>
<listitem
><para
>Süsteemsel tasandil (näiteks <filename class="directory"
>/opt/kde3</filename
>)</para
></listitem>
<listitem
><para
>Kasutaja tasandil kasutaja kodukataloogis (tavaliselt <filename class="directory"
> ~/.kde</filename
>)</para
></listitem>
</itemizedlist>

<para
>Süsteemiadministraator võib muidugi luua täiendavaid kataloogipuid. Neid saab näiteks kasutada <link linkend="user-profiles"
>profiilideks</link
>.</para>

<informalexample
><para
>&SuSE; &Linux; näiteks kasutab:</para>

<itemizedlist>
<listitem
><para
><filename
class="directory"
>$<envar
>HOME</envar
>/.kde</filename
></para
></listitem>
<listitem
><para
><filename class="directory"
>/opt/kde3</filename
> (see on &SuSE;-le omane, teistes distributsioonides võib see olla <filename class="directory"
>/usr</filename
> või <filename class="directory"
>/usr/kde3</filename
>)</para
></listitem>
<listitem
><para
><filename class="directory"
>/etc/opt/kde3</filename
> (see on &SuSE; lisatud)</para
></listitem>
</itemizedlist>

<para
>Kui oled paigaldanud tööriista KIOSK Admin versiooni 0.7 või uuema, saad kasutatavaid kataloogipuid kontrollida käsuga <userinput
><command
>kiosktool-kdedirs</command
> <option
>--check</option
></userinput
>.</para>
</informalexample>

<para
>&kde; ja &kde; rakendused otsivad faile &kde; kataloogipuid läbi uurides. Seda tehakse kindlas eelistusjärjekorras. Kui fail esineb mitmes kataloogipuus, eelistatakse viimases puus esinevat faili. Tavaliselt eelistatakse kasutaja kodukataloogis asuvat puud. Sellesse kataloogipuusse kirjutatakse ka muudatused.</para>

<informalexample>
<para
>Info leidmiseks &MIME; tüübi <literal
>text/plain</literal
> kohta uuritakse järgmisi faile:</para>

<itemizedlist>
<listitem
><para
><filename
class="directory"
>$<envar
>HOME</envar
>/.kde/share/mimelnk/text/plain.desktop</filename
></para
></listitem>
<listitem
><para
><filename
class="directory"
>/opt/kde3/share/mimelnk/text/plain.desktop</filename
></para
></listitem>
<listitem
><para
><filename
class="directory"
>/etc/opt/kde3/share/mimelnk/text/plain.desktop</filename
></para
></listitem>
</itemizedlist>

<para
>Kui kasutaja midagi muudab, kirjutatakse see faili <filename class="directory"
>$<envar
>HOME</envar
>/.kde/share/mimelnk/text/plain.desktop</filename
></para>
</informalexample>

<para
>Seadistusfailidega on asjad veidi teisiti. Kui kataloogipuudes leitakse mitu sama nimega konfiguratsioonifaili, kombineeritakse nende sisu. Ka siin on oluline kataloogipuude eelistusjärjekord. Kui kaks faili määratlevad ühe ja sama seadistusvõtme erinevalt, siis kasutatakse suurema eelistusega failis leiduvat väärtust.</para>

<informalexample
><para
>Oletame, et on kaks faili järgmise sisuga:</para>
<variablelist>
<varlistentry
><term
><filename
>$<envar
>HOME</envar
>/.kde/share/config/foobar</filename
></term>
<listitem
><programlisting
>Color=red
Shape=circle
</programlisting>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename
>/etc/opt/kde3/share/config/foobar</filename
></term>
<listitem
><programlisting
>Color=blue
Position=10,10
</programlisting>
</listitem>
</varlistentry>
</variablelist>

<para
>Failide sisu ühendatakse, nii et tulemus on selline:</para>

<programlisting
>Color=red
Shape=circle
Position=10,10
</programlisting>

</informalexample>
</sect1>

<sect1 id="specifying-directories">
<title
>Kataloogi määratlemine</title>

<para>

<segmentedlist>
<segtitle
>Keskkonnamuutuja</segtitle>
<segtitle
>Näidisseadistused</segtitle>
<segtitle
>Kommentaar</segtitle>

<seglistitem>
<seg
><envar
>KDEHOME</envar
></seg>
<seg
><filename class="directory"
>~/.kde</filename
></seg>
<seg
></seg>
</seglistitem>

<seglistitem>
<seg
><envar
>KDEROOTHOME</envar
></seg>
<seg
><filename class="directory"
>/root/.kde</filename
></seg>
<seg
>Spetsiaalne muutuja, et administraator ei kirjutaks kasutaja $KDEHOME'i pärast käsu <command
>su</command
> kasutamist.</seg>
</seglistitem>

<seglistitem>
<seg
><envar
>KDEDIR</envar
></seg>
<seg
><filename class="directory"
>/opt/kde3</filename
>, <filename class="directory"
>/usr</filename
>, <filename class="directory"
>/usr/kde3</filename
></seg>
<seg
>Sõltub tootjast. Kasutab &kde; 2. Kui pole määratud, kasutatakse kompileeritud vaikeväärtuseid.</seg>
</seglistitem>

<seglistitem>
<seg
><envar
>KDEDIRS</envar
></seg>
<seg
><filename class="directory"
>/opt/kde3</filename
>, <filename class="directory"
>/usr</filename
>, <filename class="directory"
>/usr/kde3</filename
></seg>
<seg
>Uus &kde; 3-s. Võib olla mitu asukohta kooloniga eraldatult. Kui pole määratud, kasutatakse $<envar
>KDEDIR</envar
>.</seg>
</seglistitem>

</segmentedlist>
</para>
<para
>Neid <emphasis
>ei pea</emphasis
> määrama, väga hästi sobivad ka vaikeväärtused.</para>
<para
>&kde; 2 ja &kde; 3 korraga? Kasuta $<envar
>KDEDIR</envar
> &kde; 2 ja $<envar
>KDEDIRS</envar
> &kde; 3 jaoks.</para>

<informalexample>
<para
>Näiteks ülikoolitöötajal võivad olla sellised seadistused:</para>
<programlisting
>KDEHOME='~/.kde3'
KDEROOTHOME='/root/.kde3'
KDEDIRS='/opt/kde_staff:/opt/kde3'
</programlisting>

</informalexample>

</sect1>

<sect1 id="user-profiles">
<title
>Kasutaja profiilid</title>

<para
>Eeltoodud näites sisaldas <filename class="directory"
>/opt/kde_staff</filename
> töötajatele mõeldud täiendavad seadistusi ja rakendusi. <quote
>Kasutaja profiilid</quote
> võimaldavad seda kataloogi kasutada ainult kindlatel isikutel, mitte aga teistel. Lisa järgmine kirje faili <filename
>/etc/kderc</filename
>:</para>

<programlisting
>[Directories-staff]
prefixes=/opt/kde_staff
</programlisting>

<para
>Sellega luuakse profiil <quote
>staff</quote
>, mis lisab kataloogipuu <filename class="directory"
>/opt/kde_staff</filename
>. (Pane tähele, et &SuSE; &Linux; kasutab <filename
>/etc/kde3rc</filename
>, mitte aga <filename
>/etc/kderc</filename
>.) Nüüd, kus meil on nimega profiil, saame seda omistada konkreetsetele kasutajatele.</para>

<para
>Profiilide seostamiseks kasutajatega tuleb failis <filename
>/etc/kderc</filename
> määrata seosefail:</para>

<programlisting
>[Directories]
userProfileMapFile=/etc/kde-user-profile
</programlisting>

<para
>Nüüd saab profiili omistada kas kasutajanime või &UNIX; grupi järgi, millesse antud kasutaja kuulub.</para
> 

<para
>Profiili "staff" omistamiseks kõigile kasutajale, kes kuuluvad &UNIX; gruppi staff_members, lisa järgmised read faili <filename
>/etc/kde-user-profile</filename
>:</para>

<programlisting
>[General]
groups=staff_members
[Groups]
staff_members=staff
</programlisting>

<para
>Profiili võib omistada ka konkreetsele kasutajale:</para>

<programlisting
>[Users]
bastian=staff
</programlisting>

</sect1>

<sect1 id="directory-layout-revisited">
<title
>Kataloogistruktuuri kokkuvõte</title>

<para
>Igal &kde; kasutataval kataloogipuul on kindel kataloogistruktuur. Teatud puule ebavajalikud või lihtsalt mittekasutatavad kataloogid võib siiski välja jätta. Näiteks ajutiste failide jaoks mõeldud kataloogid leiab tavaliselt ainult kataloogipuus <filename class="directory"
>$<envar
>KDEHOME</envar
></filename
>, mitte aga teistes.</para>

</sect1>

<sect1 id="architecture-specific-directories">
<title
>Arhitektuurispetsiifilised kataloogid</title>

<para
>Arhitektuurist (OS-i ja protsessori tüübist) sõltuvad kataloogid:</para>

<variablelist>
<varlistentry>
<term
><filename class="directory"
>bin</filename
></term>
<listitem
><para
>&kde; käivitatavate failide jaoks.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>lib</filename
></term>
<listitem
><para
>&kde; teekide jaoks.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>lib/kde3</filename
></term>
<listitem
><para
>See kataloog sisaldab komponente, pluginaid ja muid käitusajal laaditavaid objekte, mida kasutavad &kde; 3.<replaceable
>x</replaceable
> rakendused.</para
></listitem
> 
</varlistentry>
</variablelist>

</sect1>

<sect1 id="shared-directories">
<title
>Jagatud kataloogid</title>

<para
>Jagatud kataloogid: ei sõltu arhitektuurist, neid võib kasutada erineva arhitektuuriga.</para>

<variablelist>
<varlistentry>
<term
><filename class="directory"
>share/applnk</filename
></term>
<listitem
><para
>&kde; menüü <literal role="extension"
>.desktop</literal
>-failid (vana)</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/applications</filename
></term>
<listitem
><para
>&kde; menüü <literal role="extension"
>.desktop</literal
>-failid (alates &kde; 3.2)</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/apps</filename
></term>
<listitem
><para
>Sisaldab rakendusespetsiifilisi andmefaile. Igal rakendusel on siin oma alamkataloog, kuhu on salvestatud täiendavad andmefailid.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/config</filename
></term>
<listitem
><para
>Seadistustefailid. Tavaliselt on nende nimeks rakenduse nimi, millele on lisatud tähed <quote
>rc</quote
>. Erijuhtum on <filename
>kdeglobals</filename
>: seda faili kasutavad kõik &kde; rakendused.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename
class="directory"
>share/config/session</filename
></term>
<listitem
><para
>Seda kataloogi kasutatakse seansihalduseks ja see esineb tavaliselt ainult kataloogipuus <filename class="directory"
>$<envar
>KDEHOME</envar
></filename
>. Seansi lõppedes salvestavad &kde; rakendused siia oma oleku. Failinimed koosnevad rakenduse nimest, millele on lisatud arv. Seansihaldur <command
>ksmserver</command
> salvestab nende arvude viited seanssi faili <filename
>ksmserverrc</filename
> salvestades.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/doc/HTML</filename
></term>
<listitem
><para
>Selles kataloogis leidub &kde; rakenduste dokumentatsioon. See on korraldatud keelte ja rakenduste järgi. Tavaliselt on selles kataloogis vähemalt kaks faili: <filename
>index.docbook</filename
> sisaldab dokumentatsiooni vormindamata DocBook-vormingus ning <filename
>index.cache.bz2</filename
> sisaldab sama dokumentatsiooni <command
>bzip2</command
>-tihendusega &HTML;-vormingus. &HTML;-versiooni kasutab &abikeskus;. Kui &HTML;-versioon puudub, regenereerib &abikeskus; selle DocBook-versioonist, kuid see nõuab üsna palju aega.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/icons</filename
></term>
<listitem
><para
>Sellesse kataloogi on salvestatud ikoonid. Need on korraldatud teemade, mõõtmete ja kasutusala järgi.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/mimelnk</filename
></term>
<listitem
><para
>Selles kataloogis on <literal role="extension"
>.desktop</literal
>-failid, mis kirjeldavad &MIME; tüüpe. &kde; kasutab &MIME; tüüpe failitüübi tuvastamiseks.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/services</filename
></term>
<listitem
><para
>Selles kataloogis on <literal role="extension"
>.desktop</literal
>-failid, mis kirjeldavad teenuseid. Teenused on nagu rakendused, kuid tavaliselt käivitavad neid teised rakendused, mitte kasutaja ise. Teenuseid ei ole näha &kde; menüüs.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/servicetypes</filename
></term>
<listitem
><para
>Selles kataloogis on <literal role="extension"
>.desktop</literal
>-failid, mis kirjeldavad teenusetüüpe. Teenusetüüp tähistab tavaliselt teatud programmiliidest. Rakendused ja teenused määravad oma <literal role="extension"
>
>.desktop</literal
>-failides ära teenusetüübid, mida nad pakuvad.</para
> </listitem
></varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/sounds</filename
></term>
<listitem
><para
>Selles kataloogis on helifailid.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/templates</filename
></term>
<listitem
><para
>Selles kataloogis on erinevat tüüpi failide loomiseks mõeldud mallid. Mall koosneb <literal role="extension"
>.desktop</literal
>-failist, mis kirjeldab faili ja sisaldab viidet failile alamkataloogis <filename class="directory"
>.source</filename
>. Selle kataloogi malle näeb alammenüüs <guimenu
>Loo uus</guimenu
> töölaual ning failisirvijas. Kui kasutaja valib menüüst malli, kopeeritakse selle lähtefail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename class="directory"
>share/wallpapers</filename
></term>
<listitem
><para
>Selles kataloogis on pildid, mida saab kasutada taustapildina.</para
></listitem>
</varlistentry>

</variablelist>

</sect1>

<sect1 id="host-specific-directories">
<title
>Masinaspetsiifilised kataloogid</title
> 

<para
>On kolm masinapõhist kataloogi, mis tavaliselt kujutavad endast viita mõnele muule asukohale. Kui neid ei ole veel olemas, luuakse järgmised viidad ja kataloogid utiliidiga <command
>lnusertemp</command
>:</para>

<variablelist>

<varlistentry>
<term
><filename
>$<envar
>KDEHOME</envar
>/socket-$<envar
>MASINANIMI</envar
></filename
></term>
<listitem
><para
>Tavaliselt <filename class="directory"
>/tmp/ksocket-$<envar
>KASUTAJA</envar
>/</filename
>. Seda kasutatakse erinevate &UNIX; soklite jaoks.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename
>$<envar
>KDEHOME</envar
>/tmp-$<envar
>MASINANIMI</envar
></filename
></term>
<listitem
><para
>Tavaliselt <filename class="directory"
>/tmp/kde-$<envar
>KASUTAJA</envar
>/</filename
>. Seda kasutatakse ajutiste failide jaoks.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename
>$<envar
>KDEHOME</envar
>/cache-$<envar
>MASINANIMI</envar
></filename
></term>
<listitem
><para
>Tavaliselt <filename class="directory"
>/var/tmp/kdecache-$<envar
>KASUTAJA</envar
>/</filename
>. Seda kasutatakse puhverdatud failide jaoks.</para>
</listitem>
</varlistentry>
</variablelist>

<para
>Et kataloogides <filename class="directory"
>/tmp</filename
> ja <filename class="directory"
>/var/tmp</filename
> on kõigil kirjutamisõigus, on võimalik, et mõni mainitud kataloogidest on juba olemas, aga selle omanik on mõni teine kasutaja. Sel juhul loob utiliit <command
>lnusertemp</command
> uue kataloogi alternatiivse nime ja lingiga.</para>

</sect1>

<sect1 id="configuration-files">
<title
>Konfiguratsioonifailid</title
> <para
>&kde; kasutab lihtsaid tekstipõhiseid faile kõigi seadistustefailide jaoks. Need koosnevad gruppidesse seatud võtmete ja väärtuste paaridest. Kõik &kde; seadistustefailid kasutavad <acronym
>UTF</acronym
>-8 kodeeringut, mis lubab laiendada <acronym
>ASCII</acronym
> võimalusi.</para>

<para
>Grupi algust tähistab nurksulgudesse seatud grupinimi. Kõik sellele järgnevad võtme-väärtusepaarid kuuluvad antud gruppi. Grupp lõpeb kas uue grupi alguse või faili lõpuga. Kirjed faili alguses, millele ei eelne grupinime, kuuluvad vaikimisi gruppi.</para>

<informalexample
><para
>Järgnev näide toob ära kahest grupist koosneva seadistustefaili. Esimene grupp sisaldab võtmeid <varname
>LargeCursor</varname
> ja <varname
>SingleClick</varname
>, teine grupp võtmeid <varname
>Show hidden files</varname
> ja <varname
>Sort by</varname
>:</para>

<programlisting
>[KDE]
LargeCursor=false
SingleClick=true
</programlisting>

<programlisting
>[KFileDialog Settings]
Show hidden files=false
Sort by=Name
</programlisting>
</informalexample>

<para
>Kirjed grupis koosnevad võrdusmärgiga eristatud võtmest ja väärtusest. Võti võib sisaldada tühikuid ning sellele võivad järgneda nurksulgudesse seatud valikud. Võrdusmärgi järel seisab kirje väärtus. Tühimärke mõlemal pool võrdusmärki ning väärtuse järel eiratakse. Täpsemalt öeldes on vorming järgmine:</para>

<programlisting
><replaceable
>kirje</replaceable
>=<replaceable
>väärtus</replaceable
>
</programlisting>

<para
>Kui väärtus peab sisaldama tühikut alguses või lõpus, tuleb selleks kasutada längkriipsu, millele järgneb <quote
>s</quote
>.</para>

<para
>Längkriipsuga saab veel mitut asja määrata, nimelt: <itemizedlist>
<listitem
><para
><token
>\s</token
> tähistab tühikut</para>
</listitem>
<listitem
><para
><token
>\t</token
> tähistab tabeldusmärki</para>
</listitem>
<listitem
><para
><token
>\r</token
> tagasijooksumärki</para>
</listitem>
<listitem
><para
><token
>\n</token
> tähistab reavahetusmärki (uus rida)</para>
</listitem>
<listitem
><para
><token
>\\</token
> tähistab längkriipsu ennast</para>
</listitem>
</itemizedlist
></para>

<informalexample
><para
>Järgnevas näites algab kirje <varname
>Caption</varname
> väärtus kahe tühikuga, kirje <varname
>Description</varname
> sisaldab aga kolme tekstirida. Ridade eraldamiseks kasutatakse längkriipsu abil esitatavaid reavahetusmärke.</para>

<programlisting
>[Preview Image]
Caption=\s My Caption
Description=This is\na very long\ndescription.
</programlisting>
</informalexample>

<para
>Tühje ridu seadistustefailides eiratakse, samuti ridu, mille alguses seisavad trellid (<quote
>#</quote
>). Viimast kasutatakse enamasti kommentaaride lisamiseks konfiguratsioonifailidesse. Tasub märkida, et kui &kde; rakendus uuendab seadistustefaili, kommentaare <emphasis
>ei säilitata</emphasis
>.</para>

<para
>Erinevate &kde; kataloogipuude alamkataloogis <filename class="directory"
>share/config</filename
> võib olla mitu ühenimelist seadistustefaili. Sel juhul kombineeritakse nende kõigi info võtmehaaval. Kui üks ja sama võti on defineeritud mitmes failis, siis kasutatakse selle faili väärtust, mis seisab eelistusjärjekorras eespool. Kõige ees seisavad alati <filename class="directory"
>$<envar
>KDEHOME</envar
></filename
> seadistustefailid. Kui teatud grupi võti on mitu korda defineeritud ühes ja samas failis, kasutatakse viimase kirje väärtust.</para>

<informalexample>
<para
>Kui <filename
>$<envar
>HOME</envar
>/.kde/share/config/foobar</filename
> sisaldab: <programlisting>
[MyGroup]
Color=red
Shape=circle
</programlisting
> ja <filename
>/etc/opt/kde3/share/config/foobar</filename
> sisaldab <programlisting>
[MyGroup]
Color=blue
Position=10,10
</programlisting
> on tulemus järgmine: <programlisting
>[MyGroup]
Color=red
Shape=circle
Position=10,10
</programlisting>
</para>
</informalexample>

<informalexample>
<para
>Kui <filename
>$<envar
>HOME</envar
>/.kde/share/config/foobar</filename
> sisaldab <programlisting>
[MyGroup]
Color=red
Shape=circle
[MyGroup]
Color=green
</programlisting
> ja <filename
>/opt/kde_staff/share/config/foobar</filename
> sisaldab <programlisting>
[MyGroup]
Color=purple
Position=20,20
</programlisting
> ja <filename
>/etc/opt/kde3/share/config/foobar</filename
> sisaldab <programlisting>
[MyGroup]
Color=blue
Position=10,10
</programlisting
> on tulemus järgmine: <programlisting
>[MyGroup]
Color=green
Shape=circle
Position=20,20
</programlisting>
</para>
</informalexample>

<para
>Et kasutajad ei saaks tühistada vaikeseadistusi, võib need märkida muudetamatuks. Seadistusi saab muuta muudetamatuks ühekaupa, grupiti või ka failiti. Ühe kirje võib lukustada võtme järele <userinput
>[$i]</userinput
> lisades, &eg;: <programlisting
>Color[$i]=blue
</programlisting>
</para>
<para
>Kirjete grupi võib lukustada grupi nime järele <userinput
>[$i]</userinput
> lisades, &eg;: <programlisting
>[MyGroup][$i]
</programlisting>
</para>
<para
>Terve faili lukustamiseks alusta faili eraldi reaga <userinput
>[$i]</userinput
>, &ie;: <programlisting
>[$i]
</programlisting>
</para>

<informalexample>
<para
>Kui <filename
>$<envar
>HOME</envar
>/.kde/share/config/foobar</filename
> sisaldab: <programlisting>
[MyGroup]
Color=red
Shape=circle
</programlisting
> ja <filename
>/etc/opt/kde3/share/config/foobar</filename
> sisaldab: <programlisting>
[MyGroup][$i]
Color=blue
Position=10,10
</programlisting
> on tulemus järgmine: <programlisting
>[MyGroup]
Color=blue
Position=10,10
</programlisting>
</para>
</informalexample>

<informalexample
><para
>Kui <filename
>$<envar
>HOME</envar
>/.kde/share/config/foobar</filename
> sisaldab: <programlisting>
[MyGroup]
Color=red
Shape=circle
</programlisting
> ja <filename
>/opt/kde_staff/share/config/foobar</filename
> sisaldab <programlisting>
[MyGroup]
Color=purple
Shape=rectangle
</programlisting
> ja <filename
>/etc/opt/kde3/share/config/foobar</filename
> sisaldab <programlisting>
[MyGroup][$i]
Color=blue
Position=10,10
</programlisting
> on tulemus järgmine: <programlisting
>[MyGroup]
Color=purple
Shape=rectangle
Position=10,10
</programlisting>
</para>
</informalexample>


<para
>Niinimetatud <quote
>shelli laiendamise</quote
> võimalustega saab määrata märksa dünaamilisemaid vaikeväärtuseid. Sel juhul saab seadistusvõtme väärtuse luua keskkonnamuutuja väärtuse või shellikäsu väljundi põhjal. Seadistuskirjete shelli laiendamise võimaluste kasutamiseks peab võtmele järgnema <token
>[$e]</token
>. Tavaliselt kirjutatakse laiendatud vorm pärast esimest kasutamist kasutaja konfiguratsioonifaili. Selle vältimiseks on soovitatav seadistuskirje lukustada, lisades selleks võtme järele <token
>[$ie]</token
>. Sel juhul ei saa muidugi ka kasutaja seda muuta.</para>

<informalexample>
<para
>Järgnevas näites määratakse kirje <varname
>Host</varname
> väärtus programmi <command
>hostname</command
> väljundi põhjal. Tagamaks seda, et väärtus määratakse alati dünaamiliselt, on seadistus ka lukustatud.</para>

<para
>Kirje <varname
>Email</varname
> väärtus määratakse keskkonnamuutujate $<envar
>USER</envar
> ja $<envar
>HOST</envar
> väärtuste alusel. Kui kasutaja <systemitem class="username"
>jaan</systemitem
> on ennast loginud süsteemi <systemitem class="systemname"
>jaani_masin</systemitem
>, on tulemuseks väärtus <literal
>jaan@jaani_masin</literal
>. See seadistus ei ole lukus.</para>

<programlisting
>[Mail Settings] 
Host[$ie]=$(hostname)
Email[$e]=${USER}@${HOST}
</programlisting>
</informalexample>

<para
>Enamikku seadistuskirjeid saab märgistada keelekoodiga. Sel juhul kasutatakse vajaliku võtme väärtuse leidmiseks keelt, mille kasutaja on oma töölaua jaoks valinud. Kui valitud on vaikimisi keel (Ameerika inglise keel) või valitud keelele pole vastavat indeksit, kasutatakse indeksita võtmekirjet.</para>

<informalexample>
<para
>Järgnevas näiteks sõltub kirje <varname
>Caption</varname
> väärtus keelest. Kui kasutaja on valinud oma keeleks eesti keele (keelekood <literal
>et</literal
>), on kirje väärtus <quote
>Minu pealdis</quote
>. Kõigil muudel juhtudel kasutatakse väärtust <quote
>My Caption</quote
>.</para>

<programlisting
>[Preview Image]
Caption=My Caption
Caption[et]=Minu pealdis
</programlisting>
</informalexample>

<informalexample>
<para
>Järgnevas näiteks sõltub kirje <varname
>Caption</varname
> väärtus keelest. Kui kasutaja on valinud oma keeleks eesti keele (keelekood <literal
>et</literal
>), on kirje väärtus <quote
>Minu pealdis</quote
>. Kõigil muudel juhtudel kasutatakse väärtust <quote
>My Caption</quote
>.</para>

<programlisting
>[Preview Image]
Caption=My Caption
Caption[et]=Minu pealdis
</programlisting>
</informalexample>

<para
>Varasemal ajal ei olnud seadistustefailis esineda võivad kirjed üldjuhul dokumenteeritud. Alates &kde; 3.2 on asi muutunud. Kataloogis <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/config.kcfg</filename
> leiab failid, mis kirjeldavad seadistustefaili võimalikke kirjeid. Neid kasutab võimaluse korral &kde; uus seadistusteredaktor.</para>

<informalexample>
<para
>Toome ühe näite &XML;-konfiguratsioonifaili kohta: <programlisting
><markup>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE kcfg SYSTEM "http://www.kde.org/standards/kcfg/1.0/kcfg.dtd"&gt;
&lt;kcfg&gt;
    &lt;kcfgfile name="korganizerrc"/&gt;
    &lt;group name="General"&gt;
         &lt;entry type="Bool" key="Auto Save"&gt;
             &lt;label&gt;Enable automatic saving of calendar&lt;/label&gt;
             &lt;default&gt;true&lt;/default&gt;
         &lt;/entry&gt;
         &lt;entry type="Int" key="Auto Save Interval"&gt;
             &lt;default&gt;10&lt;/default&gt;
         &lt;/entry&gt;
    &lt;/group&gt;
&lt;/kcfg&gt;
</markup
>
</programlisting>
</para>
<para
>Sellega on võrdväärne: <programlisting
>[General]
Auto Save=false
Auto Save Interval=25
</programlisting>
</para>
</informalexample>

</sect1>

<sect1 id="kde-startup-sequence">
<title
>&kde; käivitamisest</title>

<sect2 id="kdm">
<title
>&kdm;</title>

<para
>Töötab alati administraatori (<systemitem class="username"
>root</systemitem
>) õigustes! Kasutab faile <filename
>$<envar
>KDEDIR</envar
>/share/config/kdmrc</filename
> ja <filename
>/etc/X11/xdm/Xservers</filename
>. Viimases on umbes sellised kirjed:</para>

<programlisting
>:0 local /usr/X11R6/bin/X :0 vt07
</programlisting>

<para
>Asjakohased käivitamisfailid on järgmised: </para>
<simplelist>
<member
>[X-*-Core] sektsioon failis <filename
>kdmrc</filename
> </member>
<member
>Seadistus - <filename
>/etc/X11/xdm/Xsetup</filename
> </member>
<member
>Kasutaja sisestab kasutajanime ja parooli </member>
<member
>Käivitamine - <filename
>/etc/X11/xdm/Xstartup</filename
> - valmistumine administraatori õigustes </member>
<member
>Seanss - <filename
>/etc/X11/xdm/Xsession</filename
> - käivitab seansi kasutaja õigustes </member>
<member
>= KDE seansi korral: <command
>kde</command
> või <command
>startkde</command
> </member>
<member
>= Olemasolu korral <filename
>~/.xsession</filename
> või <filename
>~/.xinitrc</filename
> </member>
<member
>Lähtestamine - <filename
>/etc/X11/xdm/Xreset</filename
> - pärast seansi lõppu </member>
</simplelist>

</sect2>

<sect2 id="startkde">
<title
>&kde; käivitamisskript: <command
>startkde</command
></title>

<para
>&kde; käivitamine algab skriptiga <filename
>startkde</filename
>. Enamasti kutsub selle välja kuvahaldur (&kdm;) pärast kasutaja autentimist. Skriptis <filename
>startkde</filename
> on kaks väga tähtsat rida:</para>

<programlisting
>LD_BIND_NOW=true kdeinit +kcminit +knotify and kwrapper
ksmserver $KDEWM
</programlisting>

<para
>Esimene rida käivitab ülemprotsessi <command
>kdeinit</command
>. Protsessi <command
>kdeinit</command
> kasutatakse kõigi muude kde; protsesside käivitamiseks. Käsu <command
>ps <option
>aux</option
></command
> väljundis näeb seda kujul: <computeroutput
>kdeinit: Running...</computeroutput
>. Argumendid, mida näeb <command
>kdeinit</command
>'i järel, on täiendavalt käivitatavate protsesside nimed. Sümbol <token
>+</token
> tähendab, et <command
>kdeinit</command
> peab ootama, kuni protsess on lõpetanud. <command
>kdeinit</command
> käivitab ka protsessid <command
>dcopserver</command
>, <command
>klauncher</command
> ja <command
>kded</command
>.</para>

<para
>Teine rida annab protsessile <command
>kdeinit</command
> korralduse käivitada seansihalduri protsess <command
>ksmserver</command
>. Seansihaldur määrab seansi eluea. Kui protsess töö lõpetab, logitakse kasutaja välja.</para>

</sect2>
</sect1>

<sect1 id="background-processes">
<title
>Taustaprotsessid</title>

<para
>Kõik &kde; taustaprotsessid on kasutajapõhised: erinevalt süsteemsetest deemonitest ei jagata neid kasutajate vahel. Nad on unikaalsed nii kasutajate järgi kui ka X-serveri kuva järgi. Need protsessid on järgmised:</para>

<variablelist>
<varlistentry>
<term
><command
>dcopserver</command
></term>
<listitem
><para
>Töölaua kommunikatsioon</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>kded</command
></term>
<listitem
><para
>Üldine teenustedeemon.</para>
<para
>Käivitab vajaduse korral <link linkend="ksycoca"
>Sycoca</link
> andmebaasi uuendamise</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>kcminit</command
></term>
<listitem
><para
>Initsialiseerimisteenus</para>
<para
>Täpsemalt räägib sellest <xref linkend="kcminit"/>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>klauncher</command
></term>
<listitem
><para
>Rakenduste käivitaja (see <emphasis
>ei ole</emphasis
> sama, mis <keycombo action="simul"
>&Alt;<keycap
>F2</keycap
> </keycombo
> dialoog!)</para>
<para
>Täpsemalt räägib sellest <xref linkend="klauncher"/>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>knotify</command
></term>
<listitem
><para
>Kasutaja märguanded.</para>
<para
>Täpsemalt räägib sellest <xref linkend="knotify"/>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>ksmserver</command
></term>
<listitem
><para
>Seansihaldus</para>
<para
>Täpsemalt räägib sellest <xref linkend="ksmserver"/>.</para>
</listitem>
</varlistentry>

</variablelist>

<sect2 id="kdeinit">
<title
><command
>kdeinit</command
></title>
<para
>Protsess <command
>kdeinit</command
> käivitab kõik teised &kde; programmid. <command
>kdeinit</command
> võib käivitada nii tavalisi programmide binaarfaile kui ka <command
>kdeinit</command
>'i laaditavaid mooduleid (<acronym
>KLM</acronym
>). <acronym
>KLM</acronym
>-id töötavad samamoodi nagu programmide binaarfailid, kuid neid saab märksa efektiivsemalt käivitada. <acronym
>KLM</acronym
>-id paiknevad kataloogis <filename class="directory"
>$<envar
>KDEDIR</envar
>/lib/kde3</filename
>.</para>

<para
>Miinuseks on see, et sel moel käivitatud programme näitab käskude <command
>top</command
> ja <command
>ps</command
> väljund kui protsessi <computeroutput
><command
>kdeinit</command
></computeroutput
>. Tegeliku programmi nime nägemiseks tuleb seepärast kasutada käsku <command
>top <option
>-c</option
></command
> või <command
>ps <option
>aux</option
></command
>:</para>

<screen
><prompt
>%</prompt
><userinput
><command
>ps <option
>aux</option
></command
></userinput>
<computeroutput>
waba     23184  0.2  2.1 23428 11124 ?        S    21:41   0:00 kdeinit: Running...
waba     23187  0.1  2.1 23200 11124 ?        S    21:41   0:00 kdeinit: dcopserver --nosid
waba     23189  0.2  2.4 25136 12496 ?        S    21:41   0:00 kdeinit: klauncher
waba     23192  0.7  2.8 25596 14772 ?        S    21:41   0:00 kdeinit: kded
waba     23203  0.8  3.4 31516 17892 ?        S    21:41   0:00 kdeinit:
knotify
</computeroutput
>
</screen>

<para
><computeroutput
>kdeinit: Running...</computeroutput
> tähistab ülemprotsessi <command
>kdeinit</command
>. Ülejäänud protsessid on käivitatud <acronym
>KLM</acronym
>-idena.</para>

<para
><command
>kdeinit</command
> käivitab esmakordsel käivitumisel protsessid <command
>dcopserver</command
>, <command
>klauncher</command
> ja <command
>kded</command
>, samuti kõik muud programmid, mis on määratud skriptiga <command
>startkde</command
> (tavaliselt <command
>kcminit</command
> ja <command
>knotify</command
>).</para>

</sect2>

<sect2 id="dcopserver">
<title
><command
>dcopserver</command
></title>

<para
><command
>dcopserver</command
> on deemon, mis tagab kõigile &kde; rakendustele protsessidevahelise kommunikatsiooni (&DCOP;). &DCOP; on iseenesest kasutatav käsureatööriista <command
>dcop</command
> abil. &DCOP; on eluliselt vajalik kõigile &kde; rakendustele.</para>

<para
>Mõned asjakohased failid:</para>

<variablelist>
<varlistentry>
<term
><filename
>$<envar
>HOME</envar
>/.DCOPserver_$<envar
>HOSTNAME</envar
>_$<envar
>DISPLAY</envar
></filename
></term>
<listitem
><para
>&eg; <filename
>.DCOPserver_linux__0</filename
>. Seda kontrollib $<envar
>DCOPAUTHORITY</envar
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename
>/tmp/.ICE-unix/dcop<replaceable
>pid</replaceable
>-<replaceable
>arv</replaceable
></filename
></term>
<listitem
><para
>&eg; <filename
>dcop7634-1069677856</filename
>. See on fail, millele viitab ülaltoodud <filename
>DCOPserver</filename
>-fail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><filename
>$<envar
>HOME</envar
>/.ICEauthority</filename
></term>
<listitem
><para
>Autentimisinfo, mida kontrollib $<envar
>ICEAUTHORITY</envar
>.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="kcminit">
<title
>kcminit</title>

<para
><command
>kcminit</command
> paneb käivitamise ajal tööle initsialiseerimisteenused. Initsialiseerimisteenuseid määratlevad rakenduste või teenuste .desktop-failid real <varname
>X-KDE-Init</varname
>:</para>

<programlisting
>[Desktop Entry]
Encoding=UTF-8
Exec=kcmshell energy
Icon=energy_star
Type=Application
X-KDE-Library=energy
X-KDE-Init=energy
</programlisting>

<para
>Initsialiseerimisteenuseid kasutatatakse üldjuhul riistvara initsialiseerimisel kasutaja määratud seadistuste põhjal.</para>

<para
>Käsuga <userinput
><command
>kcminit <option
>--list</option
></command
></userinput
> saab näha kõiki initsialiseerimisteenuseid ning käsuga <userinput
><command
>kcminit <replaceable
>teenus</replaceable
></command
></userinput
> käivitada konkreetse teenuse. Sellest on abi näiteks käivitamisprobleemide selgitamisel.</para>

</sect2>

<sect2 id="klauncher">
<title
><command
>klauncher</command
></title>

<para
><command
>klauncher</command
> on deemon, mis vastutab &kde; teenuste aktiveerimise eest. See töötab uute protssesside käivitamisel tihedalt käsikäes ülemprotsessiga <command
>kdeinit</command
>. &kde; rakendused suhtlevad uute rakenduste või teenuste käivitamiseks <command
>klauncher</command
>'iga &DCOP;-i vahendusel.</para>

<para
>Hästi on tuntud veateade: <computeroutput
><errortext
> KLauncher could not be reached via DCOP </errortext
></computeroutput
>, mis osutab kas tõsisele probleemile <command
>dcopserver</command
>'iga või <command
>klauncher</command
>'i krahhile.</para>

<para
><command
>klauncher</command
>'i saab taaskäivitada, kui käivitada <command
>kdeinit</command
> uuesti konsooliaknast. Igal juhul tasuks eelnevalt kontrollida, et $<envar
>HOME</envar
>, $<envar
>DISPLAY</envar
> ja mitmesugused muutujad $<envar
>KDEDIR(S)</envar
> on korrektselt määratud!</para>

</sect2>

<sect2 id="knotify">
<title
><command
>knotify</command
></title>

<para
><command
>knotify</command
> põhiülesanne on edastada helimärguanded heliserverile. See pakub ka alternatiivseid märguannete meetodeid.</para>

</sect2>


</sect1>

<sect1 id="ksmserver">
<title
>KSMServer</title>

<para
><command
>ksmserver</command
> on &kde; seansihaldur. Käivitamisel paneb seansihaldur tööle automaatselt käivitatavad rakendused ja taastab eelnenud seansi rakendused. Automaatselt käivitatavaid rakendusi tähistavad <literal role="extension"
>.desktop</literal
>-failid kataloogis <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/autostart</filename
>. Selle, kas rakendus automaatselt käivitada või mitte, saab määrata vastava tingimusega kirje <varname
>X-KDE-autostart-condition</varname
> näol <literal role="extension"
>.desktop</literal
>-failis.</para>

<informalexample>
<para
>Näiteks fail <filename
>ktip.desktop</filename
> sisaldab:</para>

<programlisting
>X-KDE-autostart-condition=ktiprc:TipOfDay:RunOnStart:true
</programlisting>

<para
>See tähendab, et konfiguratsioonifailis <filename
>ktiprc</filename
> kontrollitakse kirje <varname
>RunOnStart</varname
> olemasolu sektsioonis <varname
>[TipOfDay]</varname
>. Kui sellist kirjet pole, võetakse tingimuse väärtuseks 'tõene' (<literal
>true</literal
>), mis tähendab, et <application
>ktip</application
> on üks automaatselt käivitatavaid rakendusi.</para>
</informalexample>

<para
>Mõned rakendused, mida <command
>ksmserver</command
> automaatselt käivitab, on järgmised:</para>

<variablelist>

<varlistentry>
<term
><command
>kdesktop</command
></term>
<listitem
><para
>&kde; töölaud</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>&kicker;</command
></term>
<listitem
><para
>&kde; paneel</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>ktip</command
></term>
<listitem
><para
>Päeva nõuande programm</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>kwrited</command
></term>
<listitem
><para
>Utiliit süsteemi teadete edastamiseks kasutajale</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>&klipper;</term>
<listitem
><para
>Paneelile dokitud lõikepuhvriutiliit</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>kalarm</command
></term>
<listitem
><para
>Eesseisvatest sündmustest ja kohtumistest märku andev utiliit</para>
</listitem>

</varlistentry>
</variablelist>

<para
><command
>kdesktop</command
> käivitab omakorda rakendused, mis leiduvad kataloogis <filename class="directory"
>$<envar
>KDEHOME</envar
>/Autostart</filename
>. <command
>kdesktop</command
> avab automaatselt kõik selles kataloogis leiduvad failid, kaasa arvatud dokumendid, binaarfailid või rakendused <literal role="extension"
>.desktop</literal
>-failide kujul.</para>

<para
>&kde; seansihaldur taastab ka varasema seansi. Seanss koosneb nii rakendustest kui ka rakendustespetsiifilisest infost, mis kajastab rakenduste olekut seansi salvestamise hetkel. Seansid on salvestatud seadistustefaili <filename
>ksmserverrc</filename
>, mis sisaldab viiteid rakendusespetsiifilisele olekuinfole. Viimane on salvestatud kataloogi <filename class="directory"
>$<envar
>KDEHOME</envar
>/share/config/session</filename
>. &kwin;'i olekuinfo sisaldab kõigi rakenduste akende olekuinfot varasemas seansis. </para>

</sect1>

<sect1 id="environment-variables">
<title
>Keskkonnamuutujad</title>

<para
>Mõned olulisemad keskkonnamuutujad, mida &kde; kasutab:</para>

<variablelist>

<varlistentry>
<term
>$<envar
>KDEDIR</envar
></term>
<listitem
><para
>Peab olema määratud, kui ei ole määratud <envar
>KDEDIRS</envar
>, ning viitama &kde; paigalduspuu juurele. Võimaldab &kde;-l leida oma andmeid, näiteks ikoone, menüüsid ja teeke.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDEDIRS</envar
></term>
<listitem
><para
>Tühistab muutuja <envar
>KDEDIR</envar
> ning võimaldab määrata mitu kataloogi, kust &kde; oma andmeid otsib. Abiks, kui tahad paigaldada või pead paigaldama mõned programmid muu prefiksiga kui ülejäänud &kde;.</para
> 
</listitem>
</varlistentry>

<varlistentry
><term
><envar
>$KDEHOME</envar
></term
><listitem
><para
>Kui pole määratud, kasutab &kde; kataloogi <filename class="directory"
>~/.kde</filename
> kataloogina, kuhu salvestada personaalsed andmed.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDEROOTHOME</envar
></term
><listitem
><para
>Kui pole määratud, kasutab &kde; kataloogi <filename class="directory"
>~root/.kde</filename
> kataloogina, kuhu salvestada administraatori (<systemitem class="username"
>root</systemitem
>) personaalsed andmed. See muutuja võeti kasutusele, et &kde; ei kirjutaks kogemata kasutaja andmeid administraatori õigustes üle, kui kasutaja käivitab &kde; programmi pärast programmiga <command
>su</command
> endale administraatori (<systemitem class="username"
>root</systemitem
>) õiguste võtmist.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDEWM</envar
></term
><listitem
><para
>Kui keskkonnamuutuja <envar
>KDEWM</envar
> on määratud, kasutatakse seda &kwin;'i asemel &kde; aknahaldurina <command
>startkde</command
> skriptis.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_LANG</envar
></term
><listitem
><para
>Tühistab &kde; keeleseadistuse, &eg; <userinput
>KDE_LANG=fr kprogram &amp;</userinput
> käivitab programmi prantsuskeelse tõlkega, kui vajalikud failid on paigaldatud.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_MULTIHEAD</envar
></term
><listitem
><para
>Kui anda sellele muutujale väärtuseks <literal
>true</literal
> (tõene), siis tähendab see, et &kde; töötab multihead-süsteemis.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_FORK_SLAVES</envar
></term>
<listitem
><para
>(Alates &kde; 3.2.3) Selle muutuja määramisega saab <acronym
>KIO</acronym
>-moodulid panna lähtuma otseselt rakenduse protsessist. Vaikimisi käivitab <acronym
>KIO</acronym
>-moodulid <command
>klauncher</command
>/<command
>kdeinit</command
>. See on abiks, kui <acronym
>KIO</acronym
>-moodul peab töötama samas keskkonnas rakendusega. Nii on näiteks rakenduse <application
>Clearcase</application
> puhul.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_HOME_READONLY</envar
></term>
<listitem
><para
>Selle muutuja määramisel on kodukataloog ühendatud ainult lugemisõigusega.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_NO_IPV6</envar
></term
><listitem
><para
>(Alates &kde; 3.2.3) Selle muutuja määramisega saab keelata <acronym
>IPv6</acronym
> toetuse ja <acronym
>IPv6</acronym
> <acronym
>DNS</acronym
>-otsingud.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_IS_PRELINKED</envar
></term
><listitem
><para
>(Alates &kde; 3.2) Selle muutuja määramisel on &kde; binaarfailid ja teegid eellingitud. See lülitab protsessi <command
>kdeinit</command
> välja.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_UTF8_FILENAMES</envar
></term
><listitem
><para
>Selle keskkonnamuutuja määramisel eeldab &kde;, et kõik failinimed on sõltumata aktiivsest lokaadist <acronym
>UTF-8</acronym
> kodeeringus.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDE_FULL_SESSION</envar
></term
><listitem
><para
>(Alates &kde; 3.2) See määratakse &kde; käivitumisel automaatselt tõeseks ning kasutatakse &eg; teatamiseks &konqueror;ile, et see peab jääma ka pärast sulgemist mällu juhuks, kui seda edaspidi vaja läheb. Kui muutuja pole määratud, lõpetab &konqueror; pärast sulgemist täielikult oma töö (&eg; &kdesu; teeb seda, see on kasuks ka silumisel).</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDESYCOCA</envar
></term
><listitem
><para
>Võimaldab määrata genereeritud &kde; süsteemse konfiguratsiooni puhvrifaili asukoha ja nime.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDETMP</envar
></term
><listitem
><para
>Võimaldab määrata <filename class="directory"
>/tmp</filename
> asemel muu asukoha, kuhu &kde; salvestab oma ajutisi faile.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>KDEVARTMP</envar
></term
><listitem
><para
>Võimaldab määrata <filename class="directory"
>/var/tmp</filename
> asemel muu asukoha, kuhu &kde; salvestab oma muutuvaid faile.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>XDG_DATA_HOME</envar
></term
><listitem
><para
>(Alates &kde; 3.2) Määrab baaskataloogi, mille suhtes salvestatakse kasutajaspetsiifilised andmefailid. Vaikimisi on <filename class="directory"
>$<envar
>HOME</envar
>/.local/share</filename
>.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>XDG_DATA_DIRS</envar
></term
><listitem
><para
>(Alates &kde; 3.2) Määrab eelistuse järjekorras kataloogid, kust otsitakse andmefaile lisaks <filename class="directory"
>$<envar
>XDG_DATA_HOME</envar
></filename
> baaskataloogile. Vaikimisi <literal
>/usr/local/share/:/usr/share/</literal
>.</para>

<para
>&kde; lisab omalt poolt ka $<envar
>KDEDIRS</envar
> ja profiilide asukohad. Kasutatakse <literal role="extension"
>.desktop</literal
>- ja <literal role="extension"
>.directory</literal
>-menüüfailide jaoks. <literal role="extension"
>.desktop</literal
>-failid on kataloogis <filename class="directory"
>$<envar
>XDG_DATA_DIRS</envar
>/applications</filename
>. <literal role="extension"
>.directory</literal
>.failid on kataloogis $XDG_DATA_DIRS/desktop-directories. </para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>XDG_CONFIG_HOME</envar
></term
><listitem
><para
>(Alates &kde; 3.2) Määrab baaskataloogi, mille suhtes salvestatakse kasutajaspetsiifilised seadistustefailid. Vaikimisi on <filename class="directory"
>$<envar
>HOME</envar
>/.config</filename
>.</para>
</listitem>
</varlistentry>

<varlistentry
><term
>$<envar
>XDG_CONFIG_DIRS</envar
></term
><listitem
><para
>(Alates &kde; 3.2) Määrab eelistuse järjekorras kataloogid, kust otsitakse seadistustefaile lisaks <filename class="directory"
>$<envar
>XDG_CONFIG_HOME</envar
></filename
> baaskataloogile. Vaikimisi <filename class="directory"
>/etc/xdg</filename
>. &kde; lisab omalt poolt ka $<envar
>KDEDIRS</envar
> ja profiilide asukohad. Kasutatakse <literal role="extension"
>.menu</literal
>- kirjelduste jaoks kataloogis <filename class="directory"
>$<envar
>XDG_CONFIG_DIRS</envar
>/menus</filename
>. </para>
</listitem>
</varlistentry>
</variablelist>

</sect1>

<sect1 id="the-kdeinit-mystery">
<title
>kdeinit'i müsteerium</title>

<!-- FIXME: Add more words. Fix markup -->

<para
><command
>kdeinit</command
> käivitab kõik teised &kde; programmid. <command
>kdeinit</command
> võib käivitada nii tavalisi programmide binaarfaile kui ka <command
>kdeinit</command
>'i laaditavaid mooduleid (<acronym
>KLM</acronym
>). <acronym
>KLM</acronym
>-id töötavad samamoodi nagu programmide binaarfailid, kuid neid saab märksa efektiivsemalt käivitada. <acronym
>KLM</acronym
>-id paiknevad kataloogis <filename class="directory"
>$<envar
>KDEDIR</envar
>/lib/kde3</filename
>.</para>

<para
>Miinuseks on see, et sel moel käivitatud programme näitab käskude <command
>top</command
> ja <command
>ps</command
> väljund kui protsessi <computeroutput
><command
>kdeinit</command
></computeroutput
>. Tegeliku programmi nime nägemiseks tuleb seepärast kasutada käsku <command
>top <option
>-c</option
></command
> või <command
>ps <option
>aux</option
></command
>:</para>

<screen
><prompt
>%</prompt
> <userinput
><command
>ps aux | grep bastian</command
></userinput>
<computeroutput>
bastian  26061  0.0  2.2 24284 11492 ?       S    21:27   0:00 kdeinit: Running...
bastian  26064  0.0  2.2 24036 11524 ?       S    21:27   0:00 kdeinit: dcopserver
bastian  26066  0.1  2.5 26056 12988 ?       S    21:27   0:00 kdeinit: klauncher
bastian  26069  0.4  3.2 27356 16744 ?       S    21:27   0:00 kdeinit: kded
bastian  26161  0.2  2.7 25344 14096 ?       S    21:27   0:00 kdeinit: ksmserver
bastian  26179  1.1  3.4 29716 17812 ?       S    21:27   0:00 kdeinit: kicker
bastian  26192  0.4  3.0 26776 15452 ?       S    21:27   0:00 kdeinit: klipper
bastian  26195  1.0  3.5 29200 18368 ?       S    21:27   0:00 kdeinit: kdesktop
</computeroutput
>
</screen>
<para
>Nagu oled vahest märganud, on sel üks kõrvalefekt, mis muudab keeruliseks tappa probleeme tekitavat protsessi:</para>

<screen
><prompt
>%</prompt
> <userinput
><command
>killall kdesktop</command
></userinput>
<computeroutput
>kdesktop: no process killed</computeroutput
></screen>

<para
>Mõistagi on sel juhul ahvatlev kasutada käsku <userinput
><command
>killall kdeinit</command
></userinput
>, aga kõigi kdeinit'i protsesside tapmine tähendab tegelikult kogu &kde; töö lõpetamist. Totaalset hävitamist niisiis!</para>

<para
>Sellest aitab üle kaks lihtsat lahendust:</para>

<screen
><prompt
>%</prompt
> <userinput
><command
>kdekillall kdesktop</command
></userinput>
või vana hea
<prompt
>%</prompt
> <userinput
><command
>kill 26195</command
></userinput
></screen>
<para
><command
>kdekillall</command
> kuulub &kde; <acronym
>SDK</acronym
>-paketi koosseisu.</para>

</sect1>

</chapter>

<chapter id="customizing-kde">
<title
>&kde; kohandamine</title>


<sect1 id="desktop-icons">
<title
>Töölaua ikoonid</title>

<para
>&kde; kasutab mitut laadi ikoone:</para>
<itemizedlist>
<listitem
><para
>Dokumendid</para>
</listitem>
<listitem
><para
>Veebisaitide lingid (<literal role="extension"
>.desktop</literal
>-faili kasutades)</para>
</listitem>
<listitem
><para
>Rakenduste lingid (<literal role="extension"
>.desktop</literal
>-faili kasutades)</para>
</listitem>
<listitem
><para
>Seadmed: kettad, partitsioonid ja välisseadmed: <itemizedlist>
<listitem
><para
>Otseselt <literal role="extension"
>.desktop</literal
>-faili kasutades</para>
</listitem>
<listitem
><para
>Automaatselt IO-mooduli devices:// vahendusel</para>
</listitem>
</itemizedlist>
</para>
</listitem>
<listitem
><para
>Tootjaspetsiifilised (&eg; &SuSE; Minu arvuti)</para>
</listitem>
</itemizedlist>

<sect2 id="desktop-icons-websites">
<title
>Veebileheküljed</title>
<para
>Veebisaitide lingid <literal role="extension"
>.desktop</literal
>-faili kasutades: <menuchoice
><guimenu
>Loo uus</guimenu
><guisubmenu
>Fail</guisubmenu
><guimenuitem
>Viit asukohale (URL)</guimenuitem
></menuchoice
>. Ikooni saab muuta dialoogis <guilabel
>Omadused</guilabel
>. Tulemuseks on <literal role="extension"
>.desktop</literal
>-fail: <programlisting
>[Desktop Entry]
Encoding=UTF-8
Icon=/opt/kde3/share/apps/kdesktop/pics/ksslogo.png
Type=Link
URL=http://www.kde.org/
</programlisting>
</para>
</sect2>

<sect2 id="desktop-icons-applications">
<title
>Rakendused</title>

<para
>Rakenduste lingid <literal role="extension"
>.desktop</literal
>-faili kasutades: <menuchoice
><guimenu
>Loo uus</guimenu
><guisubmenu
>Fail</guisubmenu
><guimenuitem
>Viit rakendusele</guimenuitem
></menuchoice
>. Üksikasjad tuleb ise anda. Lohistamine &kde; menüüst: kas kopeerimine või linkimine (palju lihtsam).</para>

<!-- Perhaps legacy and translated should be the other way around, but -->
<!-- this is how it appears in Waldo's presentation. Need to check -->
<!-- this -->

<programlisting
>[Desktop Entry]<co id="boilerplate"/>
Encoding=UTF-8
GenericName=IRC Client<co id="generic-desc"/>
GenericName[af]=Irc Kli&euml;t
GenericName[de]=IRC Programm
...
GenericName[zu]=Umthengi we IRC<co id="legacy"/>
SwallowExec=<co id="translated"/>
Name=KSirc
Name[af]=Ksirc
Name[de]=KSirc
...
</programlisting>

<calloutlist>
<callout arearefs="boilerplate"
><para
>Trafarett</para>
</callout>
<callout arearefs="generic-desc"
><para
>Tõlgitud üldine kirjeldus, ei kasutata töölaual</para>
</callout>
<callout arearefs="legacy"
><para
>Pärand, võib eemaldada</para>
</callout>
<callout arearefs="translated"
><para
>Tõlgitud nimi, nagu see esineb töölaual</para>
</callout>
</calloutlist>

<para
>Töölaua ikoonid</para>
<programlisting
>...
Name[zu]=Ksirc
MimeType=<co id="co-mimetype"/>
Exec=ksirc %i %m<co id="co-exec"/>
Icon=ksirc<co id="co-icon"/>
TerminalOptions=<co id="co-terminaloptions"/>
Path=<co id="co-path"/>
Type=Application<co id="co-type"/>
Terminal=0<co id="co-terminal"/>
X-KDE-StartupNotify=true<co id="co-x-kde-startupnotify"/>
X-DCOP-ServiceType=Multi<co id="co-x-dcop-servicetype"/>
Categories=Qt;KDE;Network<co id="co-categories"/>
</programlisting>

<calloutlist>
<callout arearefs="co-mimetype"
><para
>Toetatud &MIME; tüübid, ei kasutata töölaual</para>
</callout>
<callout arearefs="co-exec"
><para
>Käivitatav käsurida</para>
</callout>
<callout arearefs="co-icon"
><para
>Ikoon ikooniteemast või täielik asukoht</para>
</callout>
<callout arearefs="co-terminaloptions"
><para
>Kasutatakse ainult terminali vajaduse korral</para>
</callout>
<callout arearefs="co-path"
><para
>Käsu töökataloog</para>
</callout>
<callout arearefs="co-type"
><para
>Veel üks trafarett</para>
</callout>
<callout arearefs="co-terminal"
><para
>Kasuta, kui on vaja terminali</para>
</callout>
<callout arearefs="co-x-kde-startupnotify"
><para
>Spetsiaalse käivitamiskursori näitamine; lülita välja, kui see ei toimi</para>
</callout>
<callout arearefs="co-x-dcop-servicetype"
><para
>Kas rakendus käivitus korralikult? Eemalda, kui ei käivitunud</para>
</callout>
<callout arearefs="co-categories"
><para
>&kde; menüü kategooriad, ei kasutata töölaual</para>
</callout>
</calloutlist>



</sect2>

<sect2 id="desktop-icons-exec">
<title
>Võtme <varname
>Exec</varname
> roll <literal role="extension"
>.desktop</literal
>-failides</title>

<para
>Käsu järele võib lisada mitmeid kohatäitjaid, mis programmi käivitamisel asendatakse tegelike väärtustega: <variablelist>
<varlistentry>
<term
>%f</term
> <listitem
><para
>Üks failinimi; kasutatakse faili kukutamisel ikoonile või failiseostega.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%F</term>
<listitem
><para
>Failide nimekiri; kasutatakse rakenduste korral, mis võivad korraga avada mitu kohalikku faili.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%u</term>
<listitem
><para
>Üks &URL;; kui rakendus suudab ise käsitleda &eg; &FTP; või &HTTP; &URL;-e, vastasel juhul &kde;.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%U</term>
<listitem
><para
>&URL;-ide nimekiri; kõigepealt laaditakse fail alla ja edastatakse kohalik fail rakendusele (!!).</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%d</term>
<listitem
><para
>Avatava faili kataloog; abiks, kui rakendus eeldab muidu faili oma töökataloogis.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%D</term>
<listitem
><para
>Kataloogide nimekiri; pole eriti praktiline.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%i</term
> 
<listitem
><para
>Ikoon; ka <option
>--icon</option
>; &kde; kasutab tegumiribal ikooni, mille määrab rida <varname
>Icon</varname
>=.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%m</term>
<listitem
><para
>Miniikoon; pärand.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>%c</term
> 
<listitem
><para
>Pealdis; ka ka <option
>--caption</option
>; &kde; kasutab tegumiribal nime, mille määrab rida <varname
>Name</varname
>=.</para>
</listitem>
</varlistentry>

</variablelist>
</para>

<informalexample>
<para
>Näited: <segmentedlist>
<segtitle
><varname
>Exec</varname
>-rida</segtitle>
<segtitle
>Käivitatav käsk</segtitle>
<seglistitem
><seg
>ksirc %i</seg
><seg
><command
>ksirc --icon ksirc</command
></seg>
</seglistitem>
<seglistitem
><seg
>cd %d; kedit $(basename %f)</seg
><seg
><command
>cd /tmp; kedit file.txt</command
></seg>
</seglistitem>
</segmentedlist>
</para>
</informalexample>

<!--Dont' know what this refers to: -->
<!--See What's This (Shift-F1) in Properties Dialog-->

</sect2>

<sect2 id="desktop-icons-devices">
<title
>Seadmed</title>
<para
>Seadmete lingid <literal role="extension"
>.desktop</literal
>-faili kasutades: Loo uus -> Viit seadmele </para>
</sect2>

<sect2 id="where-to-define">
<title
>Kus defineerida?</title>

<para
>Töölaua ikoone saab määrata mitmes kohas: <itemizedlist>

<listitem
><para
><filename class="directory"
>~/Desktop</filename
>: kopeeritud asukohast <filename class="directory"
>/etc/skel/Desktop</filename
></para
></listitem>

<listitem
><para
><filename class="directory"
>$<envar
>KDEDIR</envar
>/apps/kdesktop/Desktop</filename
> (ühendatud)</para
></listitem>

<listitem
><para
><filename class="directory"
>$<envar
>KDEDIR</envar
>/apps/kdesktop/DesktopLinks</filename
> (kopeeritud)</para
></listitem>

<listitem
><para
>Seadmete ikoonid (dünaamiliselt ühendatud)</para
></listitem>

<listitem
><para
>Distributsioonispetsiifilised: SUSE Linux kopeerib teatud ikoonid failis startkde.theme asukohast <filename class="directory"
>/opt/kde3/share/config/SuSE/default/</filename
></para
></listitem>

</itemizedlist>
</para>
</sect2>
</sect1>

<sect1 id="kde-menu">
<title
>&kde; menüü</title>

<sect2 id="how-it-works">
<title
>Toimimise põhimõtted</title>

<para
>&kde; 3.2 võttis kasutusele ühtse menüüvormingu (<ulink url="http://freedesktop.org/Standards/menu-spec/"
>http://freedesktop.org/Standards/menu-spec/</ulink
>).</para>
<para
>Enne &kde; 3.2: <itemizedlist>

<listitem
><para
>Kataloogistruktuur asukohas <filename class="directory"
>share/applnk</filename
></para
></listitem>

<listitem
><para
>Kataloogistruktuur tähistab menüüstruktuuri</para
></listitem>

<listitem
><para
>Iga <literal role="extension"
>.desktop</literal
>-fail tähistab üht rakendust</para
></listitem>

</itemizedlist>
</para>

<para
>&kde; 3.2 tingimustes oli struktuuri üsna raske ümber korraldada, mistõttu uus menüüvorming: <itemizedlist>
<listitem
><para
>Määrab struktuuri ühes .menu-failis</para
></listitem>
<listitem
><para
>Tugineb kategooriatele</para
></listitem>
<listitem
><para
>On ühine <acronym
>GNOME</acronym
>-le ja &kde;-le</para
></listitem>
<listitem
><para
>Toetab ka applnk-stiilis menüüsid</para
></listitem>
</itemizedlist>
</para>

<informalexample>
<para
>Näide <filename
>applications.menu</filename
> põhjal: <programlisting
><markup>
        &lt;Menu&gt;
            &lt;Name&gt;Office&lt;/Name&gt;
            &lt;Directory&gt;suse-office.directory&lt;/Directory&gt;
            &lt;Include&gt;
                &lt;Filename&gt;Acrobat Reader.desktop&lt;/Filename&gt;
                &lt;Filename&gt;kde-kpresenter.desktop&lt;/Filename&gt;
                &lt;Filename&gt;kde-kword.desktop&lt;/Filename&gt;
            &lt;/Include&gt;
        &lt;Menu&gt;
</markup
>
</programlisting>
</para>
<para
>Menüükirje 3 rakendusega: <itemizedlist>

<listitem
><para
><filename
>/usr/share/applications/Acrobat Reader.desktop</filename
></para
></listitem>

<listitem
><para
><filename
>/opt/kde3/share/applications/kde/kpresenter.desktop</filename
></para
></listitem>

<listitem
><para
><filename
>/opt/kde3/share/applications/kde/kword.desktop</filename
></para
></listitem>

</itemizedlist>
</para>
</informalexample>
</sect2>

<sect2 id="stored-where">
<title
>Salvestamise asukohad</title>

<para
><literal role="extension"
>.menu</literal
>-failid kirjeldavad menüüstruktuuri. Need on salvestatud kataloogidesse <filename class="directory"
>$<envar
>KDEDIR</envar
>/etc/xdg/menus</filename
> ja <filename class="directory"
>/etc/xdg/menus</filename
>. Sinna on salvestatud süsteemne menüüstruktuur, mida kontrollib $<envar
>XDG_CONFIG_DIRS</envar
>. <filename class="directory"
>$<envar
>HOME</envar
>/.config/menus</filename
> salvestab kasutajate muudatused menüüstruktuuri, seda kontrollib $<envar
>XDG_CONFIG_HOME</envar
>. Täpsemalt räägib sellest <ulink url="http://www.freedesktop.org/Standards/basedir-spec"
>http://www.freedesktop.org/Standards/basedir-spec</ulink
>.</para>

<para
><literal role="extension"
>.desktop</literal
>-failid kirjeldavad rakendusi ja on salvestatud kataloogidesse <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/applications</filename
>, <filename class="directory"
>/usr/share/applications</filename
>, <filename class="directory"
>/usr/local/share/applications</filename
>. Need on süsteemsed rakenduste <literal role="extension"
>.desktop</literal
>-failid, mida kontrollib $<envar
>XDG_DATA_DIRS</envar
>.</para>

<para
><filename class="directory"
>$<envar
>HOME</envar
>/.local/applications</filename
> sisaldab kasutajaspetsiifilisi <literal role="extension"
>.desktop</literal
>-faile ja kasutajaspetsiifilisi muudatusi. Seda kontrollib $<envar
>XDG_DATA_HOME</envar
>. Täpsemalt räägib sellest <ulink url="http://www.freedesktop.org/Standards/basedir-spec"
>http://www.freedesktop.org/Standards/basedir-spec</ulink
>.</para>


<para
><literal role="extension"
>.directory</literal
>-failid kirjeldavad alammenüüsid ja on salvestatud kataloogidesse <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/desktop-directories</filename
>, <filename class="directory"
>/usr/share/desktop-directories</filename
>, <filename class="directory"
>/usr/local/share/desktop-directories</filename
>. Need on süsteemsed menüüde <literal role="extension"
>.directory</literal
>-failid, mida kontrollib $<envar
>XDG_DATA_DIRS</envar
>. Kasutajaspetsiifilised muudatused on salvestatud kataloogi <filename class="directory"
>$<envar
>HOME</envar
>/.local/desktop-directories</filename
>. Neid kontrollib $<envar
>XDG_DATA_HOME</envar
>. Täpsemalt räägib sellest <ulink url="http://www.freedesktop.org/Standards/basedir-spec"
>http://www.freedesktop.org/Standards/basedir-spec</ulink
>.</para>

<informalexample>
<para
>Näide <filename
>applications.menu</filename
> põhjal: <programlisting
><markup>
             &lt;Menu&gt;
                        &lt;Name&gt;Art&lt;/Name&gt;
                        &lt;Directory&gt;suse-edutainment-art.directory&lt;/Directory&gt;
                        &lt;Include&gt;
                                &lt;Category&gt;X-SuSE-Art&lt;/Category&gt;
                        &lt;/Include&gt;
                &lt;/Menu&gt;
</markup
>
</programlisting>
</para>

<para
><literal
>Art</literal
> on menüü sisemine nimi. <filename
>suse-edutainment-art.directory</filename
> määrab menüü nime ja ikooni ning see menüü sisaldab kõiki rakendusi, mille kategooriaks on <literal
>X-SuSE-Art</literal
>, &eg;: <programlisting
>Categories=Qt;KDE;Education;X-SuSE-Art
</programlisting
></para>

<para
><filename
>suse-edutainment-art.directory</filename
> määrab selle menüü nime ja ikooni: <programlisting
>[Desktop Entry]
Name=Art and Culture
Icon=kcmsystem
</programlisting>
</para>
</informalexample>
</sect2>

<sect2 id="common-pitfalls">
<title
>Levinud probleemid</title>

<para
>Rakendusi, mida <emphasis
>ei ole</emphasis
> menüüs, <emphasis
>ei ole</emphasis
> olemas ka teiste rakenduste või failiseoste jaoks: kui eemaldad rakenduse menüüst, eeldab &kde; et sa ei soovi seda kasutada.</para>

<para
>Kui sa ei soovi rakendust menüüs näha, sea nad menüüsse <filename
>.hidden</filename
> või spetsiaalsesse menüüsse võtmega <programlisting>
NoDisplay=true
</programlisting
> <literal role="extension"
>.directory</literal
>-failis</para>
</sect2>

<sect2 id="essential-menus">
<title
>Olulised menüüd</title>

<para
><filename class="directory"
>$<envar
>KDEDIR</envar
>/etc/xdg/menus/applications-merged/</filename
> sisaldab faili <filename
>kde-essential.menu</filename
>, mis sisaldab teatud olulisi menüüsid, mida tavaliselt &kde; menüüs endas ei näidata: <itemizedlist>
<listitem
><para
>Juhtimiskeskusel on peidetud menüü Seadistused, mille sisu määrab <filename
>kde-settings.menu</filename
> ja mille ikooni ja nime määrab <filename
>kde-settings.directory</filename
></para>
</listitem>
<listitem
><para
>Infokeskusel on peidetud menüü Informatsioon, mille sisu määrab <filename
>kde-information.menu</filename
> ja mille ikooni ja nime määrab <filename
>kde-information.directory</filename
></para>
</listitem>

<listitem
><para
>Ekraanisäästjatel on peidetud menüü Süsteem/Ekraanisäästjad, mille sisu määrab <filename
>kde-screensavers.menu</filename
> ja mille ikooni ja nime määrab <filename
>kde-system-screensavers.directory</filename
>. <filename
>$<envar
>KDEDIR</envar
>/share/desktop-directories/kde-system-screensavers.directory</filename
> sisaldab: <programlisting
>NoDisplay=true
</programlisting>
</para>
</listitem>
</itemizedlist
></para>
</sect2>

<sect2 id="old-style-menus">
<title
>Vanas stiilis menüüd</title>

<para
>&kde; toetab endiselt ka vanas stiilis menüüsid, mille puhul kataloogistruktuur on määratud kataloogides <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/applnk</filename
> (süsteemne) ja <filename class="directory"
>$<envar
>HOME</envar
>/.kde/share/applnk</filename
> (kasutajaspetsiifiline). Seda järgitakse juhul, kui <literal role="extension"
>.desktop</literal
>-failis ei ole <varname
>Categories</varname
>= rida. Sel juhul määravad kategooriad asukoha menüüs.</para>
</sect2>

<sect2 id="ksycoca">
<title
><application
>KSycoca</application
></title>
<para
><application
>KSycoca</application
> puhverdab menüüstruktuuri ja info kõigi saadaolevate rakenduste kohta. Andmebaasi saab värskendada programmiga <userinput
><command
>kbuildsycoca</command
></userinput
>. Andmebaasi enda asukoht on <filename class="directory"
>/var/tmp/kdecache-${<envar
>USER</envar
>}/ksycoca</filename
>. Seda uuendab automaatselt <application
>KDED</application
>, seda kontrollitakse &kde; sisselogimise ajal ning seansi ajal jälgib seda <application
>KDED</application
>, </para>

<para
>Muudatuste jälgimise keelamiseks (see võib tekitada probleeme näiteks NFS-i kasutamisel) lisa järgmine rida faili <filename
>kdedrc</filename
>: <programlisting
>[General]
CheckSycoca=false
</programlisting>
</para>

<para
>Regenereerimise pealesundimiseks anna käsk <userinput
><command
>touch $<envar
>KDEDIR</envar
>/share/services/update_ksycoca</command
></userinput
>.</para>

</sect2>

<sect2 id="kmenuedit">
<title
>&kmenuedit;</title>

<para
>&kmenuedit; on mõeldud üksikkasutaja vajaduste rahuldamiseks. Menüüstruktuuri muudatusi salvestab <filename
>~/.config/menus/applications-kmenuedit.menu</filename
>, rakenduste muudatusi <filename class="directory"
>~/.local/share/applications/</filename
> ja alammenüüde (ikoon, nimi) muudatusi <filename class="directory"
>~/.local/share/desktop-directories/</filename
>. KIOSK'i haldur kasutab &kmenuedit;'it ning kopeerib mainitud muudatused profiili- või süsteemsetesse asukohtadesse. </para>

</sect2>

</sect1>

<!-- This section might be redundant. If it isn't, it needs some screenies -->
<sect1 id="kde-panel">
<title
>&kde; paneel</title>

<para
>&kde; paneel kannab ka nime &kicker;. See on modulaarne ja koosneb järgmistest komponentidest: <itemizedlist>
<listitem
><para
>Apletid</para
></listitem>
<listitem
><para
>Rakenduste nupud</para
></listitem>
<listitem
><para
>Spetsiaalsed nupud</para
></listitem>
</itemizedlist>
</para>

<para
>Vaikimisi sisaldab paneel järgmisi aplette: <itemizedlist
> <listitem
><para
>Peiler - näitab virtuaalseid töölaudu</para
></listitem
> <listitem
><para
>Tegumiriba</para
></listitem
> <listitem
><para
>Süsteemne salv</para
></listitem
> <listitem
><para
>Kell</para
></listitem
> </itemizedlist
> ja järgmisi spetsiaalseid nuppe: <itemizedlist>
<listitem
><para
>&kde; menüü</para
></listitem>
<listitem
><para
>Töölaua nupp</para
></listitem>
</itemizedlist>
</para>

<para
>Ruumi korral lisatakse veel mitmeid rakenduste nuppe: <itemizedlist>
<listitem
><para
>Kodu(kataloogi) nupp</para
></listitem>
<listitem
><para
>Brauseri nupp</para
></listitem>
<listitem
><para
>KMaili nupp</para
></listitem>
</itemizedlist>
</para>
</sect1>

<sect1 id="file-associations">
<title
>Failiseosed</title>

<para
>Failiseosed seostavad failitüübi ühe või enama rakendusega. Failitüüp määratakse kindlaks selle &MIME; tüübi põhjal. &MIME; tüübid, mida &kde; tunneb, on salvestatud kataloogi <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/mimelnk</filename
> ning iga rakenduse <literal role="extension"
>.desktop</literal
>-fail sisaldab &MIME; tüüpide nimekirja, mida antud rakendus toetab.</para>

<informalexample>
<para
><filename
>kview.desktop</filename
>: <programlisting
>MimeType=image/gif;image/x-xpm;image/x-xbm;image/jpeg;
image/x-bmp;image/png;image/x-ico;image/x-portable-bitmap;
image/x-portable-pixmap;image/x-portable-greymap;
image/tiff;image/jp2
</programlisting>
</para>

<para
><filename
>kuickshow.desktop</filename
>: <programlisting
>MimeType=image/gif;image/x-xpm;image/x-xbm;image/jpeg;
image/png;image/tiff;image/x-bmp;image/x-psd;image/x-eim;
image/x-portable-bitmap;image/x-portable-pixmap;
image/x-portable-greymap
</programlisting>
</para>

<para
>Mõlemad võivad avada tüübi image/gif. Kumba siis kasutatakse <literal role="extension"
>.gif</literal
>-faili avamisel?</para>

<para
>Suurima eelistusega rakendust! <filename
>kview.desktop</filename
> sisaldab <programlisting>
InitialPreference=3
</programlisting
> aga <filename
>kuickshow.desktop</filename
> sisaldab <programlisting>
InitialPreference=6
</programlisting
> Seepärast avab &kuickshow; <literal role="extension"
>.gif</literal
>-file. </para>

<para
>Kuidas panna &kview; neid vaikimisi avama?</para>

<para
>Kasutaja saab muuta failiseoseid &juhtimiskeskus;es. Muudatused salvestatakse faili <filename
>$<envar
>HOME</envar
>/.kde/share/config/profilerc</filename
>. Sama seadistuse kasutamiseks enam kui ühe kasutaja jaoks tuleb see salvestada kasutaja profiili kataloogi või globaalsesse &kde; konfiguratsioonifailide kataloogi.</para>

</informalexample>

</sect1>

</chapter>

<chapter id="locking-down-kde">
<title
>&kde; lukustamine</title>

<sect1 id="how-it-works-the-basics">
<title
>Toimimise põhialused</title>

<para
>&kde; lukustamisomadused sisaldavad järgmisi olulisemaid võimalusi:</para>

<itemizedlist>
<listitem
><para
><link linkend="immutable-configuration-options"
>Konfiguratsioonivalikute muutmine muudetamatuks</link
></para
></listitem>
<listitem
><para
><link linkend="action-restrictions"
>Teatud toimingute piiramine</link
></para
></listitem>
<listitem
><para
><link linkend="url-restrictions"
>Ligipääsu piiramine teatud &URL;-idele</link
></para
></listitem>
<listitem
><para
><link linkend="configuration-modules"
>Ligipääsu piiramine teatud seadistusmoodulitele</link
></para
></listitem>
</itemizedlist>

</sect1>

<sect1 id="immutable-configuration-options">
<title
>Muudetamatud konfiguratsioonivalikud</title>
<subtitle
>&kde; lukustamine</subtitle>

<para
>Muudetamatud valikud võimaldavad administraatoril määrata vaikeseadistusi, mida kasutaja ei saa muuta.</para>

<para
>Kui konfiguratsioonivalik muudetakse muudetamatuks, ei arvestata enam kasutaja varasemaid määratlusi antud valiku puhul.</para>

<para
>Valikuid saab kontrollida kas kirjete, kirjete gruppide või ka tervete failide kaupa.</para>

<para
>Kui fail või grupp on muudetamatu, on kõik antud faili või grupi võtmed muudetamatud, kaasa arvatud need, mille puhul ei ole administraator vaikeväärtust määranudki.</para>

<note
><para
>Rakendused toetavad muudetamatute valikute kasutamist üsna erinevalt. Ehkki kasutaja ei saa muudetamatuid konfiguratsioonivalikuid püsivalt muuta, on ometi võimalik, et ta näeb siiski kasutajaliideses sellist võimalust.</para
></note>

</sect1>

<sect1 id="action-restrictions">
<title
>Toimingute piirangud</title>

<para
>&kde; rakenduste keskmes seisab toimingute kontseptsioon. Toiminguid saab ette võtta mitmel moel: tavaliselt menüüriba, mõne tööriistariba või kiirklahvi vahendusel. Toiming on näiteks käsk <action
>Salvesta document</action
>. Toimingu sisemist nime teades saab sellele piiranguid seada. Kui toiming on piiratud, ei näe seda enam menüü- või tööriistaribal. Toimingu <action
>Salvesta document</action
> sisemine nimi on <option
>action/file_save</option
>. Lukustamisraamistik pakub ka abstraktsemaid piiranguid, millega saab keelata funktsioone, mis hõlmavad mitut toimingut. Selle näiteks on toimingu <option
>shell_access</option
> piirang, mis keelab igasuguse funktsionaalsuse, mis võimaldaks kasutajal tarvitada &UNIX; shelli.</para>

<example>
<title
>Kasutaja ligipääsu piiramine shellile</title>

<para
>Kasutaja ligipääsu piiramiseks shellile ja seeläbi käsurea võimalustele tuleb piirata toimingut <option
>shell_access</option
>, lisades failile <filename
>kdeglobals</filename
>: </para
> 

<screen
>[KDE Action Restrictions]
shell_access=false</screen>

<para
>Kuna see mõjutab &kde; menüüd ja olemasolevaid rakendusi, tuleb seejärel ette võtta SyCoCa andmebaasi värskendamine:</para>

<screen
><userinput
><command
>touch</command
> <filename
>$<envar
>KDEDIR</envar
>/share/services/update_ksycoca</filename
></userinput
></screen>

<para
>Nüüd logi uuesti &kde;-sse sisse ja kontrolli üle järgmised asjad:</para>

<itemizedlist>
<listitem
><para
>&kmenu;</para
></listitem>
<listitem
><para
>&konqueror;is <menuchoice
><guimenu
>Tööriistad</guimenu
><guimenuitem
>Ava terminal</guimenuitem
></menuchoice
></para
></listitem>
<listitem
><para
>Käsukäivitaja <keycombo action="simul"
>&Alt;<keycap
>F2</keycap
></keycombo
></para
></listitem>
</itemizedlist>
</example>
<para
>Täieliku dokumentatsiooni saadaolevate toimingute kohta toob ära <ulink url="http://www.kde.org/areas/sysadmin/"
>http://www.kde.org/areas/sysadmin/</ulink
>.</para>

<para
>Siinkohal loetleme mõned huvipakkuvamad toimingud:</para>

<variablelist>
<varlistentry>
<term
><option
>action/options_configure</option
></term>
<listitem
><para
>Käsk <guimenuitem
>Seadistamine</guimenuitem
> menüüs <guimenu
>Seadistused</guimenu
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>action/help_report_bug</option
></term>
<listitem
><para
>Käsk <guimenuitem
>Saada vearaport</guimenuitem
> menüüs <guimenu
>Abi</guimenu
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>action/kdesktop_rmb</option
></term>
<listitem
><para
>&HPN;ga töölaual klõpsates avanev menüü.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>action/kicker_rmb</option
></term>
<listitem
><para
>&HPN;ga paneelil klõpsates avanev menüü.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>user/root</option
></term>
<listitem
><para
>Peidab kõik toimingud või rakendused, mis nõuavad administraatori (<systemitem class="username"
>root</systemitem
>) õigusi.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>shell_access</option
></term>
<listitem
><para
>Peidab kõik toimingud ja rakendused, mis võimaldavad ligipääsu shellile.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>print/system</option
></term>
<listitem
><para
>Keelab võimaluse valida trükkimissüsteemi.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>lock_screen</option
></term>
<listitem
><para
>Määrab, kas kasutaja saab ekraani lukustada.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>start_new_session</option
></term>
<listitem
><para
>Määrab, kas kasutaja saab alustada teist X'i seanssi (vaata ka &kdm;)</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>opengl_screensavers</option
></term>
<listitem
><para
>Määrab, kas kasutaja saab kasutada OpenGL ekraanisäästjaid.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><option
>manipulatescreen_screensavers</option
></term>
<listitem
><para
>Lubab ekraanisäästjaid, mis ei peida kogu ekraani.</para
></listitem>
</varlistentry>
</variablelist>

</sect1>

<sect1 id="url-restrictions">
<title
>&URL;-ide piirangud</title>

<para
>&URL;-idele saab kehtestada kolme laadi piiranguid:</para>

<variablelist>
<varlistentry>
<term
>list</term>
<listitem
><para
>Määrab, kas kataloogi on lubatud siseneda.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>open</term>
<listitem
><para
>Määrab, kas teatud &URL;-e tohib avada.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Redirect</term>
<listitem
><para
>Määrab, kas üks &URL; võib avada teise &URL;-i (olgu automaatselt või hüperlingina).</para
></listitem>
</varlistentry>
</variablelist>

<para
>Reegleid kontrollitakse selles järjekorras, milles need on määratud. Viimane reegel, mis &URL;-i kohta kehtib, määrab, kas &URL;-ile pääseb ligi või mitte.</para>

<para
>Järgnevad reeglid keelavad avada http ja https &URL;-e väljaspool <systemitem class="domainname"
>.meiefirma.ee</systemitem
>:</para>

<screenco
><areaspec>
<area id="url_commas" coords="3"/>
<area id="url_rule1" coords="3"/>
<area id="url_rule2" coords="4"/>
</areaspec>
<screen
>[KDE URL Restrictions]
rule_count=2
rule_1=open,,,,http,,,false
rule_2=open,,,,http,*.meiefirma.ee,,true</screen
></screenco>

<calloutlist>
<callout arearefs="url_commas">
<para
>Esimesed neli koma jätavad arvestamata teatud &URL;-i päritolu valikukriteeriumid. Neid läheb vaja ainult ümbersuunamise reeglite puhul.</para
> 
</callout>
<callout arearefs="url_rule1"
><para
><option
>rule_1</option
> keelab igasuguse http või https &URL;-i avamisel</para
></callout>
<callout arearefs="url_rule2"
><para
><option
>rule_2</option
> lubab igasuguse http ja https &URL;-i avamist domeenis <systemitem class="domainname"
>.meiefirma.ee</systemitem
>. Pane tähele, et metamärk <token
>*</token
> on lubatud ainult domeeni alguses.</para
></callout>
</calloutlist>

<para
>Järgmised reeglid määravad, et kasutaja ei saa enam sirvida katalooge kohalikus failisüsteemis, mis asuvad väljaspool tema $<envar
>HOME</envar
> kataloogi:</para>

<screenco
><areaspec>
<area id="home_rule1" coords="3"/>
<area id="home_rule2" coords="4"/>
</areaspec>
<screen
>[KDE URL Restrictions]
rule_count=2
rule_1=list,,,,file,,,false
rule_2=list,,,,file,,$HOME,true</screen
></screenco>

<calloutlist>
<callout arearefs="home_rule1"
><para
><option
>rule_1</option
> keelab sisenemise igasugusesse kohalikku kataloogi</para
></callout>
<callout arearefs="home_rule2"
><para
><option
>rule_2</option
> lubab siseneda kataloogidesse, mis kujutavad endast kasutaja $<envar
>HOME</envar
> kataloogi alamkatalooge.</para
></callout>
</calloutlist>

<para
>$<envar
>HOME</envar
> ja $<envar
>TMP</envar
> on spetsiaalsed väärtused, mis tähistavad kasutaja kodukataloogi ja kasutaja &kde; ajutiste failide kataloogi, &eg; <filename class="directory"
>/tmp/kde-bastian</filename
>.</para>

<para
>Järgmised reeglid määravad, et kasutaja ei saa avada kohalikke faile, mis pole tema $<envar
>HOME</envar
> kataloogis:</para>

<screenco
><areaspec>
<area id="local_rule1" coords="3"/>
<area id="local_rule2" coords="4"/>
<area id="local_rule3" coords="5"/>
</areaspec>
<screen
>[KDE URL Restrictions]
rule_count=3
rule_1=open,,,,file,,,false
rule_2=open,,,,file,,$HOME,true
rule_3=open,,,,file,,$TMP,true</screen
></screenco>

<calloutlist>
<callout arearefs="local_rule1"
><para
><option
>rule_1</option
> keelab igasuguste kohalike failide avamise</para
></callout>
<callout arearefs="local_rule2"
><para
><option
>rule_2</option
> lubab avada kasutajale kuuluvaid faile tema $<envar
>HOME</envar
> kataloogis.</para
></callout>
<callout arearefs="local_rule3"
><para
><option
>rule_3</option
> lubab avada faile kasutaja &kde; ajutiste failide kataloogis. Seda vajavad teatud &kde; rakendused, mis kõigepealt laadivad faili või dokumenti ajutiste failide kataloogi ja alles siis avavad selle rakenduses.</para
></callout>
</calloutlist>


<para
>Ümbersuunamisvalik määra, kas teatud asukoha dokumendid võivad automaatselt või käsitsi hüperlingi abil viidata teatud muule asukohale. Üldise turvalisuse huvides on juba eelnevalt määratud teatud vaikereeglid. Näiteks ei tohi internetis asuvad dokumendid viidata kohalikult salvestatud dokumentidele.</para>

<para
>Kui näiteks soovid anda intranetiserverile <systemitem class="systemname"
>www.minufirma.ee</systemitem
> võimaluse viidata kohalikele failidele, võid lisada järgmise reegli:</para>

<screen
>[KDE URL Restrictions]
rule_count=1
rule_1=redirect,http,www.minufirma.ee,,file,,,true</screen>

<para
>Protokolle pole vaja tingimata nimepidi üles lugeda, neid võib määrata ka tervete rühmadena. Selleks on defineeritud järgmised grupid:</para>

<variablelist>
<varlistentry>
<term
>:local</term>
<listitem
><para
>Protokollid, mis võimaldavad ligipääsu kohalikult salvestatud infole, näiteks file:/, man:/, fonts:/, floppy:/</para
></listitem>
</varlistentry>
<varlistentry>
<term
>:internet</term>
<listitem
><para
>Levinud internetiprotokollid, näiteks http ja ftp</para
></listitem>
</varlistentry>
</variablelist>

<para
>Info protokollide kohta on talletatud <literal role="extension"
>*.protocol</literal
>-failides kataloogis <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/services</filename
>.</para>

<para
>Kirje <option
>Class</option
>= defineerib grupi, kuhu protokoll kuulub: <userinput
><command
>grep</command
> <option
>Class=</option
> <filename
>$<envar
>KDEDIR</envar
>/share/services/*.protocol</filename
></userinput
></para>

<para
>Üldised reeglid:</para>

<itemizedlist>
<listitem
><para
>:local protokollid võivad viidata suvalisele protokollile</para
></listitem>
<listitem
><para
>Alati on lubatud viidata :internet protokollile</para
></listitem>
<listitem
><para
>Mitte kõik protokollid ei kuulu gruppi (näiteks fish:/)</para
></listitem>
</itemizedlist>

</sect1>

<sect1 id="configuration-modules">
<title
>Seadistusmoodulid</title>

<para
>&kde; kasutab seadistusmooduleid &kde; keskkonna mitmesuguste aspektide seadistamiseks. Seadistusmooduleid näeb juhtimiskeskuses, rakenduse seadistusdialoogis või mõlemal pool.</para>

<informalexample>
<para
>Puhverserveri seadistusmoodul on juhtimiskeskuses, kuid kuulub ka &konqueror;i dialoogi <guilabel
>Konquerori seadistamine</guilabel
> koosseisu.</para>

<para
>Konkreetseid seadistusmooduleid saab käivitada käsuga <command
>kcmshell</command
> <replaceable
>moodul</replaceable
></para>

<para
>Puhveserveri mooduli käivitamiseks anna käsk:</para>
<itemizedlist>
<listitem
><para
><command
>kcmshell</command
> <filename
>kde-proxy.desktop</filename
></para
></listitem>
<listitem
><para
><command
>kcmshell</command
> proxy</para
></listitem>
</itemizedlist>

<para
><note
><para
>Mitte kõigil rakendustel pole seadistusmooduleid: sageli on seadistusdialoog rakenduse lahutamatu osa.</para
></note
></para>
</informalexample>

<para
>Rangelt võttes on kõik seadistusmoodulid &kde; menüü elemendid.</para>

<itemizedlist>
<listitem>
<para
>Moodulitel, mida näeb juhtimiskeskuses, on üldjuhul <literal role="extension"
>.desktop</literal
>-fail kataloogis <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/applications/kde</filename
> ning need seab peidetud menüüsse <guimenu
>Settings-Modules</guimenu
> <filename
>kde-settings.menu</filename
> ja on kaasatud failist <filename
>kde-essential.menu</filename
>.</para>
<screen
><userinput
><command
>kbuildsycoca</command
> <option
>--menutest</option
> 2&gt; /dev/null | <command
>grep</command
> Settings-Modules</userinput
></screen>
</listitem>
<listitem>
<para
>Rakendusespetsiifilistel moodulitel on üldjuhul <literal role="extension"
>.desktop</literal
>-fail kataloogis <filename
>$<envar
>KDEDIR</envar
>/share/applnk/.hidden</filename
>, mis vastab peidetud menüüle .hidden ja on kaasatud <markup
>&lt;KDELegacyDirs/&gt;</markup
> tulemusel.</para>
<screen
><userinput
><command
>kbuildsycoca</command
> <option
>--menutest</option
> 2&gt; /dev/null | <command
>grep</command
> .hidden</userinput
></screen>
</listitem>
<listitem
><para
>Alates &kde; 3.3 on juhtimiskeskust võimalik redigeerida rakendusega <application
>kcontroledit</application
>. <application
>kcontroledit</application
> töötab samamoodi nagu <application
>kmenuedit</application
>, muudatused kehtivad ainult aktiivsele kasutajale. Muudatuste kehtestamiseks kõigile kasuta rakendust <application
>kiosktool</application
>.</para
></listitem
> 
</itemizedlist>

<para
>Üksikuid seadistusmooduleid saab keelata, kui lisada järgmine tekst failile <filename
>kdeglobals</filename
>:</para>

<screen
>[KDE Control Module Restrictions]
<replaceable
>mooduli-ID</replaceable
>=false</screen>
<para
>Näiteks puhverserveri mooduli keelamiseks peab see olema selline:</para>
<screen
>[KDE Control Module Restrictions]
kde-proxy.desktop=false</screen>
<para
>Kontrolli juhtimiskeskuses ja dialoogis <guilabel
>Konquerori seadistamine</guilabel
>, ega puhverserveri moodulit enam näha pole.</para>

</sect1>
<!-- 
<sect1 id="making-it-work">
<title
>Making it Work</title>

Making It Work
KDE 3.2: Set $KDEDIRS from startkde script
Distribute profiles to all clients

</para>
</sect1>
-->
</chapter>

<chapter id="the-lazy-admin">
<title
>Mugav administraator</title>

<!-- This section appears to need quite a lot of additional words to -->
<!-- make sense. Perhaps it would be better to comment it out if it -->
<!-- can't be updated before the next release (Phil) -->
<!-- FIXME: Commented it out until it's got some more content fleshing it -->
<!-- out (Lauri)

<sect1 id="lazy-admin-overview">
<title
>Overview</title>

<para>
The Lazy Admin
Overview
Deployment
	How to get &kde; available on many clients
Remote Desktop Sharing
Take a look at someone else desktop
DCOP
	The DCOP command line tool makes it possible to control &kde; applications from the command line
KDialog
	A versatile tool to use standard &kde; dialogs in your own scripts



Deployment
Thin Clients
Installing Software
= AutoYaST
= KickStart
Maintaining Settings
= /etc/kderc, other settings
= Use rsync to copy files around
= Shared filesystem such as NFS
o store profiles themselves on NFS



http://www.suse.de/~nashif/autoinstall/index.html

</para>
</sect1>
-->
<sect1 id="remote-desktop-sharing">
<title
>Töölaua jagamine võrgus</title>

<para
>Töölaua jagamine võrgus lubab kuskil mujal asuvatel kasutajatel näha ja isegi kontrollida aktiivse kasutaja töölauda. Kaugkasutaja peab selleks olema saanud vastava kutse, võimalik on luua ka parooliga kaitstud püsikutseid. See on ideaalne võimalus tugimeeskondadele või administraatoritele kasutada kasutaja töölauda, et aidata tema probleeme lahendada või juhendada teda mingite ülesannete täitmisel</para>

<para
>Töölaua jagamine võrgus käib kahe rakenduse abil: &krfb; (&kde; kaugkaadripuhver, VNC-server) ja &krdc; (&kde; kaugtöölauaühendus; VNC-kclient).</para>

<para
>&krfb;-d võib iga kasutaja tarvitada kutsete loomiseks ja haldamiseks. Kutsega luuakse ühekordne parool, mis lubab kutse saajal ühenduda sinu töölauaga. Vaikimisi kehtib see ainult ühe eduka ühenduse jaoks ning aegub tunni aja pärast, kui seda ei kasutata.</para>

<para
>Sisenevate ühendustega tegeleb KDED kinetd-moodul. Nägemaks, kas see töötab, anna käsk <userinput
><command
>dcop</command
> kded kinetd services</userinput
>. &krfb; ootab vaikimisi ühendusi pordis 5900. Kui saabub sisenev ühendus, ilmub dialoog, mis pärib, kas aktiivne kasutaja soovib seda lubada.</para>

<!-- TODO: Write a bit more here, with a walk through maybe? -->

</sect1>

<sect1 id="kde-diy">
<title
>&kde; oma kätega - iseenda tööriistade loomine</title>

<sect2 id="dcop">
<title
>DCOP</title>

<para
>Töölaua kommunikatsiooni protokoll <acronym
>DCOP</acronym
> (Desktop COmmunication Protocol) on lihtne protsessidevahelise suhtlemise mehhanism. <acronym
>DCOP</acronym
> võimaldab kasutajal suhelda parajasti töötavate programmidega. &kde; pakub kaht programmi <acronym
>DCOP</acronym
>-i kasutamiseks: käsureaprogramm <application
>dcop</application
> ja graafilise kasutajaliidesega <application
>kdcop</application
>. </para>
<para
>Mõned märkused <command
>dcop</command
>'i kasutamise kohta: </para>

<para>
<itemizedlist>
<listitem>
<para
><command
>dcop</command
> [võtmed] [rakendus [objekt [funktsioon [arg1] [arg2] ... ] ] ] </para>
</listitem>
<listitem>
<para
>Rakendused, mis võivad avada korraga enam kui ühe akna, antakse kujul &lt;rakendus&gt;-<acronym
>PID</acronym
> </para>
</listitem>
<listitem>
<para
>Kõik argumendid on tõstutundlikud: setFullScreen ja setfullscreen on erinevad funktsioonid. </para>
</listitem>
<listitem>
<para
>Regulaaravaldise elementi * saab kasutada rakenduse ja objekti argumentides. <screen
><prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> kon*</option
></userinput>
konqueror-16006
konsole-8954
</screen>
</para>
</listitem>

</itemizedlist>

</para>

<para
>Toome mõned näidiskäsud ja nende väljundi: </para>

<informalexample>
<screen
><prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> konsole*</option
></userinput>
konsole-8954
</screen>
<para
>Töötab üks Konsool töötab <acronym
>PID</acronym
>-iga 8954.</para>

<screen
><prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> konsole-8954</option
></userinput>
KBookmarkManager-.../share/apps/kfile/bookmarks.xml
KBookmarkManager-.../share/apps/konqueror/bookmarks.xml
KBookmarkNotifier
KDebug
MainApplication-Interface
konsole (default)
konsole-mainwindow#1
ksycoca
session-1
session-2
session-3
session-4
</screen>
<para
>Siin on näha, et töötab neli seanssi.</para>

<screen
><prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> konsole-8954</option
><option
> konsole</option
></userinput>
QCStringList interfaces()
QCStringList functions()
int sessionCount()
QString currentSession()
QString newSession()
QString newSession(QString type)
QString sessionId(int position)
void activateSession(QString sessionId)
void nextSession()
void prevSession()
void moveSessionLeft()
void moveSessionRight()
bool fullScreen()
void setFullScreen(bool on)
ASYNC reparseConfiguration()
</screen>
<para
>Siin on Konsooli põhiprogrammi võtmed. </para>

<screen
><prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> konsole-8954</option
><option
> session-1</option
></userinput>
QCStringList interfaces()
QCStringList functions()
bool closeSession()
bool sendSignal(int signal)
void clearHistory()
void renameSession(QString name)
QString sessionName()
int sessionPID()
QString schema()
void setSchema(QString schema)
QString encoding()
void setEncoding(QString encoding)
QString keytab()
void setKeytab(QString keyboard)
QSize size()
void setSize(QSize size)
</screen>
<para
>Siin on esimese seansi seesion-1 võtmed.</para>

<screen
><prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> konsole-8954</option
><option
> konsole</option
><option
> setFullScreen</option
><parameter
> true</parameter
></userinput
>
</screen>
<para
>See paneb Konsooli tööle täisekraanirežiimis.</para>

</informalexample>

<para
>Kui rakendusi/objekte on üle ühe, siis millist kasutada? Kuidas viide hankida? </para>
<screen
><prompt
>&percnt; </prompt
><userinput
><command
>echo</command
><option
> $KONSOLE_DCOP</option
></userinput>
DCOPRef(konsole-7547,konsole)

<prompt
>&percnt; </prompt
><userinput
><command
>dcop</command
><option
> $KONSOLE_DCOP</option
><option
> newSession</option
></userinput>
session-6

<prompt
>&percnt; </prompt
><userinput
><command
>dcopstart</command
><option
> konsole</option
></userinput>
konsole-9058


#!/bin/sh
konsole=$(dcopstart konsole-script)
session=$(dcop $konsole konsole currentSession)
dcop $konsole $session renameSession Local

session=$(dcop $konsole konsole newSession)
dcop $konsole $session renameSession Remote

session=$(dcop $konsole konsole newSession)
dcop $konsole $session renameSession Code
dcop $konsole $session sendSession 'cd /minu/töökataloog'

</screen>

</sect2>

<sect2 id="kdialog">
<title
>KDialog</title>
<subtitle
>&kde; oma kätega - iseenda tööriistade loomine</subtitle>

<para
>&kde; dialooge võib tööle panna ka omaenda skriptidega, mis võimaldab ühendada &UNIX; shelli skriptivõimalused &kde; kasutamishõlpsusega.</para>

<screen
><userinput
><command
>kdialog</command
> <option
>--msgbox 'Sulle on uus kiri!'</option
></userinput
></screen>

<screen
><userinput
><command
>kdialog</command
> <option
>--title 'Uus kiri'</option
> <option
>--msgbox 'Sulle on uus kiri!'</option
></userinput
></screen>

<para
><application
>KDialog</application
>'i komponendi võib asendada võtit <option
>--caption</option
> kasutades</para>

<screen
><userinput
><command
>kdialog</command
> <option
>--title 'Uus kiri'</option
> <option
>--msgbox 'Sulle on uus kiri!'</option
> <option
>--dontagain minufail:minuvoti</option
></userinput
></screen>

<para
>Salvestab selle, kas uuesti näidata, faili <filename
>$<envar
>KDEHOME</envar
>/share/config/minufail</filename
>, kirjutades sinna järgmised read:</para>

<screen
>[Notification Messages]
minuvoti=false</screen>

<para
>Võtme <option
>--msgbox</option
> asemel võib vajaduse korral kasutada võtmeid <option
>--sorry</option
> ja <option
>--error</option
>. Näide: <command
>kdialog</command
> <option
>--sorry 'Võrk ei ole kättesaadav'</option
> või <command
>kdialog</command
> <option
>--error 'Postkasti avamine ebaõnnestus'</option
>.</para>

<para
>Samuti võib luua teatekaste, milles saab anda jaatava või eitava vastuse.</para>

<screen
><command
>kdialog</command
> <option
>--yesno 'Kas luua
internetiühendus?'</option
> <command
>echo</command
> <returnvalue
>$?</returnvalue
></screen>

<informaltable>
<tgroup cols="2">
<thead>
<row>
<entry
>Tagastatav väärtus</entry>
<entry
>Tähendus</entry>
</row>
</thead>
<tbody>
<row
><entry
>0</entry
><entry
>Jah, OK, Jätka</entry
></row>
<row
><entry
>1</entry
><entry
>Ei</entry
></row>
<row
><entry
>2</entry
><entry
>Loobu</entry
></row>
</tbody>
</tgroup>
</informaltable>

<para
>Salvesta kindlasti tulemus muutujana, kui sa ei kasuta seda otseselt. Järgmine käsk täidab $? uue väärtusega. Ka siin saab kasutada võtit <option
>--dontagain</option
>, mis jätab meelde kasutaja valiku ning tagastab selle järgmistel kordadel, näitamata enam dialoogi.</para>

<para
>Veel variante:</para>

<variablelist>
<varlistentry>
<term
><option
>--warningyesno</option
></term>
<listitem>
<para
>nagu <option
>--yesno</option
>, aga teistsuguse ikooniga.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><option
>--warningcontinuecancel</option
></term>
<listitem
><para
>Nuppudega <guibutton
>Jätka</guibutton
> ja <guibutton
>Loobu</guibutton
>.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><option
>--warningyesnocancel</option
></term>
<listitem
><para
>Nuppudega <guibutton
>Jah</guibutton
>, <guibutton
>Ei</guibutton
> ja <guibutton
>Loobu</guibutton
>. Näide:</para>
<screen
><command
>kdialog</command
> <option
>--warningyesnocancel 'Kas salvestada
tehtud muudatused?'</option
></screen>
</listitem>
</varlistentry>
</variablelist>

<screen
><command
>kdialog</command
> <option
>--inputbox "Sisesta oma nimi:" "SinuNimi"</option
></screen>

<para
>Tulemus saadetakse standardväljundisse (stdout), et edastada see muutujale, mida saab kasutada kujul <userinput
>name=$(kdialog --inputbox "Sisesta oma nimi:" "SinuNimi")</userinput
>. Viimane argument pole kohustuslik, sellega saab lihtsalt dialoogis väärtuse juba ette anda.</para>

<screen
><userinput
><varname
>password</varname
>=$(<command
>kdialog</command
> <option
>--password "Sisesta parool:"</option
>)</userinput
></screen>

<para
>Võti <option
>--dontagain</option
> ei toimi koos võtmetega <option
>--inputbox</option
> ja <option
>--password</option
>.</para>

<para
>Siin on kaks dialoogi, mis lubavad kasutajal valida nimekirjast:</para>

<variablelist>
<varlistentry>
<term
><option
>--menu</option
></term>
<listitem>
<para
>Kasutaja saab valida nimekirjast ühe elemendi.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><option
>--checklist</option
></term>
<listitem>
<para
>Kasutaja saab valida nimekirjast ühe või enam elemendi.</para>
</listitem>
</varlistentry>
</variablelist>

<screen
><userinput
><varname
>city</varname
>=$(<command
>kdialog</command
> <option
>--menu "Vali linn" a London b Madrid c Pariis d Berliin</option
>)</userinput
></screen>

<para
><varname
>$city</varname
> on <returnvalue
>a</returnvalue
>, <returnvalue
>b</returnvalue
>, <returnvalue
>c</returnvalue
> või <returnvalue
>d</returnvalue
>.</para>

<screen
><userinput
><varname
>city</varname
>=$(<command
>kdialog</command
> <option
>--checklist "Vali linnad" a London off b Madrid on c Pariis on d Berliin off</option
>)</userinput
></screen>

<para
>Madrid ja Pariis on eelnevalt ära valitud. Tulemus valitud Madridi ja Pariisiga on <returnvalue
>"b"</returnvalue
> <returnvalue
>"c"</returnvalue
>.</para>

<para
>Kui lisada võti <option
>--separate-output</option
>, seatakse <returnvalue
>b</returnvalue
> ja <returnvalue
>c</returnvalue
> eraldi ridadele, mis muudab tulemuse töötlemise lihtsamaks.</para>

<screen
>file=$(kdialog --getopenfilename $HOME)
file=$(kdialog --getopenfilename $HOME "*.png *.jpg|Pildifailid")
file=$(kdialog --getsavefilename $HOME/SaveMe.png)
file=$(kdialog --getexistingdirectory $HOME)</screen>

</sect2>

</sect1>

</chapter>
&groupware-with-kontact; </part>

<!-- Keep this comment at the end of the file
Local variables:
mode: xml
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:nil
sgml-general-insert-case:lower
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:0
sgml-indent-data:true
sgml-parent-document:("index.docbook" "book" "part")
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
