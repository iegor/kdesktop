<?xml version="1.0" ?>
<!DOCTYPE book PUBLIC "-//KDE//DTD DocBook XML V4.2-Based Variant V1.1//EN"
"dtd/kdex.dtd" [
  <!ENTITY kappname "&kdm;">
  <!ENTITY package "kdebase">
  <!ENTITY kdmrc "<filename
>kdmrc</filename
>">
  <!ENTITY ksmserver "<application
>ksmserver</application
>">
  <!ENTITY kdesktop "<application
>kdesktop</application
>">
  <!ENTITY XDMCP "<acronym
>XDMCP</acronym
>">
  <!ENTITY xdm "<application
>xdm</application
>">
  <!ENTITY kdmrc-ref SYSTEM "kdmrc-ref.docbook">
  <!ENTITY % addindex "INCLUDE">
  <!ENTITY % Russian "INCLUDE"
> <!-- change language only here -->
]>

<book lang="&language;">
<bookinfo>
<title
>Руководство пользователя &kdm;</title>

<authorgroup>
<author
>&Oswald.Buddenhagen; &Oswald.Buddenhagen.mail; </author
><!-- 
<othercredit role="developer">
&Oswald.Buddenhagen; &Oswald.Buddenhagen.mail;
<contrib
>Developer</contrib>
</othercredit>
<othercredit role="reviewer">
&Lauri.Watts; &Lauri.Watts.mail;
<contrib
>Reviewer</contrib>
</othercredit
> -->

<othercredit role="translator"
><firstname
>Иван</firstname
> <surname
>Кашуков</surname
> <affiliation
><address
><email
>dolphin210@yandex.ru</email
></address
></affiliation
><contrib
>Перевод на русский</contrib
></othercredit
> 

</authorgroup>

<copyright>
<year
>2000</year>
<holder
>&Neal.Crook;</holder>
</copyright>

<copyright>
<year
>2002</year>
<holder
>&Oswald.Buddenhagen;</holder>
</copyright>

<copyright>
<year
>2003</year>
<holder
>&Lauri.Watts;</holder>
</copyright>

<date
>2003-03-01</date>
<releaseinfo
>0.05.02</releaseinfo>

<abstract>
<para
>Этот документ описывает &kdm;, менеджер входа в систему &kde; (также используется термин <quote
>Login Manager</quote
>).</para>
</abstract>

<keywordset>
<keyword
>KDE</keyword>
<keyword
>kdm</keyword>
<keyword
>xdm</keyword>
<keyword
>display manager</keyword>
<keyword
>менеджер входа в систему</keyword>
</keywordset>
</bookinfo>

<!-- ********************************************************************** -->  
<chapter id="introduction">
<title
>Введение</title>

<para
>&kdm; предоставляет возможность входа в систему через графический интерфейс. Система запрашивает логин (имя пользователя) и пароль, опознаёт пользователя и запускает <quote
>сеанс</quote
>. По многим параметрам &kdm; превосходит &xdm;, менеджер входа в систему X-сервера.</para>

</chapter>

<!-- Chapters to write -->
<!-- * Just enough config to get it to run and login to KDE 
     * Adding more session types (GNOME, etc)
     * Adding other customizations to XSession (ssh/gpg-agent, etc)
     * Further customization to KDM (via the kcontrol module, and by 
       hand)
     * XDMCP by query
     * XDMCP by broadcast
     * Sound transparency (if Ade can tell me how!)
     * Document all Keys in the Config File
     * Pull in all options from the KControl Module
     * More resources
-->

<chapter id="quickstart">
<title
>Руководство по быстрому запуску</title>

<para
>В этом руководстве подразумевается, что:</para>

<itemizedlist>
<listitem>
<para
>Система Х-Window настроена и запускается из командной строки по команде <command
>startx</command
>.</para>
</listitem>
<listitem>
<para
>Каждый пользователь использует один оконный менеджер или окружение рабочего стола и не очень часто меняет его, или же умеет редактировать текстовые файлы конфигурации.</para>
</listitem>
</itemizedlist>

<para
>Этот сценарий подходит во многих случаях, если один или несколько пользователей запускают компьютер и входят в предпочитаемую рабочую среду, и при этом не возникает сбоев.</para>

<procedure>
<title
>Установка сеанса по умолчанию</title>
<step>
<para
>Создайте или откройте файл <filename
>~/.xinitrc</filename
></para>
<para
>Если у вас уже есть работающий файл <filename
>~/.xinitrc</filename
>, переходите к следующему шагу.</para>
</step>
<step>
<para
>Добавьте в файл <filename
>~/.xinitrc</filename
> строку, запускающую выбранный вами оконный менеджер или среду, если такой строки там нет.</para>
<para
>Если вы используете &kde;, введите:</para>
<screen
><userinput
>startkde</userinput
></screen>
<para
>Что касается других оконных менеджеров или сред &mdash; ищите аналогичную команду в их документации.</para>
</step>
<step
><para
>Создайте ссылку с помощью команды</para>
<screen
><userinput
><command
>ln</command
> <option
>-s</option
> <parameter
>~/.xinitrc ~/.xsession</parameter
></userinput
></screen>
</step>
</procedure>

<para
>Теперь при вводе в командной строке команды <userinput
><command
>startx</command
></userinput
>система будет запускать X-Window с сеансом &kde;. Далее попытайтесь настроить систему на запуск &kdm;.</para>

<para
>Войдите в систему как <systemitem class="username"
>root</systemitem
> и введите в командной строке <userinput
><command
>kdm</command
></userinput
>.</para>

<para
>Вы увидите окно входа в систему, более полно описанное в разделе <xref linkend="login"/>.</para>

<para
>Теперь при успешном входе пользователя в систему через kdm с выбранным сеансом по умолчанию будет запускаться &kde;.</para>

<para
>Если вы хотите настроить другие учётные записи, повторите эту процедуру для каждой из них.</para>

<note>
<para
>Это руководство по быстрому запуску затрагивает только установку и запуск. Если вы хотите более полно настроить &kdm;, например, чтобы в окне входа в систему не отображались имена пользователей, чтобы система предоставляла возможность выбора различных типов сеансов и так далее, то читайте это руководство дальше.</para>
</note>

</chapter>

<chapter id="login"
> 
<title
>Окно входа в систему</title
> 

<para
>Интерфейс &kdm; включает два диалоговых окна. Компоненты основного окна:</para>

<itemizedlist
> 
<listitem>
<para
>Поле <guilabel
>Имя пользователя</guilabel
> для ввода имени пользователя.</para>
</listitem>

<listitem>
<para
>Поле <guilabel
>Пароль</guilabel
> для ввода пароля.</para>
</listitem>

<listitem>
<para
>Программа также может выводить логотип каждого пользователя, например, фотографию. Вместо того, чтобы вводить <guilabel
>имя пользователя</guilabel
>, можно просто щёлкнуть по соответствующему логотипу (это свойство присуще окну входа в систему &IRIX;).</para
> 
</listitem>

<listitem>
<para
>Выпадающий список <guilabel
>Меню</guilabel
> используется для запуска сеансов других менеджеров окон и рабочих сред, имеющихся в системе.</para>
</listitem>

<listitem>
<para
>Область окна справа от полей <guilabel
>Имя пользователя:</guilabel
>, <guilabel
>Пароль:</guilabel
> и <guilabel
>Тип сеанса: </guilabel
> может быть использована для показа какого-либо изображения или аналоговых часов.</para>
</listitem>

<listitem>
<para
>По нажатию на кнопку <guibutton
>Войти</guibutton
> система проверяет имя пользователя и пароль и при отсутствии ошибок запускает сеанс выбранного типа.</para>
</listitem>

<listitem>
<para
>По нажатию на кнопку <guibutton
>Очистить</guibutton
> система удаляет текст из полей <guilabel
>Имя пользователя</guilabel
> и <guilabel
>Пароль</guilabel
>.</para>
</listitem
> 

<listitem>
<para
>Кнопка <guibutton
>Меню</guibutton
> открывает меню со следующими пунктами:</para>
 
<itemizedlist>
<listitem>
<para
>Команда <guimenuitem
>Перезапустить Х-сервер</guimenuitem
> останавливает X-сервер и запускает вновь. Команда применима к локальным дисплеям.</para>
</listitem>

<listitem>
<para
>Команда <guimenuitem
>Закрыть соединение</guimenuitem
> (не удалённых дисплеях) закрывает текущее соединение с сервером &XDMCP;. Если соединение было установлено с помощью программы выбора хоста, управление будет возвращено этой программе. В противном случае это действие приведёт к сбросу X-сервера и повторному выводу диалога регистрации пользователя. Команда применима только к удалённым дисплеям.</para>
</listitem>

<listitem>
<para
>На локальных мониторах пункт <guimenuitem
>Консольный вход</guimenuitem
> (может отсутствовать), при выборе которого система останавливает запущенный Х-сервер и переходит в текстовый режим входа в систему. Если за некоторое время вход не был осуществлён, будет вновь выведено графическое окно входа в систему. Чтобы использовать эту возможность, вам надо использовать синтаксис local@&lt;console&gt; в файле <filename
>Xservers</filename
> (см. комментарии в этом файле).</para>
</listitem>
</itemizedlist>
</listitem>

<listitem>
<para
>Кнопка <guibutton
>Завершение работы...</guibutton
> открывает диалог <guibutton
>Выключение</guibutton
>. Может отсутствовать.</para>
</listitem>
</itemizedlist>

<para
>Диалоговое окно <guilabel
>Выключить</guilabel
> предоставляет набор переключателей, позволяющих выбрать один из следующих вариантов:</para>

<variablelist>
<varlistentry>
<term
>Выключить</term
> 
<listitem>
<para
>Выключить систему.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Перезапустить</term>
<listitem>
<para
>Завершает работу системы и перезагружает компьютер. Если в системе используется загрузчик <application
>Lilo</application
>, в выпадающем списке можно будет выбрать ядро операционной системы, которое будет использовано во время перезагрузки.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Перезапустить Х-сервер</term
> 
<listitem>
<para
>Остановить и снова запустить Х-сервер. Обычно вам следует использовать этот параметр, если вы перед этим изменили конфигурацию Х11.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Консольный режим</term>
<listitem>
<para
>Останавливает Х-сервер и возвращает консольный режим с помощью перевода системы на уровень выполнения 3. Обычно это делается перед обновлением или перенастройкой X11.</para
> 
</listitem>
</varlistentry>
</variablelist>

<para
>По нажатию соответствующей кнопки система выполняет выбранное действие, по нажатию кнопки <guibutton
>Отмена</guibutton
> вы возвращаетесь в основное диалоговое окно &kdm;. </para>

</chapter>

<!-- *********************************************************************** -->
<chapter id="configuring-kdm">
<title
>Настройка &kdm;</title>

<para
>В этой главе предполагается, что &kdm; в вашей системе уже установлен, и вы просто хотите более тонко настроить его.</para>

<para
>При запуске &kdm; считывает настройки из папки <filename class="directory"
>$KDEDIR/share/config/kdm/</filename
> (возможно, в вашей системе это <filename class="directory"
>/etc/kde3/kdm/</filename
> или <filename class="directory"
>/etc/X11/kde3/kdm/</filename
> или другая папка).</para>

<para
>Основной конфигурационный файл - &kdmrc;, он содержит ссылки на остальные файлы, которые могут находиться где угодно в системе, причём обычно это не вызывает проблем. Единственное исключение - ссылки на конфигурационные файлы уже установленного &xdm;. При установке &kdm; использует их, если находит уже установленный &xdm;.</para>

<para
>&kdm; запускается перед входом в систему любого пользователя, он не связан с каким-либо одним пользователем. Поэтому невозможно иметь отдельные конфигурационные файлы для каждого пользователя, для всех используется один общий файл &kdmrc;. Конфигурация &kdm; может быть изменена только пользователями, имеющими права записи в файл <filename
>$<envar
>KDEDIR</envar
>/share/config/kdm/kdmrc</filename
> (обычно это системные администраторы, входящие в систему под пользователем <systemitem class="username"
>root</systemitem
>).</para>

<para
>Настройка &kdm; осуществляется изменением файла &kdmrc; или через модуль Центра управления KDE (раздел <menuchoice
><guisubmenu
>Системное администрирование</guisubmenu
><guimenuitem
>Менеджер входа в систему</guimenuitem
></menuchoice
>).  См. <ulink url="help:/kcontrol/login-manager.html"
>справку Центра управления KDE</ulink
>. </para>

<para
>Оставшаяся часть данной главы посвящена настройке &kdm; с помощью модуля Центра управления KDE. Для настройки локального входа в систему его возможностей достаточно. <link linkend="kdm-files"
>Следующая глава</link
> описывает параметры файла &kdmrc;. Прямое редактирование этого файла требуется для настройки удалённого входа или нескольких сеансов &kdm; одновременно.</para>

<sect1 id="kdm-kcontrol-module">
<sect1info>
<authorgroup>
<author
>&Thomas.Tanghus; &Thomas.Tanghus.mail;</author>
<author
>&Steffen.Hansen; &Steffen.Hansen.mail;</author>
<author
>&Mike.McBride; &Mike.McBride.mail;</author>
</authorgroup>
</sect1info>

<title
>Модуль «Менеджер входа в систему» Центра управления KDE</title>

<para
>В этом модуле вы можете настроить различные параметры &kdm;, менеджера входа в систему &kde;, а именно: его внешний вид, список пользователей, которым разрешается входить в систему, и пользователей, которым разрешается выключать компьютер.</para>

<note
><para
>Все параметры сохраняются в файле &kdmrc;. Оригинальный файл содержит много комментариев, поясняющих назначение параметров. Использование данного модуля приводит к их потере. Поэтому дополнительно допустимые параметры &kdmrc; описаны в <xref linkend="kdm-files"/>.</para>

<para
>Все параметры, перечисленные в этой главе, связаны с соответствующими параметрами в &kdmrc;. Все параметры, доступные в Центре управления, напрямую доступны в &kdmrc;, но не наоборот.</para
></note>

<para
>Этот модуль делится на несколько разделов: <link linkend="kdmconfig-appearance"
><guilabel
>Внешний вид</guilabel
></link
>, <link linkend="kdmconfig-font"
><guilabel
>Шрифт</guilabel
></link
>, <link linkend="kdmconfig-background"
><guilabel
>Фон</guilabel
></link
>, <link linkend="kdmconfig-shutdown"
><guilabel
>Выключение</guilabel
></link
><link linkend="kdmconfig-users"
><guilabel
>Пользователи</guilabel
></link
> и <link linkend="kdmconfig-convenience"
><guilabel
>Удобства</guilabel
></link
>.</para>

<para
>Вы можете переключаться между разделами, используя вкладки вверху окна.</para>

<note
><para
>Работа с Центром управления &kde; требует дополнительных полномочий. В случае их отсутствия нужно нажать кнопку <guibutton
>Режим администратора...</guibutton
> и ввести пароль администратора.</para
></note>

<sect2 id="kdmconfig-appearance">
<title
>Внешний вид</title>

<para
>Здесь вы можете настроить внешний вид &kdm; — графического менеджера входа в систему из &kde;.</para>

<para
><guilabel
>Приглашение</guilabel
> - это заголовок окна входа в систему. Использование приглашения особенно удобно, если пользователи могут входить в несколько систем. Вы можете употреблять различные заполнители (комбинации символов, которые программа заменит некоторым значением). Они описаны в файле &kdmrc;, в комментариях к параметру <link linkend="option-greetstring"
><option
>GreetString</option
></link
>. </para>

<para
>При входе пользователя система может показывать в окне входа текущее время, логотип или не показывать ничего. Сделайте выбор с помощью переключателей <guilabel
>Область расположения логотипа</guilabel
>. Это соответствует параметру <link linkend="option-logoarea"
><option
>LogoArea</option
></link
> в &kdmrc;.</para>

<para
>Если вы выбрали <guilabel
>Показать логотип</guilabel
>, вы можете указать изображение:</para>

<itemizedlist>
<listitem>
<para
>Перетащите файл изображения на кнопку логотипа.</para>
</listitem>
<listitem>
<para
>Нажмите на кнопку и выберите изображение с помощью диалогового окна.</para>
</listitem>
</itemizedlist>

<para
>По умолчанию выводится изображение <filename
>$<envar
>KDEDIR</envar
>/share/apps/kdm/pics/kdelogo.xpm</filename
>.</para>

<para
>Параметры группы <guilabel
>Позиция:</guilabel
> определяют положение окна входа в систему на экране. Параметр <guilabel
>X:</guilabel
> — горизонтальная составляющая, <guilabel
>Y:</guilabel
> — вертикальная. Положение задаётся для центра окна входа в процентах от размера экрана относительно левого верхнего угла. Эта группа соответствует параметру <link linkend="option-greeterpos"
><option
>GreeterPos</option
></link
> файла &kdmrc;.</para>

<para
>Стиль &kdm; можно настроить через параметры <guilabel
>Стиль GUI</guilabel
> и <guilabel
>Цветовая схема:</guilabel
>. Они соответствуют параметрам <link linkend="option-guistyle"
><option
>GUI Style</option
></link
> и <link linkend="option-colorscheme"
><option
>ColorScheme</option
></link
> в &kdmrc; соответственно.</para>

<para
>Ниже находится выпадающий список для выбора языка диалога входа. Он соответствует параметру <option
>Language</option
> файла &kdmrc;.</para>

</sect2>

<sect2 id="kdmconfig-font">
<title
>Шрифт</title>

<para
>Здесь вы можете выбрать шрифты, которые будут использоваться в окне входа в систему. Для этого могут быть использованы только общедоступные шрифты.</para>

<para
>Данным выпадающим списком настраиваются три стиля шрифта: <guilabel
>Общий:</guilabel
>, <guilabel
>Ошибки:</guilabel
>, <guilabel
>Приглашение:</guilabel
>. Кнопка <guibutton
>Выбрать...</guibutton
> открывает диалог выбора шрифта.</para>

<itemizedlist>
<listitem>
<para
>Шрифт <guilabel
>Общий</guilabel
> используется во всех случаях, кроме указанных ниже.</para>
</listitem>
<listitem>
<para
>Шрифт <guilabel
>Ошибки</guilabel
> используется, если вход в систему завершился неудачно.</para>
</listitem>
<listitem>
<para
>Шрифт <guilabel
>Приглашение</guilabel
> используется в заголовке окна (строка приглашения).</para>
</listitem>
</itemizedlist>

<para
>Флажок <guilabel
>Использовать сглаживание шрифтов</guilabel
> включает/выключает режим сглаживания шрифтов.</para>

</sect2>

<sect2 id="kdmconfig-background">
<title
>Фон</title>

<para
>Здесь можно изменить фон рабочего стола, который будет показываться при входе пользователя в систему. В качестве фона можно использовать сплошную заливку цветом или изображение. Если вы установите изображение и расположите его в центре экрана, выбранный цвет фона будет занимать свободную площадь.</para>

<para
>На вкладке <guilabel
>Фон</guilabel
> вы можете выбрать фоновое изображение, настроить цвета фона и указать используемый эффект.</para>

<para
>Чтобы изменить цвета фона по умолчанию, нажмите любую из кнопок цвета и выберите новый цвет.</para>

<para
>Выпадающий список над этими кнопками содержит несколько вариантов смешивания цветов (результат выбора показывается на изображении монитора в верхней части окна):</para>

<variablelist>
<varlistentry>
<term
>Один цвет</term>
<listitem
><para
>В этом режиме весь фон будет залит цветом, указанным с помощью кнопки <guibutton
>Основной цвет фона</guibutton
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Узор</term>
<listitem
><para
>Чтобы использовать этот режим, вам надо выбрать два цвета (используя кнопки выбора основного и вторичного цвета). </para
> <para
>Выберите узор в выпадающем списке и нажмите <guilabel
>Применить</guilabel
>. &kde; установит выбранный узор, раскрашенный цветами, которые вы выбрали. Чтобы добавить другие узоры, смотрите главу <ulink url="help:/kcontrol/background/index.html#bkgnd-patterns"
>Добавление, удаление и изменение узоров и обоев</ulink
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Фоновая программа</term>
<listitem
><para
>Если вы включите этот флажок, &kde; будет использовать внешнюю программу для создания фона. Это может быть любая программа на ваш выбор. Для получения информации по этой возможности смотрите главу <ulink url="help:/ kcontrol/background/index.html#bkgnd-programs"
>Использование внешней программы</ulink
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Горизонтальный градиент</term>
<listitem
><para
>При этом режиме вы выбираете два цвета с помощью двух кнопок выбора цвета. &kde; создаст фон, используя плавный переход между цветом, заданным <guilabel
>основным цветом фона</guilabel
> (у левой границы экрана), и цветом, заданным <guilabel
>вторичным цветом фона</guilabel
> (у правой границы экрана).</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Вертикальный градиент</term>
<listitem
><para
>При этом режиме вы выбираете два цвета с помощью двух кнопок выбора цвета. &kde; создаст фон, используя плавный переход между цветом, заданным <guilabel
>основным цветом фона</guilabel
> (у верхней границы экрана), и цветом, заданным <guilabel
>вторичным цветом фона</guilabel
> (у нижней границы экрана).</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Пирамидальный градиент</term>
<listitem
><para
>При этом режиме вы выбираете два цвета с помощью двух кнопок выбора цвета. &kde; создаст фон, используя плавный переход между цветом, заданным <guilabel
>основным цветом фона</guilabel
> (в каждом углу экрана), и цветом, заданным <guilabel
>вторичным цветом фона</guilabel
> (по центру экрана).</para
></listitem
> 
</varlistentry>
<varlistentry>
<term
>Крестообразный градиент</term>
<listitem
><para
>При этом режиме вы выбираете два цвета с помощью двух кнопок выбора цвета. &kde; создаст фон, используя плавный переход между цветом, заданным <guilabel
>основным цветом фона</guilabel
> (в каждом углу экрана), и цветом, заданным <guilabel
>вторичным цветом фона</guilabel
> (по центру экрана).Полученная фигура будет отличаться от пирамидального градиента.</para
></listitem>
</varlistentry>
<varlistentry>
<term
>Эллиптический градиент</term>
<listitem
><para
>При этом режиме вы выбираете два цвета с помощью двух кнопок выбора цвета. &kde; создаст фон, используя плавный переход между цветом, заданным <guilabel
>основным цветом фона</guilabel
> (в каждом углу экрана, по эллипсу), и цветом, заданным <guilabel
>вторичным цветом фона</guilabel
> (по центру экрана).</para
></listitem
> 
</varlistentry>
</variablelist>

<para
>Кнопка настройки понадобится, если вы хотите настроить <guilabel
>фоновую  программу</guilabel
>. При нажатии на кнопку появится окно настройки.</para>
<para
><emphasis
>Обои</emphasis
></para>
<para
>Фоновое изображение (обои) выбирается на вкладке <guilabel
>Фон</guilabel
>. Выпадающий список <guilabel
>Изображение</guilabel
> содержит коллекцию фоновых изображений. Кнопка открытия файла (с изображением папки) открывает диалог выбора файла изображения.</para>

<para
>Шесть способов показа обоев:</para>
<variablelist>
<varlistentry>
<term
>Нет изображения</term
> 
<listitem
><para
>Фон заливается только фоновыми цветами.</para>
</listitem
></varlistentry>
<varlistentry>
<term
>В центре</term
> 
<listitem
><para
>Изображение будет выводится по центру экрана. Фоновые цвета займут всё оставшееся свободное место.</para
> </listitem>
</varlistentry>
<varlistentry>
<term
>Черепицей</term>
<listitem
><para
>Копии изображения заполнят весь рабочий стол. Первое изображение будет расположено в верхнем левом углу экрана.</para
> </listitem>
</varlistentry>
<varlistentry>
<term
>Черепицей от центра</term>
<listitem
><para
>Копии изображения заполнят весь рабочий стол. Первое изображение будет расположено в центре экрана.</para
> </listitem>
</varlistentry>
<varlistentry>
<term
>По центру с масштабированием</term>
<listitem
><para
>Изображение будет помещено в центр экрана и увеличено под размер рабочего стола. Пропорции изображения не изменятся, поэтому оно не будет искажено. </para
> </listitem>
</varlistentry>
<varlistentry>
<term
>На весь рабочий стол</term>
<listitem
><para
>Изображение будет растянуто по всей площади рабочего стола.</para
> </listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="kdmconfig-shutdown">
<title
><guilabel
>Выключение</guilabel
></title>

<para
><guilabel
>Разрешить выключать компьютер</guilabel
></para>
<para
>Данный выпадающий список используется для выбора пользователей, имеющих право завершать работу системы:</para>
<itemizedlist>
<listitem>
<para
><guilabel
>Никому</guilabel
>: никто не сможет выключить компьютер с помощью &kdm;, для этого необходимо будет войти в систему.</para>
</listitem>
<listitem>
<para
><guilabel
>Каждому</guilabel
>: любой пользователь может выключить компьютер с помощью &kdm;.</para>
</listitem>
<listitem
><para
><guilabel
>Администратору</guilabel
>: перед выключением компьютера &kdm; запросит пароль root.</para
></listitem
> 
</itemizedlist>

<para
>Вы можете отдельно настроить, каким пользователям разрешено выключать компьютер <guilabel
>с консоли</guilabel
> и используя <guilabel
>удалённый доступ</guilabel
>.</para>

<para
><emphasis
>Команды</emphasis
></para
> <para
>Используйте эти поля, чтобы задать команды выключения.</para
> <para
>По умолчанию команда <guilabel
>Остановка:</guilabel
> вызывает <command
>/sbin/halt</command
>, команда <guilabel
>Перезагрузка:</guilabel
> — <command
>/sbin/reboot</command
>.</para>

<para
>Если переключатель <guilabel
>Показать параметры загрузки</guilabel
> включён, &kdm; при перезагрузке предоставит параметры Lilo. Вам необходимо будет указать каталог программы <command
>lilo</command
> и каталог map-файла lilo. Замечание: этот параметр доступен не для всех операционных систем.</para>

</sect2>

<sect2 id="kdmconfig-users">
<title
>Пользователи</title>

<para
>Здесь вы можете выбрать способ представления пользователей в окне входа в систему.</para>

<para
>Вы можете полностью отключить список пользователей в &kdm; с помощью переключателя <guilabel
>Показывать список</guilabel
>. Возможности указания пользователя:</para>

<variablelist>
<varlistentry>
<term
><guilabel
>Показать список</guilabel
></term>
<listitem>
<para
>Показывать только выбранных пользователей.</para>
<para
>Не показывать пользователей. Это наиболее безопасный выбор, так как взломщику необходимо будет подбирать как имя пользователя, так и пароль. Этот выбор также предпочтителен, если в системе довольно много пользователей.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><guilabel
>Обратное выделение</guilabel
></term>
<listitem>
<para
>Вам необходимо будет указать пользователей, которые <emphasis
>не</emphasis
> будут показываться, все остальные пользователи будут видны.</para>
</listitem>
</varlistentry>
</variablelist>

<para
>Пользователей можно сортировать как по имени, так и по <guilabel
>системным UID</guilabel
>, то есть задать диапазон <acronym
>UID</acronym
> пользователей, которые будут показываться в списке. По умолчанию пользователи с ID меньше 1000 (обычно системные пользователи или демоны) и больше 6500 в окне входа в систему не показываются.</para>

<para
>Вы можете включить флажок <guilabel
>Сортировать пользователей</guilabel
>, чтобы сортировать пользователей в списке по алфавиту. Если флажок установлен, пользователи будут выведены в порядке, в котором они перечислены в файле паролей. &kdm; будет также дополнять имя пользователя при вводе, если включить <guilabel
>Автозавершение</guilabel
>.</para>

<para
>Если вы выбрали показывать пользователей, в окне входа в систему будет выведен список пользователей с выбранными рисунками. Перед входом пользователь выбирает по имени или изображению и вводит пароль.</para>

<para
>Если вы используете изображения, связанные с пользователями, вы можете настроить эти изображения.</para>

<para
>Здесь вы можете указать источник изображений пользователей. «Административный» означает системную папку, эти изображения можно видеть ниже. «Пользовательский» означает, что для каждого пользователя будет использоваться изображение из файла $HOME/.face.icon, расположенного в его домашней папке. Два параметра в середине позволяют определить порядок предпочтения, если доступны оба источника.</para>

<para
>Если вы решите не показывать изображения пользователей, окно входа в систему будет выглядеть более традиционно. Чтобы войти в систему, пользователям необходимо будет ввести имя и пароль. Этот выбор предпочтителен, если на вашем компьютере много пользователей.</para>

</sect2>

<sect2 id="kdmconfig-convenience">
<title
>Удобства</title>

<para
>На вкладке <guilabel
>Удобства</guilabel
> вы можете настроить параметры, облегчающие вход в систему,например, автоматический вход или вход без пароля.</para>

<important
><para
>Хорошо подумайте перед тем, как использовать эти параметры. Каждая из них нарушает безопасность вашей системы. Используйте их только в системе, полностью не нуждающейся в безопасности, например, на личном домашнем компьютере. </para
></important>

<sect3 id="loginmanager-convenience-autologin">
<title
>Автоматический вход в систему</title>

<para
>Автоматический вход в систему позволяет входить в систему без пароля. Его можно установить переключателем <guilabel
>Разрешить автоматический вход в систему</guilabel
>.</para>

<para
>В списке <guilabel
>Пользователь:</guilabel
> выбирается учётная запись для автоматического входа в систему.</para>

</sect3>

<sect3 id="loginmanager-convenience-nopasswd">
<title
><guilabel
>Вход без пароля</guilabel
></title>

<para
>Вы можете позволить пользователям входить в систему без указания пароля (флажок <guilabel
>Разрешить вход без пароля</guilabel
>).</para>

<para
>Под этим флажком находится список пользователей системы. Чтобы включить беспарольный вход для отдельных пользователей, установите флажок рядом с их именами. По умолчанию этот параметр отключен для всех пользователей.</para>

<important
><para
>Напомним, что этот параметр следует использовать только на компьютерах, не нуждающихся в безопасности. Если вашей машиной пользуются посторонние люди, позаботьтесь, чтобы этой возможностью обладали только пользователи с очень ограниченными правами, например, <systemitem
>guest</systemitem
>.</para
></important>

<para
>Вы также можете задать, какой пользователь будет <quote
>выбран</quote
> при запуске &kdm;. По умолчанию указан пункт <guilabel
>Нет</guilabel
>, но вы можете выбрать <guilabel
>Предыдущий</guilabel
>, чтобы &kdm; было выведено имя последнего пользователя, входившего в систему, также вы можете <guilabel
>Указать</guilabel
> конкретного пользователя, который всегда будет выбран в списке. &kdm; может устанавливать фокус в поле ввода пароля, так что когда перед вами будет окно входа в систему &kdm;, вы сразу сможете вводить пароль.</para>

<para
><guilabel
>Автоматический вход в систему после перезагрузки Х-сервера</guilabel
> позволит вам войти в систему, пропустив процедуру регистрации, после сбоя Х-сервера.</para>

</sect3>

</sect2>

</sect1>

</chapter>

&kdmrc-ref;

<!-- ************************************************************ -->   
<chapter id="configuring-your-system-for-kdm">
<title
>Настройка системы для использования &kdm;</title>

<para
>В данной главе подразумевается, что подсистема &X-Window; уже настроена и нужно только включить графический вход в систему.</para>

<sect1 id="setting-up-kdm">
<title
>Установка &kdm;</title>

<para
>Уровень запуска по умолчанию определяет, загружается ваш компьютер в режиме терминала (текстовой консоли) или в графическом режиме входа в систему. Уровень запуска устанавливается программой <application
><ulink url="man:init"
>/sbin/init</ulink
></application
> и задаётся в конфигурационном файле <filename
>/etc/inittab</filename
>. В разных системах &UNIX; (и различных дистрибутивах &Linux;) эти параметры различаются, но начало файла <filename
>/etc/inittab</filename
> выглядит приблизительно так:</para>

<screen
># Default runlevel. The runlevels used by RHS are:
# 0 - halt (Do NOT set initdefault to this)
# 1 - Single user mode
# 2 - Multiuser, without NFS
# 3 - Full multiuser mode
# 4 - unused
# 5 - X11
# 6 - reboot (Do NOT set initdefault to this)

id:3:initdefault:  
</screen>

<para
>Все строчки этого отрывка, кроме последней, являются комментариями. Комментарии показывают, что уровень 5 используется для работы в X11, а уровень 3 - для работы в многопользовательском режиме без X11 (режим консоли). Последняя строка устанавливает уровень запуска по умолчанию равным 3. Если в вашей системе используется графический вход в систему (например, с использованием &xdm;), уровень запуска по умолчанию равен уровню, заданному для X11.</para>

<para
>Уровень выполнения с графическим входом в систему (&xdm;) некоторых распространённых дистрибутивов Linux:</para>

<itemizedlist>
<listitem
><para
>5 для &RedHat; 3.х и более поздних и для &Mandrake;</para
></listitem>
<listitem
><para
>4 для Slackware</para
></listitem>
<listitem
><para
>3 для &SuSE; 4.х и 5.х</para
></listitem>
</itemizedlist>

<para
>Первое, что необходимо сделать при настройке системы - убедиться, что вы можете запустить &kdm; из командной строки. Если это работает, вы сможете так настроить систему, чтобы &kdm; автоматически запускался при перезагрузке.</para>

<para
>Чтобы проверить &kdm;, вам надо перевести систему на уровень, при котором &xdm; не запускается автоматически. Для этого введите команду:</para>

<screen
><command
>/sbin/init <option
>3</option
></command
></screen>

<para
>Вместо числа <option
>3</option
> введите номер уровня, соответствующего режиму консоли (если это не 3).</para>

<para
>Если операционная система использует подключаемые модули аутентификации (<abbrev
>PAM</abbrev
>), — это является обычным для современных систем &Linux; и &Solaris;, — нужно проверить, что <abbrev
>PAM</abbrev
> разрешают вход в систему через службу с названием <literal
>kde</literal
> (если перед этим &xdm; работал корректно, то никаких изменений не требуется). Файл настройки — <filename
>/etc/pam.conf</filename
> или <filename
>/etc/pam.d/kde</filename
>. Настройка <abbrev
>PAM</abbrev
> выходит за рамки данного руководства. Обратитесь к документации, расположенной в <filename
>/usr/share/doc/*pam*/html/</filename
>.</para>

<para
>Теперь, чтобы проверить работоспособность &kdm;, введите следующую команду:</para>

<screen
><command
>kdm <option
>-nodaemon</option
></command
>
</screen>

<para
>Если в результате выводится диалог входа в систему &kdm; и вы можете войти, всё отлично. Сбой обычно происходит, если программе не удаётся найти или подключить разделяемые библиотеки &Qt; или &kde;. Если у вас установлен двоичный дистрибутив библиотек &kde;, убедитесь, что библиотеки могут обнаружить &kdm;; попытайтесь настроить соответствующие переменные окружения так, чтобы они указывали на библиотеки &kde; и &Qt;.</para>

<para
>Например:</para>

<screen
><command
>export 
<option
>KDEDIR=<replaceable
>/opt/kde</replaceable
></option
></command>
<command
>export 
<option
>QTDIR=<replaceable
>/usr/lib/qt2</replaceable
></option
></command>
<command
>export 
<option
>PATH=<replaceable
>$KDEDIR/bin:$QTDIR/bin:$PATH</replaceable
></option
></command>
<command
>export 
<option
>LD_LIBRARY_PATH=<replaceable
>$KDEDIR/lib:$QTDIR/lib</replaceable
></option
></command
>
</screen>

<para
>Если все попытки безуспешны, попытайтесь запустить &xdm;, чтобы убедиться, что вы не столкнулись с более серьёзной проблемой конфигурации Х.</para>

<para
>Если &kdm; успешно запускается, вы можете заменить &xdm; на &kdm;. Напомним, что шаги, которые необходимо проделать, зависят от дистрибутива.</para>

<itemizedlist>
<listitem>
<para
>&RedHat;: откройте файл <filename
>/etc/inittab</filename
> и замените в нём xdm на &kdm; (включая все пути к файлам).</para>
<screen
>x:5:respawn:/usr/X11/bin/xdm -nodaemon</screen>
<para
>и замените на:</para>
<screen
>x:5:respawn:/opt/kde/bin/kdm</screen>
<para
>Что заставить <command
>init</command
>(8) запустить &kdm; когда система перейдёт на уровень 5. Замечание: &kdm; не нуждается в данном случае в параметре <option
>-nodaemon</option
>.</para>
</listitem>
<listitem>
<para
>&Mandrake;: уровень запуска X11 в <filename
>/etc/inittab</filename
> вызывает сценарий оболочки <filename
>/etc/X11/prefdm</filename
>, который предоставляет возможность выбора из нескольких оконных менеджеров, в том числе &kdm;. Убедитесь, что пути к файлам указаны верно.</para
> 
</listitem>
<listitem>
<para
>&SuSE;: добавьте в начало файла <filename
>/sbin/init.d/xdm</filename
> строки:</para>

<screen
>. /etc/rc.config
DISPLAYMANAGER=kdm
export DISPLAYMANAGER</screen>
</listitem>
<listitem
><para
>Для FreeBSD, отредактируйте <filename
>/etc/ttys</filename
> и найдите строку наподобие этой:</para>
<screen
>ttyv8   "/usr/local/bin/kdm -nodaemon"  xterm   off secure</screen>
<para
>и замените её на:</para>
<screen
>ttyv8   "/usr/local/bin/kdm -nodaemon"  xterm   on secure</screen>
</listitem>

<listitem
><para
>Для большинства остальных дистрибутивов подходит один из вышеприведённых вариантов.</para
></listitem>
</itemizedlist>

<para
>На этой стадии вы можете проверить работу &kdm;. Для этого переведите систему на уровень запуска, при котором автоматически запускается &kdm;. Выполните команду:</para>

<screen
><command
>/sbin/init <option
>5</option
></command
>
</screen>

<para
>Вместо числа <option
>5</option
> введите номер уровня, на котором происходит запуск Х11 (если это не 5).</para>

<para
>Наконец, в файле <filename
>/etc/inittab</filename
> укажите значение параметра <parameter
>initdefault</parameter
>, равное уровню, на котором происходит запуск X11.</para>

<warning
><para
>Перед внесением изменений убедитесь, что при возникновении проблем вы сможете запустить систему заново. Вам необходим «спасательный» диск, поставляемый вместе с операционной системой, или специальный «спасательный» дистрибутив, такой как <literal
>tomsrtbt</literal
>. Пренебрегая этим советом, вы подвергаете опасности систему.</para
></warning>

<para
>Это чаще всего касается изменений следующей строки:</para>
<screen
>id:3:initdefault:</screen>
<para
>на</para>
<screen
>id:5:initdefault:</screen>

<para
>При перезагрузке системы вы увидите графический диалог входа в систему &kdm;.</para>

<para
>Наиболее вероятная причина сбоя на этом этапе состоит в том, что среда, используемая после перезагрузки, отличается от той, которую вы тестировали из командной строки. Если вы пытаетесь совместно использовать две версии KDE, убедитесь для каждой из них, что переменные окружения <envar
>PATH</envar
> и <envar
>LD_LIBRARY_PATH</envar
> согласуются, и что скрипты запуска системы не перезаписывают их каким-либо образом.</para>

</sect1>

</chapter>

<chapter id="different-window-managers-with-kdm">
<title
>Поддержка нескольких оконных менеджеров</title>

<para
>&kdm; способен находить некоторые оконные менеджеры и окружения рабочего стола. При установке нового менеджера или окружения в диалоговое окно <guilabel
>Тип сеанса</guilabel
> будет автоматически добавлен соответствующий пункт.</para>

<para
>Если вы установили менеджер, который &kdm; не поддерживает, вам нужно проверить, находится ли соответствующее приложение в одном из каталогов, перечисленных в переменной <envar
>PATH</envar
>, и что во время установки файл не был переименован.</para>

<para
>Если это не помогло, добавьте новый тип сеанса вручную.</para>

<para
>Типы сеансов определены в файлах <firstterm
>.desktop</firstterm
> из <filename class="directory"
>$<envar
>KDEDIR</envar
>/share/apps/kdm/sessions</filename
>. Вы можете создать в этом каталоге файл <literal role="extension"
>.desktop</literal
> с подходящим именем. Пример файла:</para>

<programlisting
>[Desktop Entry]
Encoding=UTF-8 <lineannotation
> <option
>UTF-8</option
> применяется всегда,
параметр можно опустить</lineannotation>
Type=XSession <lineannotation
><option
>XSession</option
> применяется всегда,
параметр можно опустить</lineannotation>
Exec=<replaceable
>имя_приложения</replaceable
> <lineannotation
>Передаётся
команде <command
>eval</command
>оболочки Bourne</lineannotation>
TryExec=<replaceable
>executable name</replaceable
> <lineannotation
>Поддерживается, но не
является необходимым</lineannotation>
Name=<replaceable
>имя_в_списке_сеансов</replaceable
></programlisting>

<para
>Есть три очень важных типа сеансов:</para>

<variablelist>
<varlistentry>
<term
>По умолчанию</term>
<listitem>
<para
>Тип сеанса &kdm; по умолчанию обычно &kde;, но системный администратор может это изменить. </para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Другой</term>
<listitem>
<para
>«Другой» — сеанс, который запускается через ~/.xsession, если этот файл существует. </para>
</listitem>
</varlistentry>
<varlistentry>
<term
>Безопасный</term>
<listitem>
<para
>Безопасный — очень простой тип сеанса, используемый только для целей отладки. </para>
</listitem>
</varlistentry>
</variablelist>

<para
>Чтобы добавить тип сеанса, скопируйте файл .desktop в каталог файлов настройки и отредактируйте его. Вместо того, чтобы удалять ненужный файл, вы можете скрыть его в списке, установив параметр Hidden=true. Для неизменяемых (перечисленных выше) типов сеансов файлов .desktop не существует, поэтому вы не можете изменить их таким способом. Теперь вы знаете, как добавлять новый тип сеанса.</para>

</chapter>

<chapter id="xdmcp-with-kdm">
<title
>Использование &kdm; для удалённого входа в систему (через &XDMCP;)</title>

<para
>&XDMCP; &mdash; стандарт Open Group, <quote
>X Display Manager Control Protocol</quote
> (протокол удалённого управления менеджером рабочего стола Х). Он используется для установки сетевых соединений между различными системами.</para>

<para
>&XDMCP; полезен в ситуациях, когда есть несколько рабочих станций и мощный сервер, предоставляющий ресурсы для X-сеансов. Рабочим станциям достаточно иметь ресурсы для работы X-сервера (подойдут даже устаревшие машины на базе процессоров Pentium и i486 с 16 Мб оперативной памяти). С помощью &XDMCP; они смогут запустить полноценный сеанс &kde; с сервера. Создание добавочных сеансов на сервере требует минимум дополнительных ресурсов.</para>

<para
>Однако, открывая дополнительные возможности для входа в систему через сеть, вы снижаете уровень безопасности, поэтому используйте эту технику, только если это действительно необходимо. Если ваш компьютер не подключён к какой-либо сети, вам не следует использовать эту технологию.</para>

</chapter>

<chapter id="advanced-topics">
<title
>Дополнительные разделы</title>

<sect1 id="command-sockets">
<title
>Сокеты команд</title>

<para
>Это расширение позволяет получить удалённый доступ к &kdm;. Эта возможность в первую очередь предназначена для использования &ksmserver; и &kdesktop; из запущенного сеанса, но также может быть использована и другими приложениями.</para>

<para
>Сокеты — обычные &UNIX; сокеты, которые находятся в подкаталогах каталога определённого параметром <option
>FifoDir</option
>=.... Все сокеты названы <filename
>socket</filename
>, и права доступа к подкаталогам, в которых они находятся: <literal
>rw-rw-rw-</literal
>(0666). Это сделано потому, что некоторые операционные системы игнорируют права доступа к файлам сокетов.</para>

<para
>Существует два типа сокетов: один глобальный (dmctl) и по одному на каждый дисплей (dmctl-&lt;display&gt;).</para>

<para
>Глобальными подкаталогами сокетов владеет администратор системы, а подкаталогами дисплеев — пользователь сеанса (администратор или другой вошедший в систему пользователь). Группа владельца подкаталогов определяется параметром FifoGroup= (значение по умолчанию — root). Права доступа к файлам подкаталогов: rwxr-x--- (0750).</para>

<para
>Поля команды отделены знаками табуляции (<token
>\t</token
>), поля списков — пробелами, поля, выделенные символами — знаками <token
>\s</token
>.</para>

<para
>Команды оканчиваются переводом строки (<token
>\n</token
>).</para>

<para
>Тоже самое относится и к возвращаемым значениям. Ответ при успешном завершении — <returnvalue
>ok</returnvalue
>, после чего может располагаться запрошенная информация. Если при выполнении возникла ошибка, ответ будет в стиле описания errno (например, <returnvalue
>perm</returnvalue
>, <returnvalue
>noent</returnvalue
>, и так далее), с последующим более подробным пояснением.</para>

<variablelist>
<title
>Глобальные команды:</title>
<varlistentry>
<term
><command
>login</command
> <option
>дисплей</option
>(<parameter
>now</parameter
> | <parameter
>schedule</parameter
>) <parameter
>пользователь</parameter
> <parameter
>пароль</parameter
> [параметры сеанса]</term>
<listitem>
<para
>Позволяет войти пользователю в систему с определённого дисплея. Если указан параметр <parameter
>now</parameter
>, все ранее запущенные и ещё активные сеансы закрываются. Параметры сеанса — строка в стиле printf для файла .dmrc. Для не перечисленных значений используются значения по умолчанию.</para>
</listitem>
</varlistentry>
</variablelist>

<variablelist>
<title
>Команды для дисплея:</title>
<varlistentry>
<term
><command
>lock</command
></term>
<listitem>
<para
>Дисплей помечается как заблокированный. Если в этом состоянии X-сервер аварийно завершит работу, автоматический повторный вход в систему выполнен не будет, даже если он активирован.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><command
>unlock</command
></term>
<listitem>
<para
>Имеет обратное значение по отношению к команде <command
>lock</command
>, и снова становиться возможным автоматически заходить в систему.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><command
>suicide</command
></term>
<listitem>
<para
>Текущий сеанс принудительно закрывается. Автоматический вход в систему запрещён, но отложенная команда «login» разрешена.</para>
</listitem>
</varlistentry>
</variablelist>

<variablelist>
<title
>Команды для всех сокетов</title>
<varlistentry>
<term
><command
>caps</command
></term>
<listitem>
<para
>Возвращает все возможности сокета:</para>

<variablelist>
<varlistentry>
<term
><returnvalue
>&kdm;</returnvalue
></term>
<listitem>
<para
>идентифицирует &kdm;, на случай если другие менеджеры дисплеев тоже поддерживают данный протокол</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>list</returnvalue
>, <returnvalue
>lock</returnvalue
>, <returnvalue
>suicide</returnvalue
>, <returnvalue
>login</returnvalue
></term>
<listitem>
<para
>Соответствующий список поддерживаемых команд</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>bootoptions</returnvalue
></term>
<listitem>
<para
>Поддерживаются: команда <command
>listbootoptions</command
> и параметр <option
>=</option
> для команды <command
>shutdown</command
></para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>shutdown &lt;список&gt;</returnvalue
></term>
<listitem>
<para
>Команда <command
>shutdown</command
> (выключить) разрешена и доступна для указанных пользователей (они перечисляются в списке через запятую). <returnvalue
>*</returnvalue
> — означает все зарегистрированные пользователи.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>nuke &lt;список&gt;</returnvalue
></term>
<listitem>
<para
>Ускоренное выключение доступно следующим пользователям, перечисленным в списке.</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>nuke</returnvalue
></term>
<listitem>
<para
>Ускоренное выключение доступно всем</para>
</listitem>
</varlistentry>
<varlistentry>
<term
><returnvalue
>reserve &lt;число&gt;</returnvalue
></term>
<listitem>
<para
>Зарезервированные дисплеи сконфигурированы, и некоторое их <returnvalue
>число</returnvalue
> уже доступно.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>list</command
> [<parameter
>all</parameter
> | <parameter
>alllocal</parameter
>]</term>
<listitem>
<para
>Возвращает список открытых сеансов. По умолчанию возвращаются все активные сеансы. сеансы. Если определён параметр <parameter
>alllocal</parameter
>, все пассивные сеансы перечисляются, но исходящие удалённые сеансы не указываются.</para>
<para
>Каждая запись о сеансе представляет собой разделённый запятой набор:</para>
<itemizedlist>
<listitem
><para
>Дисплей или имя консоли</para
></listitem>
<listitem
><para
>имя локальной консоли (vt) или имя локального сеанса</para
></listitem>
<listitem
><para
>Имя вошедшего пользователя, это поле пусто для пустых или пассивных сеансов и для исходящих удалённых сеансов.</para
></listitem>
<listitem
><para
>Тип сеанса (<quote
>&lt;remote&gt;</quote
> для исходящих удалённых сеансов, пусто для пассивных сеансов).</para
></listitem>
<listitem
><para
>Поле флагов:</para>
<itemizedlist
><listitem
><para
><literal
>*</literal
> для дисплеев, принадлежащих опрашиваемому сокету.</para
></listitem>
<listitem
><para
><literal
>!</literal
> для сеансов, которые не могут быть закрыты через опрашиваемый сокет.</para
></listitem>
</itemizedlist>
</listitem>
</itemizedlist>
<para
>Новые поля могут быть добавлены в будущем.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>reserve</command
> [<parameter
>задержка в секундах</parameter
>]</term>
<listitem>
<para
>Запустить резервный экран входа в систему. Если никто не зарегистрировался и не вошёл в систему через определённое время, указанное в секундах (по умолчанию &mdash; одна минута), то дисплей удаляется. Когда сеанс на этом дисплее закрывается, то дисплей также удаляется.</para>
<para
>Разрешено только для сокетов локальных дисплеев и для глобальных сокетов.</para
> 
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>activate</command
> (<parameter
>vt</parameter
>|<parameter
>display</parameter
>)</term>
<listitem>
<para
>Переключиться на определённый виртуальный терминал (VT). Виртуальный терминал может быть определён непосредственно (например, <parameter
>vt3</parameter
>) или с помощью использующего его дисплея (например, <parameter
>:2</parameter
>).</para>
<para
>Разрешено только для сокетов локальных дисплеев и для глобальных сокетов.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>listbootoptions</command
></term>
<listitem>
<para
>Список доступных загрузочных параметров.</para>
<!--FIXME: "ok" list default current
    default and current are indices into the list and are -1 if unset or
    undeterminable. -->
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>shutdown</command
> (<parameter
>reboot</parameter
> | <parameter
>halt</parameter
>) [<parameter
>=<replaceable
>bootchoice</replaceable
></parameter
>] (<parameter
>ask</parameter
>|<parameter
>trynow</parameter
>|<parameter
>forcenow</parameter
>|<parameter
>schedule</parameter
>|<parameter
>start (<parameter
>-1</parameter
>|<parameter
>end (<parameter
>force</parameter
>|<parameter
>forcemy</parameter
>|<parameter
>cancel)</parameter
>)</parameter
>)</parameter
>)</term>
<listitem>
<para
>Послать запрос на выключение системы, или перезагрузку или на останов/выключение питания.</para>
<para
>Операционная система, загружаемая после перезагрузки, может быть определена из списка, возвращаемого командой <command
>listbootoptions</command
></para>
<para
>Запросы на выключение с сокетов, соответствующих отдельным дисплеям, выполняются, когда текущие сеансы на них закрываются. После запроса может появиться диалоговое окно, спрашивающее подтверждение и/или аутентификацию.</para>
<para
><parameter
>start</parameter
> — время, когда выключение будет произведено. Если перед числом будет знак плюс, то добавляется текущее время. Ноль — выключить немедленно.</para>
<para
><parameter
>end</parameter
> — время, через которое выключение будет произведено, несмотря на то, что некоторые сеансы ещё не закрыты. Если перед числом будет знак плюс, то добавляется текущее время. -1 означает бесконечность. Если время истекло и сеансы не закрыты, то &kdm; выполнит одно из следующих действий:</para>
<itemizedlist>
<listitem
><para
><parameter
>cancel</parameter
> — отменить выключение</para
></listitem>
<listitem
><para
><parameter
>force</parameter
> — выключить несмотря ни на что</para
></listitem>
<listitem
><para
><parameter
>forcemy</parameter
> — выключить активные сеансы после предупреждения пользователей. Только для сокетов, запущенных для каждого дисплея.</para
></listitem>
</itemizedlist>
<para
><parameter
>start</parameter
> и <parameter
>end</parameter
> задаются в секундах с начала &UNIX; эпохи.</para>
<para
><parameter
>trynow</parameter
> синоним для <parameter
>0 0 cancel</parameter
>, <parameter
>forcenow</parameter
> синоним для <parameter
>0 0 force</parameter
> и <parameter
>schedule</parameter
> синоним для <parameter
>0 -1</parameter
>.</para>
<para
><parameter
>ask</parameter
> — если этот параметр указан, то делается немедленная попытка выключить дисплей, и если сеанс активен, производиться соответствующий запрос пользователю.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>shutdown cancel</command
> [<parameter
>local</parameter
>|<parameter
>global</parameter
>}</term>
<listitem>
<para
>Отменяет отложенное выключение. Глобальные сокеты отменяют только что полученный (ожидающий) запрос на выключение, тогда как сокеты дисплеев отменяют первый запрос в очереди (буферизованный).</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><command
>shutdown status</command
></term>
<listitem>
<para
>Выводит список с информацией о запросах выключения.</para>
<para
>Каждая строка — набор разделённых запятыми полей:</para>
<itemizedlist>
<listitem>
<para
>(<returnvalue
>global</returnvalue
>|<returnvalue
>local</returnvalue
>) — отложенный (ожидающий), или буферизованный запрос. local может быть возвращён только сокетом дисплея.</para>
</listitem>
<listitem
><para
>(<returnvalue
>halt</returnvalue
>|<returnvalue
>reboot</returnvalue
>)</para
></listitem>
<listitem
><para
>начало работы</para
></listitem>
<listitem
><para
>конец работы</para
></listitem>
<listitem
><para
>("ask"|"force"|"forcemy"|"cancel")</para
></listitem>
<listitem
><para
>Идентификационный номер пользователя (UID), или -1 для глобального сокета.</para
></listitem>
<listitem
><para
>Операционная система, которая будет загружена после выключения, или «-».</para
></listitem>
</itemizedlist>
<para
>В будущем могут быть добавлены новые поля.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</varlistentry>
</variablelist>
<para
>Существует два способа использовать сокеты:</para>
<itemizedlist>
<listitem>
<para
>Подключиться к нему напрямую. Переменная окружения FifoDir должна быть экспортирована с именем $<envar
>DM_CONTROL</envar
>; имя дисплейного сокета определяется как $<envar
>DISPLAY</envar
>.</para>
</listitem>
<listitem>
<para
>С помощью команды <command
>kdmctl</command
> (например в сценарии командной строки). Наберите <command
>kdmctl</command
> <option
>-h</option
> чтобы узнать остальные параметры.</para>
</listitem>
</itemizedlist>

<para
>Далее пример bash сценария <quote
>перезагрузиться в ОС FreeBSD</quote
>:</para>

<programlisting
>if kdmctl | grep -q shutdown; then
  IFS=$'\t'
  set -- `kdmctl listbootoptions`
  if [ "$1" = ok ]; then
        fbsd=$(echo "$2" | tr ' ' '\n' | sed -ne 's,\\s, ,g;/freebsd/I{p;q}')
        if [ -n "$fbsd" ]; then
          kdmctl shutdown reboot "=$fbsd" ask &gt; /dev/null
        else
          echo "Загрузка FreeBSD невозможна."
        fi
  else
    echo "Недопустимый параметр загрузки."
  fi
else
  echo "Невозможно перезагрузить систему."
fi</programlisting>

</sect1>
<!-- Riddell: so there's no GUI you need to edit kdmrc to say UseTheme=true and Theme=/path/to/theme.xml
[13:31] <Riddell
> jriddell.org/programs has an example theme 

<sect1 id="dm-themes">
<title
>Themes</title>

&kdm; has limited support for desktop manager themes.  You may enable them
by adding <userinput
>UseTheme=true</userinput
> to <filename
>kdmrc</filename>
and <userinput
>Theme=/path/to/theme.xml</userinput
>.  
</sect1>
-->
</chapter>

<chapter id="Other-Information">
<title
>Дополнительные источники информации</title>

<para
>Так как &kdm; основан на &xdm;, может оказаться полезным <ulink url="man:xdm"
>Руководство пользователя xdm</ulink
>. Для устранения неполадок X-сервера, прочтите страницы документации Man по <ulink url="man:X"
>X</ulink
> и <ulink url="man:startx"
>startx</ulink
>. Ответы на вопросы, не рассмотренные в данном руководстве, может дать чтение исходного кода. &kdm; распространяется по лицензии <abbrev
>&GNU;</abbrev
>, поэтому его исходный код доступен всем желающим. </para>

</chapter>


<chapter id="credits"
><title
>Благодарности и лицензирование</title>

<para
>&kdm; происходит от (и включает код) &xdm; &copy; Keith Packard, MIT X Consortium.</para>

<para
>Автор &kdm; 0.1 — &Matthias.Ettrich;. Автор версии для &kde; 2.0.х — &Steffen.Hansen;. Автор добавления новых свойств в &kdm; для &kde; 2.1.x и фундаментальных изменений версии для &kde; 2.2.х — &Oswald.Buddenhagen;.</para>

<para
>Права на остальные части кода &kdm; принадлежат их авторам и имеют лицензию <ulink url="common/gpl-license.html"
>GNU GPL</ulink
>. &kdm; можно без ограничений изменять и распространять, при условии упоминания имён авторов.</para>

<para
>Для &kdm; необходима библиотека &Qt;. Авторские права на неё принадлежат компании Troll Tech AS.</para>

<para
>Документация <itemizedlist>

<listitem
><para
>Автор документации — &Steffen.Hansen; <email
>stefh@dit.ou.dk</email
></para
></listitem>

<listitem
><para
>Gregor Zumstein <email
>zumstein@ssd.ethz.ch</email
> — дополнение документации. Последнее изменение внесено 9 августа 1998 г.</para
></listitem>

<listitem
><para
>Автор правки документации для &kde; 2 — &Neal.Crook; &Neal.Crook.mail;. Последнее обновление выполнено 6 августа 2000 г.</para
></listitem>

<listitem
><para
>Автор дополнения и исправления документации для &kde; 2.2 — &Oswald.Buddenhagen; &Oswald.Buddenhagen.mail;. Последнее обновление выполнено в августе 2001 г.</para
></listitem>

</itemizedlist
></para>

<para
>Авторские права на документацию принадлежат &Steffen.Hansen;, Gregor Zumstein, &Neal.Crook; и &Oswald.Buddenhagen;. Данный документ также включает значительные части страницы документации для &xdm;, авторские права на которую принадлежат Keith Packard.</para>
&underFDL; &underGPL; </chapter>

<glossary id="glossary">
<title
>Словарь</title>

<glossentry id="gloss-greeter">
<glossterm
>приглашение</glossterm>
<glossdef
><para
>Приглашение — диалоговое окно входа в систему, то есть часть &kdm;, с которой непосредственно работает пользователь.</para>
</glossdef>
</glossentry>

<glossentry>
<glossterm id="gloss-entropy"
>энтропия</glossterm>
<glossdef
><para
>Энтропия системы — мера её непредсказуемости. Это понятие используется в алгоритмах генерации псевдослучайных чисел.</para
></glossdef>
</glossentry>

</glossary>
</book>
<!--
Local Variables:
mode: xml
sgml-omittag: nil
sgml-shorttag: t
End:
-->

