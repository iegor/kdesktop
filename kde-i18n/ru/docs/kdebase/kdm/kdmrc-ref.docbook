<!-- generated from ../../kdm/config.def - DO NOT EDIT! -->

<chapter id="kdm-files">
<title
>Конфигурационные файлы &kdm;</title>

<para
>Эта глава описывает файлы, определяющие поведение &kdm;. Некоторые его аспекты, но не все, могут быть настроены через соответствующий модуль Центра управления KDE.</para>

<sect1 id="kdmrc">
<title
>&kdmrc; &mdash; основной конфигурационный файл &kdm;</title>

<para
>Формат файла похож на формат INI-файлов. Пары параметр-значение организованы в секции. Все наименования регистрозависимы. Если &kdm; встретит в файле синтаксическую ошибку, непредусмотренный параметр или секцию, будет выведено сообщение о некритической ошибке.</para>

<para
>Строки, начинающиеся с символа <literal
>#</literal
>, являются комментариями. Комментарии и пустые строки игнорируются.</para>

<para
>Начало секции отмечается так: <literal
>[</literal
><replaceable
>имя секции</replaceable
><literal
>]</literal
>. </para>

<para
>Вы можете настроить каждый Х-дисплей отдельно.</para>
<para
>Каждый дисплей имеет название, которое состоит из названия хоста сети (у локальных дисплеев, перечисленных в параметре <option
>StaticServers</option
> или <option
>ReserveServers</option
>, оно отсутствует), двоеточия и номера дисплея. Также дисплей принадлежит к одному из дисплейных классов. В большинстве случаев класс не учитывается.</para>

<para
>Синтаксис секций, связанных с конкретным дисплеем (под словом «раздел» здесь и далее понимается раздел секции): <literal
>[X-</literal
>&nbsp;<replaceable
>хост</replaceable
>&nbsp;[&nbsp;<literal
>:</literal
>&nbsp;<replaceable
>номер</replaceable
>&nbsp;[&nbsp;<literal
>_</literal
>&nbsp;<replaceable
>класс</replaceable
>&nbsp;]&nbsp;]&nbsp;<literal
>-</literal
>&nbsp;<replaceable
>раздел</replaceable
>&nbsp;<literal
>]</literal
> </para>
<para
>Все секции с одинаковым именем <replaceable
>раздела</replaceable
> составляют класс секций.</para>

<para
>Вы можете использовать шаблон <literal
>*</literal
> (соответствует любому количеству любых символов) вместо имени хоста, номера и класса. Вы можете опустить эти компоненты, что аналогично их замене на <literal
>*</literal
>. Часть имени хоста может соответствовать спецификации домена, например, <quote
>.inf.tu-dresden.de</quote
>. Вы также можете использовать шаблон <literal
>+</literal
> (который соответствует непустой строке).</para>

<para
>Чтобы выбрать секцию, из которой берётся настройка, программа использует следующие правила:</para>

<itemizedlist>
<listitem>
<para
>Полное совпадение имени имеет большую значимость, чем частичное, значимость которого, в свою очередь, больше, чем у шаблона. Шаблон <literal
>+</literal
> имеет большую значимость, чем <literal
>*</literal
>.</para>
</listitem>

<listitem>
<para
>Значимость уменьшается слева направо для равных по предыдущему критерию совпадений.</para>
</listitem>

<listitem>

<para
>В качестве примера возьмём имя дисплея "myhost.foo:0", класс "dpy". Следующие названия секций приведены в порядке убывания значимости: </para>
<itemizedlist>
<listitem>
<para
>[X-myhost.foo:0_dpy]</para>
</listitem>
<listitem>
<para
>[X-myhost.foo:0_*] (то же, что и [X-myhost.foo:0])</para>
</listitem>
<listitem>
<para
>[X-myhost.foo:*_dpy]</para>
</listitem>
<listitem>
<para
>[X-myhost.foo:*_*] (то же, что и [X-myhost.foo])</para>
</listitem>
<listitem>
<para
>[X-.foo:*_*] (то же, что и [X-.foo])</para>
</listitem>
<listitem>
<para
>[X-+:0_dpy]</para>
</listitem>
<listitem>
<para
>[X-*:0_dpy]</para>
</listitem>
<listitem>
<para
>[X-*:0_*] (то же, что и [X-*:0])</para>
</listitem>
<listitem>
<para
>[X-*:*_*] (то же, что и [X-*])</para>
</listitem>
<listitem>
<para
>Следующие названия секций <emphasis
>НЕ</emphasis
> соответствуют этому дисплею:</para>
<para
>[X-hishost], [X-myhost.foo:0_dec], [X-*:1], [X-:*]</para>
</listitem>
</itemizedlist>

</listitem>

</itemizedlist>

<para
>Стандартные секции файла: [X-*] (относится ко всем дисплеям), [X-:*] (относится ко всем локальным дисплеям) и [X-:0] (относится к первому локальному дисплею).</para>

<para
>Формат всех параметров таков: <userinput
><option
><replaceable
>параметр</replaceable
></option
>=<parameter
>значение</parameter
></userinput
>. Параметры действительны только в том классе секций, для которого они определены. Некоторые настройки не применяются к определённым дисплеям. В этом случае они игнорируются. </para>

<para
>Если настройка не найдена ни в одной из соответствующих монитору секций, используется значение по умолчанию.</para>

<para
>Перед специальными символами нужно ставить символ обратной косой черты (начальные и конечные пробелы (<literal
>\s</literal
>), символ табуляции (<literal
>\t</literal
>), символ перевода строки (<literal
>\n</literal
>), символ возврата каретки (<literal
>\r</literal
>), сам символ обратной косой черты (<literal
>\\</literal
>)).</para>
<para
>В списках поля разделяются запятыми. Вокруг запятой не должно быть пробелов. </para>
<para
>Некоторые командные строки подвергаются разбиению на слова (упрощённые правила интерпретатора команд sh): одинарные (<literal
>'</literal
>) и двойные (<literal
>"</literal
>) кавычки имеют обычный смысл, символ обратной косой черты включает буквальную интерпретацию любого символа (не только специальных). Следует обратить внимание, что символы обратной косой черты нужно удваивать из-за двух уровней интерпретации.</para>

<note
><para
>Исходный файл &kdmrc; очень подробно прокомментирован. Если для настройки kdm будет использован Центр управления KDE, все комментарии будут удалены.</para
></note>


<sect2 id="kdmrc-general">
<title
>Секция [General] файла &kdmrc;</title>

<para
>Эта секция содержит общие настройки. </para>

<variablelist>

<varlistentry>
<term id="option-configversion"
><option
>ConfigVersion</option
></term>
<listitem>
<para
>Этот параметр относится к автоматическому обновлению. <emphasis
>НЕ</emphasis
> изменяйте его, это может препятствовать будущим обновлениям и привести к тому, что &kdm; не сможет запуститься. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-staticservers"
><option
>StaticServers</option
></term>
<listitem>
<para
>Список дисплеев (X-серверов), которыми &kdm; постоянно управляет. Дисплеи с названием сетевого хоста &mdash; удалённые (предполагается, что они уже работают), остальные &mdash; локальные (для них &kdm; запускает собственный X-сервер). См. <option
>ServerCmd</option
>. Каждый дисплей может принадлежать классу дисплеев, название которого добавляется к названию дисплея через символ подчёркивания. См. <xref linkend="kdmrc-xservers"/>. </para>
<para
>Значение по умолчанию — <quote
>:0</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-reserveservers"
><option
>ReserveServers</option
></term>
<listitem>
<para
>Список дисплеев, активируемых по требованию. Синтаксис описан в <option
>StaticServers</option
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-servervts"
><option
>ServerVTs</option
></term>
<listitem>
<para
>Список виртуальных терминалов, выделяемых X-серверам. Отрицательные числа означают выбор только свободных терминалов с номерами, равными абсолютной величине чисел списка. Если &kdm; исчерпает этот список, он будет выделять свободные терминалы с номерами больше абсолютной величины последнего значения в списке. На данный момент применим только к ОС Linux. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-consolettys"
><option
>ConsoleTTYs</option
></term>
<listitem>
<para
>Данный параметр предназначен для операционных систем (<acronym
>ОС</acronym
>) с поддержкой виртуальных терминалов (<acronym
>VT</acronym
>), поддержкой и со стороны &kdm;, и со стороны самой <acronym
>ОС</acronym
>. На данный момент применим только к ОС Linux. </para
><para
>Когда &kdm; переходит в консольный режим, он начинает следить за всеми перечисленными здесь линиями <acronym
>TTY</acronym
> (без префикса <literal
>/dev/</literal
>). Если ни одна из них не активна в течение некоторого времени, &kdm; снова возвращается к графическому диалогу входа в систему. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-pidfile"
><option
>PidFile</option
></term>
<listitem>
<para
>В файле с указанным именем будет сохраняться идентификатор основного процесса (PID) &kdm;. Если имя не задано, PID сохраняться не будет. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-lockpidfile"
><option
>LockPidFile</option
></term>
<listitem>
<para
>Этот параметр определяет, будет ли &kdm; использовать файл блокировки для того, чтобы не было запущено более одного экранного менеджера. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-authdir"
><option
>AuthDir</option
></term>
<listitem>
<para
>В указанном каталоге &kdm; будет хранить файлы авторизации Х-сервера во время запуска сеанса. &kdm; требует, чтобы при перезагрузке система удаляла устаревшие файлы. </para
><para
>Файл авторизации для конкретного дисплея можно указать через параметр  <option
>AuthFile</option
> секции [X-*-Core]. </para>
<para
>Значение по умолчанию — <quote
>/var/run/xauth</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autorescan"
><option
>AutoRescan</option
></term>
<listitem>
<para
>Параметр определяет, будет ли &kdm; перечитывать файлы настроек при их изменении. Возможные значения — true (да) и false (нет). </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-exportlist"
><option
>ExportList</option
></term>
<listitem>
<para
>Дополнительные переменные окружения. Они будут доступны всем программам, которые запускает &kdm;. Желательно, хотя не обязательно, указать <envar
>LD_LIBRARY_PATH</envar
> и <envar
>XCURSOR_THEME</envar
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-randomfile"
><option
>RandomFile</option
></term>
<listitem>
<para
>Если в системе нет источника энтропии (псевдослучайных данных), такого, как /dev/urandom (см. параметр <option
>RandomDevice</option
>) и не запущен какой-либо демон (пример, EGD), способный возвращать случайные числа (см. параметры <option
>PrngdSocket</option
> и <option
>PrngdPort</option
>), &kdm; будет использовать собственный генератор псевдослучайных чисел. Кроме всего прочего, этот генератор будет использовать значение контрольной суммы файла kdmrc. </para
><para
>Если программа выполняется на Linux или ОС семейства BSD, этот параметр отсутствует. </para>
<para
>Значение по умолчанию — <quote
>/dev/mem</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-prngdsocket"
><option
>PrngdSocket</option
></term>
<listitem>
<para
>Если в системе нет источника энтропии, такого, как /dev/urandom (см. параметр <option
>RandomDevice</option
>), kdm будет получать случайные данные от демона генерации псевдослучайных чисел (пример такого демона — EGD, http://egd.sourceforge.net) через указанный сокет UNIX. </para
><para
>Если программа выполняется на Linux или ОС семейства BSD, этот параметр отсутствует. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-prngdport"
><option
>PrngdPort</option
></term>
<listitem>
<para
>Задаёт сокет TCP на локальной машине. Функция та же, что и у <option
>PrngdSocket</option
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-randomdevice"
><option
>RandomDevice</option
></term>
<listitem>
<para
>Путь к символьному устройству, с которого &kdm; будет считывать случайные данные. Если он пуст, будет использоваться системный источник псевдослучайных чисел. </para
><para
>Если программа работает под OpenBSD, параметр отсутствует, так как используется функция arc4_random. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-fifodir"
><option
>FifoDir</option
></term>
<listitem>
<para
>В указанном каталоге будут создаваться управляющие каналы <acronym
>FiFo</acronym
>. Если значение не указано, каналы не используются. </para>
<para
>Значение по умолчанию — <quote
>/var/run/xdmctl</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-fifogroup"
><option
>FifoGroup</option
></term>
<listitem>
<para
>Определяет, какой группе пользователей принадлежит файл, соответствующий глобальному управляющему каналу <acronym
>FiFo</acronym
>. Вы можете указать как имя, так и идентификатор группы. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-datadir"
><option
>DataDir</option
></term>
<listitem>
<para
>В указанном каталоге &kdm; будет хранить данные, требующиеся для работы. К таким данным относится, например, имя последнего пользователя, вошедшего в систему на  каком-либо дисплее. </para>
<para
>Значение по умолчанию — <quote
>/var/lib/kdm</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-dmrcdir"
><option
>DmrcDir</option
></term>
<listitem>
<para
>В указанном каталоге &kdm; будет хранить пользовательские файлы <filename
>.dmrc</filename
>. Параметр используется, только если домашний каталог становится доступными для чтения только после входа пользователя в систему (пример — файловая система AFS). </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="kdmrc-xdmcp">
<title
>Параметры секции [Xdmcp] файла &kdmrc;</title>

<para
>Параметры этой секции определяют, как &kdm; будет обрабатывать запросы &XDMCP;. </para>

<variablelist>

<varlistentry>
<term id="option-enable"
><option
>Enable</option
></term>
<listitem>
<para
>Определяет, будет ли &kdm; принимать запросы &XDMCP;. Значение по умолчанию — <parameter
>true</parameter
>. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-port"
><option
>Port</option
></term>
<listitem>
<para
>Номер порта UDP, через который &kdm; будет принимать запросы &XDMCP;. Изменение может потребоваться только при отладке системы. </para>
<para
>Значение по умолчанию — <parameter
>177</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-keyfile"
><option
>KeyFile</option
></term>
<listitem>
<para
>Метод аутентификации &XDMCP; XDM-AUTHENTICATION-1 требует, чтобы &kdm; связывал с каждым терминалом ключ доступа. Этот параметр задаёт путь к файлу, содержащему ключи. Каждая запись в файле должна состоять из имени дисплея и ключа. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-xaccess"
><option
>Xaccess</option
></term>
<listitem>
<para
>Для того, чтобы предотвратить несанкционированный доступ к &XDMCP;, но разрешить перенаправление запросов &XDMCP; (IndirectQuery), система использует файл, содержащий базу данных имён машин, которым разрешён прямой доступ к компьютеру, или на которых содержится список машин, на которые будут перенаправляться запросы. Формат этого файла описан в документе <xref linkend="kdmrc-xaccess"/>. </para>
<para
>Значение по умолчанию — <quote
>${<envar
>kde_confdir</envar
>}/kdm/Xaccess</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-choicetimeout"
><option
>ChoiceTimeout</option
></term>
<listitem>
<para
>Определяет время (в секундах), в течение которого программа будет ждать ответа от дисплея после того, как пользователь указал машину в окне выбора. Если в этот срок от дисплея был получен непрямой запрос &XDMCP; (IndirectQuery), он перенаправляется выбранной машине, иначе он рассматривается как связанный с другим сеансом, и окно выбора машины выводится снова. </para>
<para
>Значение по умолчанию — <quote
>15</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-removedomainname"
><option
>RemoveDomainname</option
></term>
<listitem>
<para
>Обычно при определении имени дисплея для клиентов &XDMCP; возвращается полное имя машины. Поскольку это может привести к ошибкам, &kdm; удаляет часть, соответствующую доменному имени, если оно совпадает с именем локальной машины (если параметр включен). </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-sourceaddress"
><option
>SourceAddress</option
></term>
<listitem>
<para
>Использовать IP-адрес компьютера, который подключается к системе вместо имени машины. Это используется, чтобы предотвратить попытки подключения к незапущенному интерфейсу. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-willing"
><option
>Willing</option
></term>
<listitem>
<para
>Задаёт программу, которая запускается (от имени <systemitem class="username"
>root</systemitem
>), когда система получает широковещательный или прямой запрос &XDMCP; (DirectQuery/BroadcastQuery) и должна предоставить возможность управления дисплеем через &XDMCP;. Вывод этой программы может показываться в окне выбора машины. Если программа не указана, посылается строка <quote
>Willing to manage</quote
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="kdmrc-shutdown">
<title
>Параметры секции [Shutdown] файла &kdmrc;</title>

<para
>Секция содержит параметры, связанные с выключением системы. </para>

<variablelist>

<varlistentry>
<term id="option-haltcmd"
><option
>HaltCmd</option
></term>
<listitem>
<para
>Команда останова/выключения системы. </para
><para
>По умолчанию установлено значение, подходящее для системы, на которой был собран &kdm;, например, <command
>/sbin/shutdown&nbsp;<option
>-h</option
>&nbsp;<parameter
>now</parameter
></command
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-rebootcmd"
><option
>RebootCmd</option
></term>
<listitem>
<para
>Команда перезагрузки системы. </para
><para
>По умолчанию установлено значение, подходящее для системы, на которой был собран &kdm;, например, <command
>/sbin/shutdown&nbsp;<option
>-r</option
>&nbsp;<parameter
>now</parameter
></command
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowfifo"
><option
>AllowFifo</option
></term>
<listitem>
<para
>Определяет, разрешено ли выключать систему через глобальный управляющий канал <acronym
>FiFo</acronym
>. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowfifonow"
><option
>AllowFifoNow</option
></term>
<listitem>
<para
>Определяет, разрешено ли прерывать запущенные сеансы при выключении системы через глобальный управляющий канал <acronym
>FiFo</acronym
>. </para
><para
>Если параметр <option
>AllowFifo</option
> отключен, этот параметр ни на что не влияет. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-bootmanager"
><option
>BootManager</option
></term>
<listitem>
<para
>Менеджер загрузки системы, который будет использоваться для вывода параметров загрузки в диалоге завершения работы. </para>
<variablelist>
<varlistentry>
<term
><parameter
>None</parameter
></term>
<listitem
><para
>Нет менеджера загрузки</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Grub</parameter
></term>
<listitem
><para
>Загрузчик Grub</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Lilo</parameter
></term>
<listitem
><para
>Загрузчик Lilo (только Linux i386 и x86-64)</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <quote
>None</quote
>.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="kdmrc-core">
<title
>Параметры класса секций [X-:*-Core] файла &kdmrc;</title>

<para
>Секции этого класса содержат настройки ядра &kdm;. </para>

<variablelist>

<varlistentry>
<term id="option-opendelay"
><option
>OpenDelay</option
></term>
<listitem>
<para
>См. параметр <option
>OpenRepeat</option
>. </para>
<para
>Значение по умолчанию — <quote
>15</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-opentimeout"
><option
>OpenTimeout</option
></term>
<listitem>
<para
>См. параметр <option
>OpenRepeat</option
>. </para>
<para
>Значение по умолчанию — <parameter
>120</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-openrepeat"
><option
>OpenRepeat</option
></term>
<listitem>
<para
>Эти параметры определяют поведение &kdm; при установке соединения с Х-сервером. <option
>OpenDelay</option
> задаёт задержку (в секундах) между попытками, <option
>OpenRepeat</option
> — количество попыток, <option
>OpenTimeout</option
> — время, в течение которого система будет пытаться установить соединение. Если было сделано количество попыток, указанное в <option
>OpenRepeat</option
>, или прошло время, указанное в <option
>OpenTimeout</option
>, подключение считается неудавшимся. </para>
<para
>Значение по умолчанию — <parameter
>5</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-startattempts"
><option
>StartAttempts</option
></term>
<listitem>
<para
>Определяет количество попыток пуска «чужих» дисплеев из списка <option
>StaticServers</option
> перед их отключением. Для локальных дисплеев число попыток — 1. Для дисплеев, работающих по протоколу &XDMCP;, это число зависит от программы-клиента (если Х-сервер не был запущен с параметром <option
>-once</option
>). </para>
<para
>Значение по умолчанию — <parameter
>4</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-serverattempts"
><option
>ServerAttempts</option
></term>
<listitem>
<para
>Определяет количество попыток запуска Х-сервера.Под запуском понимается выполнение программы и ожидание её завершения. </para>
<para
>Значение по умолчанию — <parameter
>1</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-servertimeout"
><option
>ServerTimeout</option
></term>
<listitem>
<para
>Определяет время (в секундах), в течение которого &kdm; будет ожидать запуска Х-сервера. </para>
<para
>Значение по умолчанию — <quote
>15</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-servercmd"
><option
>ServerCmd</option
></term>
<listitem>
<para
>Командная строка запуска X-сервера без номера дисплея и указания виртуального терминала (<acronym
>VT</acronym
>). </para
><para
>По умолчанию установлено значение, имеющее смысл для системы, на которой был собран &kdm;, например, <command
>/usr/X11R6/bin/X</command
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-serverargslocal"
><option
>ServerArgsLocal</option
></term>
<listitem>
<para
>Дополнительные параметры X-серверов локальных сеансов. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-serverargsremote"
><option
>ServerArgsRemote</option
></term>
<listitem>
<para
>Дополнительные параметры X-серверов удалённых сеансов. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-servervt"
><option
>ServerVT</option
></term>
<listitem>
<para
>Виртуальный терминал, на котором должен работать X-сервер. Вместо данного параметра должен использоваться <option
>ServerVTs</option
>. Если параметру не присваивать значение, &kdm; сделает это автоматически. Значение <literal
>-1</literal
> запрещает назначение виртуального терминала (это требуется при наличии нескольких физических консолей). На данный момент применим только к ОС Linux. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-servertty"
><option
>ServerTTY</option
></term>
<listitem>
<para
>Данный параметр используется в случае, когда &kdm; или <acronym
>ОС</acronym
> не поддерживают виртуальные терминалы (<acronym
>VT</acronym
>). На данный момент применим ко всем <acronym
>ОС</acronym
>, кроме Linux. </para
><para
>Когда &kdm; переходит в консольный режим, он начинает следить за данной линией <acronym
>TTY</acronym
> (указывается без префикса <literal
>/dev/</literal
>). Если линия неактивна в течение некоторого времени, &kdm; снова возвращается к графическому диалогу входа в систему. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-pinginterval"
><option
>PingInterval</option
></term>
<listitem>
<para
>См. параметр <option
>PingTimeout</option
>. </para>
<para
>Значение по умолчанию — <parameter
>5</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-pingtimeout"
><option
>PingTimeout</option
></term>
<listitem>
<para
>Чтобы определить, доступны ли <emphasis
>удалённые</emphasis
> дисплеи, &kdm; периодически опрашивает их. Параметр <option
>PingInterval</option
> определяет интервал между запросами (в минутах), <option
>PingTimeout</option
> задаёт время (в минутах), в течение которого &kdm; будет ожидать ответа. Если ответ не был получен, сеанс считается неработающим и прерывается. </para
><para
>Если вы часто используете Х-терминалы, связь которых с управляющей машиной может прерываться, возможно, следует увеличить время ожидания. Однако при этом, если произойдёт выключение терминала, сеанс некоторое время будет существовать. </para>
<para
>Значение по умолчанию — <parameter
>5</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-terminateserver"
><option
>TerminateServer</option
></term>
<listitem>
<para
>Определяет, будет ли &kdm; заново запускать локальный Х-сервер после завершения сеанса. Используйте этот параметр, если при работе Х-сервера происходит утечка памяти или сбой системы. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-resetsignal"
><option
>ResetSignal</option
></term>
<listitem>
<para
>Номер системного сигнала, который будет использоваться для перезапуска локального Х-сервера. </para>
<para
>Значение по умолчанию — <quote
>1 (SIGHUP)</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-termsignal"
><option
>TermSignal</option
></term>
<listitem>
<para
>Номер системного сигнала, который будет использоваться для остановки локального Х-сервера. </para>
<para
>Значение по умолчанию — <quote
>15 (SIGTERM)</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-authorize"
><option
>Authorize</option
></term>
<listitem>
<para
>Определяет, будет ли &kdm; использовать авторизацию при подключениях к <emphasis
>локальным</emphasis
> Х-серверам. Дисплеи &XDMCP; сами определяют, будет ли использована авторизация; удалённые дисплеи, работающие не через &XDMCP;, авторизацию не поддерживают. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-authnames"
><option
>AuthNames</option
></term>
<listitem>
<para
>Если параметр <option
>Authorize</option
> установлен в «true», kdm будет использовать механизмы авторизации, перечисленные здесь. Авторизацию по методу MIT-MAGIC-COOKIE-1 можно использовать всегда, доступность методов XDM-AUTHORIZATION-1, SUN-DES-1 и MIT-KERBEROS-5 определяется параметрами, заданными при сборке программы. </para>
<para
>Значение по умолчанию — <quote
>DEF_AUTH_NAME</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-resetforauth"
><option
>ResetForAuth</option
></term>
<listitem>
<para
>Некоторые <emphasis
>старые</emphasis
> версии Х-серверов перечитывают файл авторизации при перезапуске, а не во время подключения. Так как &kdm; создаёт информацию об авторизации перед подключением к дисплею, такой Х-сервер будет работать с, возможно, устаревшей информацией. Если используется этот параметр, &kdm; будет отправлять Х-серверу сигнал SIGHUP. При этом Х-сервер перезапустится и считает обновлённую информацию. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-authfile"
><option
>AuthFile</option
></term>
<listitem>
<para
>Через указанный файл &kdm; и Х-сервер будут обмениваться информацией о авторизации (если Х-сервер был запущен с параметром <option
>-auth</option
>). Право записи в каталог с этим файлом должно быть ограничено, так как при удалении файла механизм авторизации Х-сервера отключается. Если значение не указано, файл со случайно сгенерированным именем будет создан в каталоге <option
>AuthDir</option
>. Имя файла будет содержать имя дисплея. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-resources"
><option
>Resources</option
></term>
<listitem>
<para
>Задаёт файл, который программа <command
>xrdb</command
> будет применять в качестве файла ресурсов к корневому окну экрана с номером 0. Под словом «ресурсы» понимаются специфические настройки, с помощью которых можно определить поведение Х-сервера в мельчайших деталях. Обычно файлы ресурсов Х-сервера не влияют на программы KDE, так что этот параметр может понадобиться только в случае, когда ресурсы использует программа, указанная в параметре <option
>Setup</option
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-xrdb"
><option
>Xrdb</option
></term>
<listitem>
<para
>Программа <command
>xrdb</command
> для считывания и анализа файла X-ресурсов, указанного в параметре <option
>Resources</option
>. </para>
<para
>Значение по умолчанию — <quote
>${<envar
>x_bindir</envar
>}/xrdb</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-setup"
><option
>Setup</option
></term>
<listitem>
<para
>Команда, выполняемая (под учётной записью <systemitem class="username"
>root</systemitem
>) перед выводом окна приветствия. Она может использоваться для изменения оформления вокруг окна приветствия или открытия других окон (например, <command
>xconsole</command
>). Её общепринятое название — <command
>Xsetup</command
>. См. <xref linkend="kdmrc-xsetup"/>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-startup"
><option
>Startup</option
></term>
<listitem>
<para
>Команда, выполняемая (под учётной записью <systemitem class="username"
>root</systemitem
>) после удачного прохождения пользователем аутентификации. Её общепринятое название — <command
>Xstartup</command
>. См. <xref linkend="kdmrc-xstartup"/>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-reset"
><option
>Reset</option
></term>
<listitem>
<para
>Команда, выполняемая (под учётной записью <systemitem class="username"
>root</systemitem
>) после завершения сеанса. Её общепринятое название — <command
>Xreset</command
>. См. <xref linkend="kdmrc-xreset"/>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-session"
><option
>Session</option
></term>
<listitem>
<para
>Команда сеанса. Выполняется под учётной записью пользователя — владельца сеансом. Её общепринятое название — <command
>Xsession</command
>. См. <xref linkend="kdmrc-xsession"/>. </para>
<para
>Значение по умолчанию — <quote
>${<envar
>x_bindir</envar
>}/xterm -ls -T</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-failsafeclient"
><option
>FailsafeClient</option
></term>
<listitem>
<para
>Если программа, указанная в параметре <option
>Session</option
>, завершается с кодом ошибки, &kdm; запускает заданную здесь программу. Она запускается без аргументов; при этом ей доступны переменные окружения, определённые для незапустившегося сеанса (см. <xref linkend="kdmrc-xsession"/>). </para>
<para
>Значение по умолчанию — <quote
>${<envar
>x_bindir</envar
>}/xterm</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-userpath"
><option
>UserPath</option
></term>
<listitem>
<para
>Значение переменной окружения <envar
>PATH</envar
> для сеансов всех пользователей, кроме <systemitem class="username"
>root</systemitem
>. </para
><para
>Значение по умолчанию зависит от того, на какой системе был собран &kdm;. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-systempath"
><option
>SystemPath</option
></term>
<listitem>
<para
>Значение переменной <envar
>PATH</envar
> для программ, запущенных не в сеансах <systemitem class="username"
>root</systemitem
>. По соображениям безопасности советуем вам не включать в этот список <literal
>.</literal
> (соответствует текущему каталогу). </para
><para
>Значение по умолчанию зависит от того, на какой системе был собран &kdm;. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-systemshell"
><option
>SystemShell</option
></term>
<listitem>
<para
>Значение переменной окружения <envar
>SHELL</envar
>, относящееся ко всем программам, кроме указанной в параметре <option
>Session</option
>. </para>
<para
>Значение по умолчанию — <quote
>/bin/sh</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-userauthdir"
><option
>UserAuthDir</option
></term>
<listitem>
<para
>Если &kdm; не может создать обычный файл авторизации пользователя, в указанном здесь каталоге создаётся файл с уникальным именем. При этом значение переменной окружения <envar
>XAUTHORITY</envar
> будет изменено на путь к этому файлу. </para>
<para
>Значение по умолчанию — <quote
>/tmp</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autorelogin"
><option
>AutoReLogin</option
></term>
<listitem>
<para
>Если используется этот параметр, при сбое Х-сервера (или при его выключении комбинацией клавиш Alt+Ctrl+BackSpace) &kdm; будет автоматически запускать новый сеанс. Обратите внимание, что использование этой возможности создаёт брешь в политике безопасности: злоумышленник может обойти программу, блокирующую экран (если не используется программа блокирования &kde;). </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowrootlogin"
><option
>AllowRootLogin</option
></term>
<listitem>
<para
>Пользователь с номером (UID) 0 (обычно его имя — <systemitem class="username"
>root</systemitem
>) может входить в систему через kdm, только если параметр включен. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allownullpasswd"
><option
>AllowNullPasswd</option
></term>
<listitem>
<para
>Если параметр отключен, пользователи с пустыми паролями не смогут войти в систему. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowshutdown"
><option
>AllowShutdown</option
></term>
<listitem>
<para
>Определяет, каким пользователям разрешено выключать систему. Это относится к выключению, как через окно приглашения, так и через канал <acronym
>FiFo</acronym
>. </para>
<variablelist>
<varlistentry>
<term
><parameter
>None</parameter
></term>
<listitem
><para
>меню <guibutton
>Выключить...</guibutton
> вообще не доступно</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Root</parameter
></term>
<listitem
><para
>чтобы выключить компьютер, пользователь должен ввести пароль <systemitem class="username"
>root</systemitem
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>All</parameter
></term>
<listitem
><para
>любой пользователь может выключить компьютер</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <parameter
>All</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowsdforcenow"
><option
>AllowSdForceNow</option
></term>
<listitem>
<para
>Определяет, каким пользователям разрешено выключать компьютер при наличии активных сеансов. </para>
<variablelist>
<varlistentry>
<term
><parameter
>None</parameter
></term>
<listitem
><para
>отключать систему при наличии активных сеансов нельзя никому</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Root</parameter
></term>
<listitem
><para
>чтобы выключить компьютер при наличии активных сеансов, пользователь должен ввести пароль <systemitem class="username"
>root</systemitem
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>All</parameter
></term>
<listitem
><para
>любой пользователь может выключать компьютер при наличии активных сеансов</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <parameter
>All</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-defaultsdmode"
><option
>DefaultSdMode</option
></term>
<listitem>
<para
>Выбор условий/времени выключения системы по умолчанию. </para>
<variablelist>
<varlistentry>
<term
><parameter
>Schedule</parameter
></term>
<listitem
><para
>выключать после завершения всех сеансов</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>TryNow</parameter
></term>
<listitem
><para
>выключать, только если не запущено ни одного сеанса</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>ForceNow</parameter
></term>
<listitem
><para
>выключать без всяких условий</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <parameter
>Schedule</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-scheduledsd"
><option
>ScheduledSd</option
></term>
<listitem>
<para
>Определяет, как будут выводится уведомления при отключении по расписанию: </para>
<variablelist>
<varlistentry>
<term
><parameter
>Never</parameter
></term>
<listitem
><para
>выводиться не будут</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Optional</parameter
></term>
<listitem
><para
>в простых диалоговых окнах уведомления будет показываться кнопка</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Always</parameter
></term>
<listitem
><para
>вне зависимости от простых диалоговых окон</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <parameter
>Never</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-nopassenable"
><option
>NoPassEnable</option
></term>
<listitem>
<para
>Включить вход в систему пользователей без пароля через этот дисплей. <emphasis
>Используйте с особой осторожностью!</emphasis
> </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-nopassusers"
><option
>NoPassUsers</option
></term>
<listitem>
<para
>Список пользователей, которым разрешён вход в систему без пароля. Пункты, начинающиеся с <literal
>@</literal
>, соответствуют группе пользователей. Символ <literal
>*</literal
> соответствует всем пользователям, кроме пользователя с номером (UID) = 0 (обычно это <systemitem class="username"
>root</systemitem
>). <emphasis
>Ни в коем случае</emphasis
> не включайте в этот список пользователя <systemitem class="username"
>root</systemitem
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autologinenable"
><option
>AutoLoginEnable</option
></term>
<listitem>
<para
>Разрешить автоматический вход в систему через этот дисплей. <emphasis
>Используйте с особой осторожностью!</emphasis
> </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autologinagain"
><option
>AutoLoginAgain</option
></term>
<listitem>
<para
>Если значение — true, после выхода из среды выполняется автоматический вход. Если false, автоматический вход выполняется только во время запуска сеанса дисплея. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autologindelay"
><option
>AutoLoginDelay</option
></term>
<listitem>
<para
>Задержка (в секундах) перед автоматическим входом.  </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autologinuser"
><option
>AutoLoginUser</option
></term>
<listitem>
<para
>Имя пользователя, под которым будет осуществляться автоматический вход в систему. <emphasis
>Ни в коем случае</emphasis
> не указывайте здесь <systemitem class="username"
>root</systemitem
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autologinpass"
><option
>AutoLoginPass</option
></term>
<listitem>
<para
>Автоматический вход в систему будет осуществляться с указанным паролем. Используется, <emphasis
>только</emphasis
> если пользователь входит в домен <acronym
>NIS</acronym
> или Kerberos. Если вы включили этот параметр, выполните команду <command
>chmod&nbsp;<option
>600</option
>&nbsp;<filename
>kdmrc</filename
></command
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-autologinlocked"
><option
>AutoLoginLocked</option
></term>
<listitem>
<para
>Если значение — true, автоматически запущенный сеанс сразу же блокируется. Работает только с сеансами KDE. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-sessionsdirs"
><option
>SessionsDirs</option
></term>
<listitem>
<para
>Список каталогов, которые содержат определения типов сеансов. </para>
<para
>Значение по умолчанию — <quote
>${<envar
>kde_datadir</envar
>}/kdm/sessions</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-clientlogfile"
><option
>ClientLogFile</option
></term>
<listitem>
<para
>Путь (относительно домашнего каталога пользователя) к файлу, в который будет перенаправляться вывод программы, обеспечивающей работу сеанса. Вместо символов <parameter
>%s</parameter
> будет подставлено имя дисплея. Чтобы указать символ <literal
>%</literal
>, введите <parameter
>%%</parameter
>. </para>
<para
>Значение по умолчанию — <quote
>.xsession-errors</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-usesessreg"
><option
>UseSessReg</option
></term>
<listitem>
<para
>Определяет должен ли &kdm; использовать встроенную регистрацию через utmp/wtmp/lastlog. Если нет, в сценариях <option
>Startup</option
> и <option
>Reset</option
> должна использоваться команда  <command
>sessreg</command
>, а в системах с <acronym
>PAM</acronym
> — модуль pam_lastlog. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="kdmrc-greeter">
<title
>Переменные секции [X-*-Greeter] файла &kdmrc;</title>

<para
>Этот класс секций содержит настройки интерфейса &kdm; (приглашения). </para>

<variablelist>

<varlistentry>
<term id="option-guistyle"
><option
>GUIStyle</option
></term>
<listitem>
<para
>Определяет стиль графических элементов, которые будут использоваться в окне приглашения. Если значение не задано, будет применена тема <literal
>Plastik</literal
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-colorscheme"
><option
>ColorScheme</option
></term>
<listitem>
<para
>Определяет цветовую схему графических элементов, которые будут использоваться в окне приглашения. Если значение не задано, будет применена схема, определяющая желтовато-серый вид с элементами синего и жёлтого. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-logoarea"
><option
>LogoArea</option
></term>
<listitem>
<para
>Определяет, что будет находиться в области окна справа от полей ввода (если параметр  <option
>UserList</option
> отключен) или над ними (если параметр  <option
>UserList</option
> включен). </para>
<variablelist>
<varlistentry>
<term
><parameter
>None</parameter
></term>
<listitem
><para
>область будет пустой</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Logo</parameter
></term>
<listitem
><para
>изображение, путь к которому задаётся параметром <option
>LogoPixmap</option
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Clock</parameter
></term>
<listitem
><para
>аналоговые часы</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <quote
>Clock</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-logopixmap"
><option
>LogoPixmap</option
></term>
<listitem>
<para
>Если <option
>LogoArea</option
>=<parameter
>Logo</parameter
>, то в окне приглашения будет выводиться указанное здесь изображение. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-greeterpos"
><option
>GreeterPos</option
></term>
<listitem>
<para
>Определяет положение (в процентах от размера экрана, в порядке X,Y) центра окна приглашения.  </para>
<para
>Значение по умолчанию — <quote
>50,50</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-greeterscreen"
><option
>GreeterScreen</option
></term>
<listitem>
<para
>Определяет, на каком дисплее будет выводится приглашение в многоэкранных системах. Нумерация, начинающаяся с <parameter
>0</parameter
>, соответствует порядку перечисления в используемом разделе ServerLayout файла <filename
>XF86Config</filename
>. Если установлено значение <parameter
>-1</parameter
>, будет использоваться верхний левый экран, если <parameter
>-2</parameter
>, верхний правый экран. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-greetstring"
><option
>GreetString</option
></term>
<listitem>
<para
>Заголовок окна приглашения. Если значение не указано, заголовок будет пустым. </para
><para
>Следующие комбинации символов система меняет на указанные значения: <variablelist>
<varlistentry>
<term
><parameter
>%d</parameter
></term>
<listitem
><para
>текущий дисплей</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>%h</parameter
></term>
<listitem
><para
>имя компьютера, возможно, с именем домена</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>%n</parameter
></term>
<listitem
><para
>имя компьютера, скорее всего, без имени домена</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>%s</parameter
></term>
<listitem
><para
>операционная система</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>%r</parameter
></term>
<listitem
><para
>версия операционной системы</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>%m</parameter
></term>
<listitem
><para
>архитектура компьютера</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>%%</parameter
></term>
<listitem
><para
>символ <literal
>%</literal
></para
></listitem>
</varlistentry>
</variablelist>
</para>
<para
>Значение по умолчанию — <quote
>Welcome to %s at %n</quote
> (в русифицированной версии — <quote
>Добро пожаловать в %s на %n</quote
>).</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-antialiasing"
><option
>AntiAliasing</option
></term>
<listitem>
<para
>Определяет, будут ли сглажены шрифты надписей окна входа в систему. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-greetfont"
><option
>GreetFont</option
></term>
<listitem>
<para
>Шрифт заголовка окна приглашения. </para>
<para
>Значение по умолчанию — <quote
>Serif, 20, bold</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-stdfont"
><option
>StdFont</option
></term>
<listitem>
<para
>Шрифт текста окна приглашения. </para>
<para
>Значение по умолчанию — <quote
>Sans Serif, 10</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-failfont"
><option
>FailFont</option
></term>
<listitem>
<para
>Шрифт текста окна <quote
>Ошибка входа в систему</quote
>. </para>
<para
>Значение по умолчанию — <quote
>Sans Serif, 10, bold</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-numlock"
><option
>NumLock</option
></term>
<listitem>
<para
>Определяет состояние индикатора Num Lock при выводе окна входа в систему. Возможные значения: </para>
<variablelist>
<varlistentry>
<term
><parameter
>Off</parameter
></term>
<listitem
><para
>выключить</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>On</parameter
></term>
<listitem
><para
>включить</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Keep</parameter
></term>
<listitem
><para
>не изменять</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <quote
>Keep</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-language"
><option
>Language</option
></term>
<listitem>
<para
>Язык, используемый в окне приглашения. Формат значения соответствует формату переменной $<envar
>LC_LANG</envar
>. </para>
<para
>Значение по умолчанию — <quote
>en_US</quote
> (в русифицированной версии — <quote
>ru</quote
>).</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-usercompletion"
><option
>UserCompletion</option
></term>
<listitem>
<para
>Если параметр включен, вводимое имя пользователя будет автоматически дополняться. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-userlist"
><option
>UserList</option
></term>
<listitem>
<para
>Если параметр включен, в окне приглашения будет показываться список реальных имён пользователей системы и поставленных им в соответствие изображений. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-showusers"
><option
>ShowUsers</option
></term>
<listitem>
<para
>Данный параметр определяет содержание списка пользователей (параметр <option
>UserList</option
>) окна входа в систему и/или имена пользователей, подлежащие автодополнению (параметр <option
>UserCompletion</option
>). Если его значение — <literal
>Selected</literal
>, список берётся из параметра <option
>SelectedUsers</option
>. Если — <literal
>NotHidden</literal
>, в список попадают все пользователи системы, исключая перечисленных в параметре <option
>HiddenUsers</option
> и пользователей с UID &gt; <option
>MaxShowUID</option
> и 0 &lt; UID &lt; <option
>MinShowUID</option
>. Элементы списков <option
>SelectedUsers</option
> и <option
>HiddenUsers</option
>, имеющие префикс <literal
>@</literal
>, обозначают группу пользователей. Если включен параметр <option
>SortUsers</option
>, список упорядочивается по алфавиту. </para>
<para
>Значение по умолчанию — <quote
>NotHidden</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-selectedusers"
><option
>SelectedUsers</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>ShowUsers</option
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-hiddenusers"
><option
>HiddenUsers</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>ShowUsers</option
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-minshowuid"
><option
>MinShowUID</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>ShowUsers</option
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-maxshowuid"
><option
>MaxShowUID</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>ShowUsers</option
>. </para>
<para
>Значение по умолчанию — <quote
>65535</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-sortusers"
><option
>SortUsers</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>ShowUsers</option
>. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-facesource"
><option
>FaceSource</option
></term>
<listitem>
<para
>Если включен параметр <option
>UserList</option
>, то этот параметр определяет, откуда &kdm; будет считывать изображения пользователей: </para>
<variablelist>
<varlistentry>
<term
><parameter
>AdminOnly</parameter
></term>
<listitem
><para
>из файла <filename
>&lt;<option
>FaceDir</option
>&gt;/$<envar
>USER</envar
>.face[.icon]</filename
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>PreferAdmin</parameter
></term>
<listitem
><para
>из &lt;<option
>FaceDir</option
>&gt;, если попытка завершилась неудачей, то из $<envar
>HOME</envar
></para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>PreferUser</parameter
></term>
<listitem
><para
>как в предыдущем пункте, но в обратном порядке</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>UserOnly</parameter
></term>
<listitem
><para
>из файла <filename
>$<envar
>HOME</envar
>/.face[.icon]</filename
></para
></listitem>
</varlistentry>
</variablelist>

<para
>Вы можете указать файл в любом формате из тех, которые способен распознать Qt, но имя файла должно соответствовать требованиям &kdm;: <literal
>.face.icon</literal
> — значок 48x48 пикселей, файл <literal
>.face</literal
> — изображение 300x300. Пока большие изображения используются в качестве «запасного варианта» значка (при этом их размер уменьшается), однако в будущем они, возможно, будут показываться в области логотипа. </para>
<para
>Значение по умолчанию — <quote
>AdminOnly</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-facedir"
><option
>FaceDir</option
></term>
<listitem>
<para
>См. комментарий к <option
>FaceSource</option
>. </para>
<para
>Значение по умолчанию — <quote
>${<envar
>kde_datadir</envar
>}/kdm/faces</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-preselectuser"
><option
>PreselectUser</option
></term>
<listitem>
<para
>Определяет, будет ли заранее выбран какой-либо пользователь для входа в систему, и если да, то какой. </para>
<variablelist>
<varlistentry>
<term
><parameter
>None</parameter
></term>
<listitem
><para
>не выбирать пользователя заранее</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Previous</parameter
></term>
<listitem
><para
>последний пользователь, успешно вошедший в систему</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>Default</parameter
></term>
<listitem
><para
>имя пользователя определяется значением параметра <option
>DefaultUser</option
></para
></listitem>
</varlistentry>
</variablelist>

<para
>Если параметр <option
>FocusPasswd</option
> включен и пользователь выбирается автоматически, курсор устанавливается в поле ввода пароля. </para>
<note
><para
>Автоматический выбор имени пользователя является брешью в безопасности, так как потенциальный взломщик получает действительное имя пользователя, и ему остаётся <quote
>только</quote
> подобрать пароль. С другой стороны, в <option
>DefaultUser</option
> вы можете указать имя пользователя, которого нет в системе.</para
></note>
 
<para
>Значение по умолчанию — <quote
>None</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-defaultuser"
><option
>DefaultUser</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>PreselectUser</option
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-focuspasswd"
><option
>FocusPasswd</option
></term>
<listitem>
<para
>См. комментарий к параметру <option
>PreselectUser</option
>. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-echomode"
><option
>EchoMode</option
></term>
<listitem>
<para
>Здесь вы можете указать, что будет выводится в поле ввода пароля вместо введённого текста: </para>
<variablelist>
<varlistentry>
<term
><parameter
>OneStar</parameter
></term>
<listitem
><para
>Каждый вводимый символ меняется на <literal
>*</literal
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>ThreeStars</parameter
></term>
<listitem
><para
>Каждый вводимый символ меняется на <literal
>***</literal
>.</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>NoEcho</parameter
></term>
<listitem
><para
>ничего не выводится, курсор не перемещается</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <quote
>OneStar</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-usebackground"
><option
>UseBackground</option
></term>
<listitem>
<para
>Если параметр включен, &kdm; будет автоматически запускать <command
>krootimage</command
>, чтобы сформировать фоновое изображение, иначе фон устанавливает программа <option
>Setup</option
>. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-backgroundcfg"
><option
>BackgroundCfg</option
></term>
<listitem>
<para
>Задаёт конфигурационный файл <command
>krootimage</command
>. Как и <filename
>kdesktoprc</filename
>, он содержит секцию <literal
>[Desktop0]</literal
>. Если вы не нашли описания параметров, попытайтесь угадать их значение или используйте Центр управления KDE. </para>
<para
>Значение по умолчанию — <quote
>${<envar
>kde_confdir</envar
>}/kdm/backgroundrc</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-grabserver"
><option
>GrabServer</option
></term>
<listitem>
<para
>Чтобы увеличить безопасность системы, при выводе окна приглашения KDM не позволяет другим программам получать данные от Х-сервера и с клавиатуры. Если этот параметр включен, получение данных от Х-сервера другими программами будет невозможно до запуска сеанса, иначе оно становится доступным при блокировании чтения с клавиатуры. </para>
<note
><para
>Если этот параметр включен, <option
>UseBackground</option
> и <option
>Setup</option
> считаются отключёнными.</para
></note>
 
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-grabtimeout"
><option
>GrabTimeout</option
></term>
<listitem>
<para
>Этот параметр определяет максимальное время, в течение которого &kdm; будет пытаться заблокировать чтение данных с клавиатуры другими программами. Эти попытки могут закончиться неудачей, если клавиатура или Х-сервер уже заблокирован другим Х-клиентом, или задержки при ответах других компьютеров из сети слишком высоки. Будьте осторожны, увеличивая значение этого параметра: в это время может быть выведено «поддельное» окно, похожее на окно приглашения, но принадлежащее другой программе. Если блокирование не удалось, &kdm; перезапускает Х-сервер (если это возможно) и сеанс пользователя. </para>
<para
>Значение по умолчанию — <parameter
>3</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-authcomplain"
><option
>AuthComplain</option
></term>
<listitem>
<para
>Предупреждать, если Х-сервер не авторизовал дисплей. Возможные причины: <itemizedlist>
 <listitem
><para
>локальный Х-сервер не может создать файл авторизации, </para
></listitem>
 <listitem
><para
>удалённый дисплей, соединённый по &XDMCP;, не требует авторизации, или </para
></listitem>
 <listitem
><para
>дисплей в списке <option
>StaticServers</option
> указан как «чужой». </para
></listitem>
</itemizedlist>
</para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-loginmode"
><option
>LoginMode</option
></term>
<listitem>
<para
>Задаёт, в каком режиме выводится окно входа в систему: в режиме выбора машины (удалённый доступ) или в режиме входа в систему (локально), и способ переключения режимов. </para>
<variablelist>
<varlistentry>
<term
><parameter
>LocalOnly</parameter
></term>
<listitem
><para
>доступен только вход в локальную систему</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>DefaultLocal</parameter
></term>
<listitem
><para
>запускается в локальном режиме, но возможен переход в режим удалённого доступа</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>DefaultRemote</parameter
></term>
<listitem
><para
>как в предыдущем пункте, но в обратном порядке</para
></listitem>
</varlistentry>
<varlistentry>
<term
><parameter
>RemoteOnly</parameter
></term>
<listitem
><para
>возможен только выбор удалённой машины</para
></listitem>
</varlistentry>
</variablelist>
<para
>Значение по умолчанию — <quote
>LocalOnly</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-chooserhosts"
><option
>ChooserHosts</option
></term>
<listitem>
<para
>Список имён машин, которые будут автоматически добавлены в меню удалённого доступа. Если указан специальный символ <parameter
>*</parameter
>, в список будут добавлены все машины, которые ответили на широковещательный запрос. Если значение параметра  <option
>LoginMode</option
> установлено в <literal
>LocalOnly</literal
>, не имеет значения. </para>
<para
>Значение по умолчанию — <quote
>*</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-forgingseed"
><option
>ForgingSeed</option
></term>
<listitem>
<para
>Указанное число будет использоваться в качестве начального значения («seed») генератора случайных чисел при искажении сохранённых типов сеансов и т.п., принадлежащих неизвестным пользователям. Это сделано для того, чтобы помешать взломщику выяснить имена пользователей системы. Число должно быть случайным, но одним для всего домена. </para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-showlog"
><option
>ShowLog</option
></term>
<listitem>
<para
>Если параметр включен, будет использоваться встроенное приложение &kdm;, <command
>xconsole</command
>. Обратите внимание, что программа не может работать на нескольких дисплеях одновременно. Параметр доступен только если &kdm; был собран с параметром <option
>--enable-kdm-xconsole</option
>. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-logsource"
><option
>LogSource</option
></term>
<listitem>
<para
>Источник данных встроенного приложения &kdm; <command
>xconsole</command
>. Если значение не указано, происходит перенаправление журнала консоли из <filename
>/dev/console</filename
>. Работает только при включённом параметре  <option
>ShowLog</option
>. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-pluginslogin"
><option
>PluginsLogin</option
></term>
<listitem>
<para
>Задаёт подключаемые модули окна входа в систему, обеспечивающие взаимодействие с пользователем. Вначале выбирается первая запись. Каждый модуль имеет имя. Полный путь к модулю: <filename
>$<envar
>kde_modulesdir</envar
>/kgreet_<replaceable
>имя_модуля</replaceable
></filename
>. </para
><para
>Функция модулей состоит в получении данных, авторизирующих пользователя (имени и пароля). С &kde; поставляется только один модуль — <literal
>classic</literal
>; его внешний вид (форма для ввода имени пользователя и пароля) вам, скорее всего, хорошо известен. </para>
<para
>Значение по умолчанию — <quote
>classic</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-pluginsshutdown"
><option
>PluginsShutdown</option
></term>
<listitem>
<para
>То же, что <option
>PluginsLogin</option
>, но для диалогового окна выключения системы. </para>
<para
>Значение по умолчанию — <quote
>classic</quote
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-pluginoptions"
><option
>PluginOptions</option
></term>
<listitem>
<para
>Список параметров в формате <replaceable
>параметр</replaceable
><literal
>=</literal
><replaceable
>значение</replaceable
>. Сведения о настройке модулей выходят за пределы этого руководства. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowconsole"
><option
>AllowConsole</option
></term>
<listitem>
<para
>Показывает команду <guilabel
>Консольный вход</guilabel
> меню программы приветствия (если настроены параметры <option
>ServerTTY</option
>/<option
>ConsoleTTYs</option
>). </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-allowclose"
><option
>AllowClose</option
></term>
<listitem>
<para
>Если включено, при входе в систему будет доступна возможность <guilabel
>Перезапустить Х-сервер</guilabel
>/<guilabel
>Закрыть соединение</guilabel
>. </para>
<para
>Значение по умолчанию — <parameter
>true</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-preloader"
><option
>Preloader</option
></term>
<listitem>
<para
>Указанная здесь программа будет выполняться во время показа приглашения. Предполагается, что она будет подгружать механизмы, обеспечивающие работу сеанса. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-usetheme"
><option
>UseTheme</option
></term>
<listitem>
<para
>Определяет, будет ли к окну приглашения применена какая-либо тема. </para>
<para
>Значение по умолчанию — <parameter
>false</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term id="option-theme"
><option
>Theme</option
></term>
<listitem>
<para
>Указанная тема будет применена к окну приглашения. Значение — путь к каталогу или к файлу XML. </para>
<para
>Значение по умолчанию — пустая строка.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>



</sect1>

<sect1 id="kdmrc-xservers">
<title
>Как указать программе на постоянные Х-серверы</title>

<para
>Список <option
>StaticServers</option
> содержит дисплеи, которые управляются без &XDMCP;. Обычно этот метод управления используется только для локальных X-серверов, запускаемых &kdm;. В то же время &kdm; может управлять отдельно работающими («чужими») X-серверами: как локальными, так и удалёнными.</para>

<para
>Cинтаксис для всех X-серверов следующий: <screen>
<userinput
><replaceable
>Имя&nbsp;дисплея</replaceable
>&nbsp;[<literal
>_</literal
><replaceable
>Класс&nbsp;дисплея</replaceable
>]</userinput>
</screen
>. Удалённые дисплеи отличаются наличием названия узла сети в своём названии, возможно <literal
>localhost</literal
>.</para>

<para
><replaceable
>Имя дисплея</replaceable
> должно быть строкой, которую можно указать после параметра <option
>-display</option
> программы Х. Эта строка используется при формировании названий секций, специфичных для дисплеев. Имена дисплеев &XDMCP; получается путём обработки адреса, полученного при разрешении имени узла. Префикс <literal
>localhost</literal
> <emphasis
>не</emphasis
> удаляется из имён локальных дисплеев &XDMCP;, чтобы их можно было отличить от Х-серверов, запущенных &kdm;.</para>

<para
>Значение <replaceable
>Класса дисплея</replaceable
> также используется в секциях, специфических для дисплея. Это может быть полезным, если программе доступно большое количество похожих дисплеев, и вы хотите применить какие-либо параметры к группе дисплеев. При использовании &XDMCP; класс дисплея указывать необходимо, поэтому вам следует узнать класс терминала Х в его руководстве. Также вы можете запустить &kdm; в режиме отладки и найти в его выводе строку, в которой указан класс дисплея (<command
>grep</command
> <quote
>class</quote
>).</para>

<para
>Дисплеи, перечисленные в списке <option
>ReserveServers</option
>, будут запускаться не при старте &kdm;, а по запросу через сокет или именованный канал (<acronym
>FiFo</acronym
>). Если список не пуст, меню &kdm; будет содержать в конце команду <guilabel
>Начать новый сеанс</guilabel
>. С помощью неё можно активировать зарезервированный дисплей с новый сеансом. В этом случае монитор переключится на выбранный дисплей, и в течение минуты будет доступен вход в систему. При отсутствии доступных дисплеев, команда меню становится неактивной.</para>

<para
>Во время запуска сеанса &kdm; устанавливает данные авторизации X-сервера. Локальным серверам они передаются в командной строке запуска X-сервера: <command
><option
>-auth</option
>&nbsp;<filename
><replaceable
>filename</replaceable
></filename
></command
>. Серверам, работающим по протоколу &XDMCP;, — сообщением <quote
>Accept</quote
> этого протокола.</para>

</sect1>

<sect1 id="kdmrc-xaccess">
<title
>Управление доступом через &XDMCP;</title>

<para
>В файле, имя которого передаётся через параметр <option
>AccessFile</option
>, находится информация, которую &kdm; использует для управления подключениями дисплеев, использующих &XDMCP;. Файл содержит записи четырёх типов: записи, управляющие ответами на <quote
>прямые</quote
> (Direct) и <quote
>широковещательные</quote
> (Broadcast)запросы; записи, управляющие ответами на <quote
>непрямые</quote
> (Indirect) запросы; макроопределения записей предыдущего типа и записи, определяющие, через какие сетевые интерфейсы &kdm; будет принимать запросы &XDMCP;. Пустые строки и строки, которые начинаются с символа <literal
>#</literal
> (комментарии) игнорируются. Строка, следующая за символами <literal
>\</literal
>, также будет проигнорирована. Благодаря этому, список узлов, запрашивающих непрямое подключение, может занимать несколько строк. </para>

<para
>Записи <quote
>Direct</quote
> включают имя машины или шаблон. Указанная строка будет сравниваться с именем машины, которой принадлежит дисплей. Шаблоны отличаются от имён наличием одного или нескольких спецсимволов: <literal
>*</literal
> — любая последовательность символов (возможно, пустая), <literal
>?</literal
> — один символ (любой). Если запись является именем машины, происходит сравнение с сетевыми адресами, так что вы можете использовать любое имя, которое может быть переведено в корректный сетевой адрес. Обратите внимание, что используется только первый сетевой адрес, соответствующий имени машины. Имена машин, возвращаемые по запросам &XDMCP;, всегда содержат имя локального домена, даже если обратный поиск возвращает короткое имя. Поэтому при задании локального домена вы можете использовать шаблоны. Если запись начинается с символа <literal
>!</literal
>, соответствующие ей машины будут исключены из списка. Если вы хотите, чтобы программа отвечала только на <quote
>прямые</quote
> запросы, добавьте в конец записи ключевое слово <literal
>NOBROADCAST</literal
>. При этом сервер &kdm; не будет появляться в меню программ выбора машины, которые формируются на основе широковещательных запросов.</para>

<para
>Записи, содержащие ключевое слово <quote
>Indirect</quote
> (настраивают реакцию на непрямые запросы) также содержат имя машины или шаблон, но за ним следует список имён машин, на которые будут перенаправлены запросы, или макрос, который задаёт эти имена. Перед этими записями вы также можете указать символ <literal
>!</literal
> (исключить машины, соответствующие указанной строке). При этом вам следует добавить синтаксически верное имя машины, чтобы программа могла отличить такие записи от настраивающих реакцию на <quote
>прямые</quote
> запросы. Если программа была собрана с поддержкой IPv6, вы можете указывать группу сетевых адресов. Если запись содержит ключевое слово <literal
>CHOOSER</literal
>, &kdm; не перенаправляет запросы, а выводит диалоговое окно выбора машины. Программа выбора машины отправляет прямой запрос на каждую машину из списка, и показывает меню всех машин, ответивших на запрос. Если список машин содержит ключевое слово <literal
>BROADCAST</literal
>, программа выбора машины отправит широковещательный запрос. Обратите внимание, что на некоторых системах нельзя делать широковещательные запросы по протоколу UDP. На таких системах эта возможность работать не будет. </para>

<para
>При проверке наличия в списке конкретной машины, все записи проверяются по очереди, и первая соответствующая запись определяет возвращаемое значение.</para>

<para
>Определение макроса содержит имя макроса, список машин и имя другого (добавляемого) макроса. Имена макросов, в отличие от имён машин, начинаются с символа <literal
>%</literal
>.</para>

<para
>Последний тип записи — директива <literal
>LISTEN</literal
>. Синтаксис: <screen>
<userinput
>&nbsp;<literal
>LISTEN</literal
>&nbsp;[<replaceable
>интерфейс</replaceable
>&nbsp;[<replaceable
>список&nbsp;адресов</replaceable
>]]</userinput>
</screen
>. Если указана хотя бы одна запись этого типа, &kdm; будет принимать запросы &XDMCP; только через указанные интерфейсы. <replaceable
>Интерфейс</replaceable
> — имя машины или IP-адрес, представляющий сетевой интерфейс на этой машине, или шаблон <literal
>*</literal
> (соответствует всем доступным сетевым интерфейсам). Если указан список адресов, &kdm; добавляет их к указанному интерфейсу. Для групп адресов IPv6 в качестве диапазона адресов стандарты IANA задают ff0<replaceable
>X</replaceable
>:0:0:0:0:0:0:12b для &XDMCP;. <replaceable
>X</replaceable
> — префикс, соответствующий действительному идентификатору группы (см. IETF RFC 2373 или аналогичный документ по определениям групп). По умолчанию &kdm; прослушивает адрес ff02:0:0:0:0:0:0:12b, что наиболее похоже на поведение подсети, работающей на протоколе IPv4. Если в файле не указано ни одной строки <literal
>LISTEN</literal
>, &kdm; (если он собран с поддержкой IPv6) прослушивает все интерфейсы и присоединяется к группе &XDMCP; IPv6 по умолчанию. Чтобы выключить прослушивание запросов &XDMCP;, вы можете ввести строку <literal
>LISTEN</literal
> без адресов, но лучше использовать параметр секции <literal
>[Xdmcp]</literal
> <option
>Enable</option
>. </para>

</sect1>

<sect1 id="kdm-scripts">
<title
>Дополнительные программы</title>

<para
>Следующие программы запускаются &kdm; на различных этапах сеанса. Чаще всего они являются скриптами оболочки. </para>

<para
>Скрипты, указанные в скриптах Setup, Startup и Reset, выполняются с правами <systemitem class="username"
>root</systemitem
>, так что позаботьтесь об их безопасности. Если сеанс запущен после автоматического входа в систему, им передаётся аргумент <literal
>auto</literal
>, иначе никаких аргументов не передаётся. </para>

<sect2 id="kdmrc-xsetup">
<title
>Программа Setup</title>

<para
>Программа <filename
>Xsetup</filename
> выполняется после запуска (перезапуска) Х-сервера, но перед выводом окна приглашения. С её помощью вы можете изменить фон корневого окна (если параметр <option
>UseBackground</option
> отключен) или вывести на экран какие-либо окна (они будут доступны наряду с окном входа в систему). </para>

<para
>В дополнение к переменным окружения, заданным параметром <option
>ExportList</option
>, устанавливаются следующие переменные:</para>
<variablelist>
 <varlistentry>
  <term
>DISPLAY</term>
  <listitem
><para
>имя дисплея, который будет использоваться</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>PATH</term>
  <listitem
><para
>значение параметра <option
>SystemPath</option
></para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>SHELL</term>
  <listitem
><para
>значение параметра <option
>SystemShell</option
></para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>XAUTHORITY</term>
  <listitem
><para
>пустая строка или содержит путь к файлу авторизации</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>DM_CONTROL</term>
  <listitem
><para
>значение параметра <option
>FifoDir</option
></para
></listitem>
 </varlistentry>
</variablelist>

<para
>Обратите внимание, что &kdm; не позволяет другим программам считывать ввод с клавиатуры. Однако вы сможете управлять ими с помощью мыши; опасайтесь возможных уязвимостей в безопасности. Если включен параметр <option
>GrabServer</option
>, <filename
>Xsetup</filename
> вообще не сможет подключиться к дисплею. Эта программа использует ресурсы, указанные в файле, имя которого задаётся параметром  <option
>Resources</option
>. </para>

</sect2>

<sect2 id="kdmrc-xstartup">
<title
>Программа Startup</title>

<para
>Программа <filename
>Xstartup</filename
> выполняется с правами <systemitem class="username"
>root</systemitem
> при входе пользователя в систему. Она может добавлять записи в журнал <filename
>utmp</filename
> (например, вы можете использовать программу <command
>sessreg</command
>), подключать (монтировать) домашние каталоги пользователей или завершать сеанс при невыполнении некоторых условий (на современных системах эту функцию выполняют модули <acronym
>PAM</acronym
>).</para>

<para
>В дополнение к переменным окружения, заданным параметром <option
>ExportList</option
>, устанавливаются следующие переменные:</para>
<variablelist>
 <varlistentry>
  <term
>DISPLAY</term>
  <listitem
><para
>имя дисплея, который будет использоваться</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>HOME</term>
  <listitem
><para
>домашний каталог пользователя</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>LOGNAME</term>
  <listitem
><para
>имя пользователя</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>USER</term>
  <listitem
><para
>имя пользователя</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>PATH</term>
  <listitem
><para
>значение параметра <option
>SystemPath</option
></para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>SHELL</term>
  <listitem
><para
>значение параметра <option
>SystemShell</option
></para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>XAUTHORITY</term>
  <listitem
><para
>пустая строка или содержит путь к файлу авторизации</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>DM_CONTROL</term>
  <listitem
><para
>значение параметра <option
>FifoDir</option
></para
></listitem>
 </varlistentry>
</variablelist>

<para
>&kdm; ожидает завершения программы и после этого запускает сеанс пользователя. Если программа возвратила ненулевое значение, &kdm; завершает сеанс и предлагает ещё раз войти в систему.</para>

</sect2>

<sect2 id="kdmrc-xsession">
<title
>Программа Session</title>

<para
>Программа <filename
>Xsession</filename
> собственно обеспечивает работу пользователя с компьютером (то есть сам сеанс). Она запускается с правами вошедшего в систему пользователя. В качестве первого аргумента передаётся ключевое слово <literal
>failsafe</literal
>, <literal
>default</literal
>,<literal
>custom</literal
> или (на оболочках, совместимых с bash) строка <command
>eval</command
>.</para>

<para
>В дополнение к переменным окружения, заданным параметром <option
>ExportList</option
>, устанавливаются следующие переменные:</para>
<variablelist>
 <varlistentry>
  <term
>DISPLAY</term>
  <listitem
><para
>имя дисплея, который будет использоваться</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>HOME</term>
  <listitem
><para
>домашний каталог пользователя</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>LOGNAME</term>
  <listitem
><para
>имя пользователя</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>USER</term>
  <listitem
><para
>имя пользователя</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>PATH</term>
  <listitem
><para
>значение параметра <option
>UserPath</option
> (для <systemitem class="username"
>root</systemitem
> — <option
>SystemPath</option
>)</para>
  </listitem>
 </varlistentry>
 <varlistentry>
  <term
>SHELL</term>
  <listitem
><para
>оболочка, используемая пользователем по умолчанию</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>XAUTHORITY</term>
  <listitem
><para
>с помощью этой переменной можно указать путь к файлу авторизации</para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>KRBTKFILE</term>
  <listitem
><para
>имя кэша авторизационных файлов Kerberos4</para>
  </listitem>
 </varlistentry>
 <varlistentry>
  <term
>KRB5CCNAME</term>
  <listitem
><para
>имя кэша авторизационных файлов Kerberos5</para>
  </listitem>
 </varlistentry>
 <varlistentry>
  <term
>DM_CONTROL</term>
  <listitem
><para
>значение параметра <option
>FifoDir</option
></para
></listitem>
 </varlistentry>
 <varlistentry>
  <term
>XDM_MANAGED</term>
  <listitem
><para
>содержит разделённый запятыми список параметров, которые могут использоваться в течение сеанса, например, путь к управляющему каналу <acronym
>FiFo</acronym
> и его особенности, а также данные о подключаемом модуле, используемом при входе в систему.</para>
  </listitem>
 </varlistentry>
 <varlistentry>
  <term
>DESKTOP_SESSION</term>
  <listitem
><para
>выбранный пользователем тип сеанса</para>
  </listitem>
 </varlistentry>
</variablelist>

</sect2>

<sect2 id="kdmrc-xreset">
<title
>Программа Reset</title>

<para
>Программа <filename
>Xreset</filename
> запускается с правами <systemitem class="username"
>root</systemitem
> во время завершения сеанса. Файл должен содержать команды, отменяющие действие <filename
>Xstartup</filename
>: удаляющие записи из <filename
>utmp</filename
> или отключающие домашние каталоги пользователей.</para>

<para
>Программе <filename
>Xreset</filename
> передаются те же параметры, что и <filename
>Xstartup</filename
>. </para>

</sect2>

</sect1>

</chapter>
