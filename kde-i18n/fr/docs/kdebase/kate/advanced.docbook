<chapter id="advanced-editing-tools">
<chapterinfo>
<authorgroup>
<author
>&Anders.Lund; &Anders.Lund.mail;</author>
<author
>&Dominik.Haumann; &Dominik.Haumann.mail;</author>
&traducteurEquipeKDE; 
</authorgroup>
</chapterinfo>
<title
>Outils d'édition avancée</title>

<sect1 id="advanced-editing-tools-comment">

<title
>Commenter / Décommenter</title>

<para
>Les commandes Commenter et Décommenter, disponibles dans le menu <guimenu
>Outils</guimenu
>, permettent d'ajouter ou de supprimer des indicateurs de commentaire à la sélection ou à la ligne actuelle, s'il n'y a pas de texte sélectionné et si le format du texte qu'on modifie prend en charge les commentaires.</para>

<para
>Les règles qui régissent la façon de créer des commentaires étant établies dans les définitions de syntaxe, l'ajout / la suppression de commentaires n'est pas possible si la coloration syntaxique n'est pas activée. </para>

<para
>Certains formats définissent des indicateurs de commentaire sur une seule ligne, d'autres sur plusieurs lignes et d'autres encore, les deux. Si les indicateurs sur plusieurs lignes ne sont pas disponibles, on ne pas décommenter une sélection qui ne contient pas la totalité de sa dernière ligne.</para>

<para
>Si un indicateur de commentaire sur une seule ligne est disponible, le commentaire ligne par ligne aura la préférence là où il est applicable, car ce comportement contribue à éviter des problèmes avec les commentaires imbriqués.</para>

<para
>Lorsqu'on supprime des indicateurs de commentaire, il ne faut sélectionner aucun texte non commenté. Lorsqu'on supprime des indicateurs de commentaire sur plusieurs lignes d'une sélection, tout espace en dehors des indicateurs de commentaire est ignoré.</para>

<para
><indexterm
><primary
>commenter</primary
></indexterm
> Pour placer des indicateurs de commentaire, utilisez la ligne de menu <menuchoice
><guimenu
>Outils</guimenu
> <guimenuitem
>Commenter</guimenuitem
></menuchoice
> ou le raccourci clavier correspondant, par défaut <keycombo action="simul"
>&Ctrl;<keycap
>#</keycap
></keycombo
>.</para>

<para
><indexterm
><primary
>décommenter</primary
></indexterm
> Pour supprimer des indicateurs de commentaire, utilisez la ligne de menu <menuchoice
><guimenu
>Outils</guimenu
> <guimenuitem
>Décommenter</guimenuitem
></menuchoice
> ou le raccourci clavier correspondant, par défaut <keycombo action="simul"
>&Ctrl;&Maj;<keycap
>#</keycap
></keycombo
>.</para>

</sect1>

<sect1 id="advanced-editing-tools-commandline">
<title
>La ligne de commande du composant Éditeur</title>

<para
>Le composant éditeur de Kate offre une ligne de commande interne permettant d'effectuer diverses actions à partir d'une interface graphique minimale. La ligne de commande est un élément de texte situé au bas de la zone d'édition. Pour la voir, cliquez sur <menuchoice
><guimenu
>Affichage</guimenu
><guimenuitem
>Afficher la ligne de commande</guimenuitem
></menuchoice
> ou utilisez le raccourci clavier (par défaut, <keycombo action="simul"
><keycap
>F7</keycap
></keycombo
>). L'éditeur fournit un ensemble de commandes comme décrit ci-dessous. Des commandes additionnelles peuvent être fournies par des modules externes.</para>

<para
>Pour exécuter une commande, saisissez cette dernière, puis appuyez sur la touche Entrée. La ligne de commande indique si elle a abouti et affiche éventuellement un message. Si vous avez saisi la ligne de commande en appuyant sur <keycap
>F7</keycap
>, elle disparaît automatiquement au bout de quelques secondes. Pour effacer le message et saisir une nouvelle commande, appuyez sur <keycap
>F7</keycap
> à nouveau.</para>

<para
>La ligne de commande est dotée d'un système d'aide intégré : exécutez la commande <command
>help</command
> pour démarrer. Pour afficher une liste de toutes les commandes disponibles, saisissez <command
>help list</command
>. Pour afficher l'aide concernant une commande donnée, saisissez <command
>help <replaceable
>commande</replaceable
></command
>.</para>

<para
>Comme la ligne de commande comporte un historique intégré, vous pouvez réutiliser les commandes déjà saisies. Pour parcourir l'historique, utilisez les touches <keycap
>Haut</keycap
> et <keycap
>Bas</keycap
>. Lorsque vous affichez l'historique des commandes, la partie argument de la commande est sélectionnée, ce qui vous permet d'écraser aisément les arguments.</para>

<sect2 id="advanced-editing-tools-commandline-commands">
<title
>Commandes standard de la ligne de commande</title>

<sect3 id="advanced-editing-tools-commandline-commands-configure">
<title
>Commandes pour configurer l'éditeur</title>

<para
>Ces commandes sont fournies par le composant éditeur et permettent de configurer le document actif et son affichage uniquement. Ce comportement est pratique si vous voulez employer un autre paramètre que ceux par défaut, par exemple pour l'indentation. </para>

<variablelist>
<title
>Types d'arguments</title>

<varlistentry>
<term
>BOOLÉEN</term>
<listitem
><para
>On emploie cet argument avec les commandes qui servent à (dés)activer tel ou tel élément. Les valeurs admises sont <userinput
>on</userinput
>, <userinput
>off</userinput
>, <userinput
>true</userinput
>, <userinput
>false</userinput
>, <userinput
>1</userinput
> ou <userinput
>0</userinput
></para
></listitem>
</varlistentry>

<varlistentry>
<term
>ENTIER</term>
<listitem
><para
>Un nombre entier</para
></listitem>
</varlistentry>

<varlistentry>
<term
>CHAÎNE</term>
<listitem
><para
>Une chaîne de caractères</para
></listitem>
</varlistentry>

</variablelist>

<variablelist>

<varlistentry>
<term
><cmdsynopsis
><command
>set-tab-width</command
><arg
>ENTIER largeur</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit la largeur de tabulation au nombre <userinput
>largeur</userinput
></para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-indent-width</command
><arg
>ENTIER largeur</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit la largeur d'indentation au nombre <userinput
>largeur</userinput
>. Utilisée seulement si vous indentez avec des espaces.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-word-wrap-column</command
><arg
>ENTIER largeur</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit la largeur de ligne pour le retour à la ligne forcé à <userinput
>largeur</userinput
>. Utilisé si vous avez choisi le retour à la ligne automatique pour votre texte.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-icon-border</command
><arg
>BOOLÉEN activer</arg
> </cmdsynopsis
></term>
<listitem
><para
>Définit la visibilité de la bordure d'icônes.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-folding-markers</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit la visibilité de la bordure des indicateurs de pliage.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-line-numbers</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit la visibilité du panneau des numéros de ligne.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-replace-tabs</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Si cette option est cochée, les tabulations sont remplacées par des espaces au fur et à mesure que vous saisissez au clavier. </para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-remove-trailing-space</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Si cette option est cochée, les espaces de fin sont supprimés chaque fois que le curseur change de ligne.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-show-tabs</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Si cette option est cochée, les caractères de tabulation et l'espace de fin de ligne seront représentés par un petit point.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-indent-spaces</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Si cette option est cochée, l'éditeur indente avec des espaces <option
>indentation-largeur</option
> pour chaque niveau d'indentation plutôt qu'avec un caractère de tabulation.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-mixed-indent</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Si cette option est cochée, Kate utilise un mélange de tabulations et d'espaces pour l'indentation. Chaque niveau d'indentation aura une largeur <option
>indentation-largeur</option
> et d'autres niveaux d'indentation seront optimisés pour pouvoir utiliser autant de caractères de tabulation que possible.</para>
<para
>Lorsqu'elle est exécutée, cette commande définit en outre l'indentation avec des espaces activée et, si la largeur d'indentation n'est pas spécifiée, elle est définie à la moitié de la <option
>tab-width</option
> du document au moment de l'exécution.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-word-wrap</command
><arg
>BOOLÉEN largeur</arg
></cmdsynopsis
></term>
<listitem
><para
>Active le retour à la ligne dynamique en fonction de <userinput
>activer</userinput
></para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-replace-tabs-save</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Si cette option est cochée, les tabulations sont remplacées par un blanc chaque fois que le document est enregistré.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-remove-trailing-space-save</command
><arg
>BOOLÉEN activer</arg
></cmdsynopsis
></term>
<listitem
><para
>Lorsque cette option est cochée, l'espace de fin est supprimé de chaque ligne chaque fois que le document est enregistré.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-indent-mode</command
><arg
>nom</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit le mode d'indentation automatique à <userinput
>nom</userinput
>. Si <userinput
>nom</userinput
> n'est pas connu, le mode est défini à 'none'. Les modes autorisés sont 'cstyle', 'csands', 'xml', 'python', 'varindent' et 'none'.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>set-highlight</command
><arg
>coloration syntaxique</arg
></cmdsynopsis
></term>
<listitem
><para
>Définit le système de coloration syntaxique pour le document. L'argument doit être un nom de coloration syntaxique autorisé, comme on le voit dans le menu <menuchoice
><guimenu
>Outils</guimenu
><guisubmenu
>Coloration syntaxique</guisubmenu
></menuchoice
>. Cette commande fournit une liste d'autocomplétement pour son argument.</para
></listitem>
</varlistentry>

</variablelist>

</sect3>

<sect3 id="advanced-editing-tools-commandline-commands-edit">
<title
>Commandes d'édition</title>

<para
>Ces commandes modifient le document actuel.</para>

<variablelist>
<varlistentry>
<term
><cmdsynopsis
><command
>indent</command
></cmdsynopsis
></term>
<listitem
><para
>Indente les lignes sélectionnées ou la ligne actuelle.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>unindent</command
></cmdsynopsis
></term>
<listitem
><para
>Désindente les lignes sélectionnées ou la ligne actuelle.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>cleanindent</command
></cmdsynopsis
></term>
<listitem
><para
>Nettoie l'indentation des lignes sélectionnées ou de la ligne actuelle en fonction des paramètres d'indentation du document. </para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>comment</command
></cmdsynopsis
></term>
<listitem
><para
>Insère des indicateurs de commentaire pour créer sur la sélection, les lignes sélectionnées ou la ligne actuelle un commentaire en fonction du format du texte, comme défini par la coloration syntaxique concernant le document.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>uncomment</command
></cmdsynopsis
></term>
<listitem
><para
>Supprime les indicateurs de commentaires de la sélection, des lignes sélectionnées ou de la ligne actuelle en fonction du format du texte, comme défini par la définition de la coloration syntaxique concernant le document.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>kill-line</command
></cmdsynopsis
></term>
<listitem
><para
>Supprime la ligne actuelle.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>replace</command
><arg
>motif</arg
><arg
>remplacement</arg
></cmdsynopsis
></term>
<listitem
><para
>Remplace le texte correspondant à <userinput
>motif</userinput
> par <userinput
>remplacement</userinput
>. Si vous voulez ajouter un blanc dans le <userinput
>motif</userinput
>, vous devez entourer d'apostrophes ou de guillemets à la fois le <userinput
>motif</userinput
> et le <userinput
>remplacement</userinput
>. Si les arguments n'ont pas de guillemets, le premier mot sert de <userinput
>motif</userinput
> et le reste de <userinput
>remplacement</userinput
>. Si <userinput
>remplacement</userinput
> est vide, chaque occurrence de <userinput
>motif</userinput
> est supprimée.</para>
<para
>Vous pouvez définir des drapeaux pour configurer la recherche, en ajoutant un caractère « : » (deux points), suivi d'une ou plusieurs lettres représentant une configuration, ce qui donne la forme <userinput
>replace:options motif remplacement</userinput
>. Les options disponibles sont les suivantes : <variablelist>

<varlistentry>
<term
><userinput
>b</userinput
></term>
<listitem
><para
>Recherche arrière.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>c</userinput
></term>
<listitem
><para
>Recherche à partir de la position du curseur.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>e</userinput
></term>
<listitem
><para
>Recherche dans la sélection uniquement.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>r</userinput
></term>
<listitem
><para
>Recherche sur des expressions rationnelles. Si défini, vous pouvez utiliser <userinput
>\N</userinput
>, où N est un nombre réprésentant des captures dans la chaîne de remplacement.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>s</userinput
></term>
<listitem
><para
>Recherche sensible à la casse.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>p</userinput
></term>
<listitem
><para
>Invite de permission pour remplacer la prochaine occurrence.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>w</userinput
></term>
<listitem
><para
>Correspondance de mots entiers uniquement.</para
></listitem>
</varlistentry>

</variablelist>

</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>date</command
><arg
>format</arg
></cmdsynopsis
></term>
<listitem
><para
>Insère une chaîne date/time comme défini par le format spécifié <userinput
>format</userinput
> ou le format « aaaa-MM-jj hh:mm:ss », si aucun n'est indiqué. Les traductions suivantes sont effectuées lors de l'interprétation de <userinput
>format</userinput
> : <informaltable
> <tgroup cols="2"
> <tbody>
<row
><entry
><literal
>d</literal
></entry
><entry
>Le jour sous la forme d'un nombre sans zéro de début (1-31).</entry
></row>
<row
><entry
><literal
>dd</literal
></entry
><entry
>Le jour sous la forme d'un nombre avec un zéro de début (01-31).</entry
></row>
<row
><entry
><literal
>ddd</literal
></entry
><entry
>Le nom abrégé du jour localisé (par exemple 'Lun'..'Dim').</entry
></row>
<row
><entry
><literal
>dddd</literal
></entry
><entry
>Le nom entier du jour localisé (par exemple 'Lundi'..'Dimanche').</entry
></row>
<row
><entry
><literal
>M</literal
></entry
><entry
>Le mois sous la forme d'un nombre sans zéro de début (1-12).</entry
></row>
<row
><entry
><literal
>MM</literal
></entry
><entry
>Le mois sous la forme d'un nombre avec un zéro de début (01-12).</entry
></row>
<row
><entry
><literal
>MMM</literal
></entry
><entry
>Le nom abrégé du mois localisé (par exemple 'Jan'..'Déc').</entry
></row>
<row
><entry
><literal
>aa</literal
></entry
><entry
>L'année sous la forme d'un nombre à deux chiffres (00-99).</entry
></row>
<row
><entry
><literal
>aaaa</literal
></entry
><entry
>L'année sous la forme d'un nombre à quatre chiffres (1752-8000).</entry
></row>
<row
><entry
><literal
>h</literal
></entry
><entry
>L'heure sans zéro de début (0..23 ou 1..12 en cas d'affichage AM/PM).</entry
></row>
<row
><entry
><literal
>hh</literal
></entry
><entry
>L'heure avec un zéro de début (00..23 ou 01..12 en cas d'affichage AM/PM).</entry
></row>
<row
><entry
><literal
>m</literal
></entry
><entry
>La minute sans zéro de début (0..59).</entry
></row>
<row
><entry
><literal
>mm</literal
></entry
><entry
>La minute avec un zéro de début (00..59).</entry
></row>
<row
><entry
><literal
>s</literal
></entry
><entry
>La seconde sans zéro de début (0..59).</entry
></row>
<row
><entry
><literal
>ss</literal
></entry
><entry
>La seconde avec un zéro de début (00..59).</entry
></row>
<row
><entry
><literal
>z</literal
></entry
><entry
>Les millisecondes sans zéro de début (0..999).</entry
></row>
<row
><entry
><literal
>zzz</literal
></entry
><entry
>Les millisecondes des zéros de début (000..999).</entry
></row>
<row
><entry
><literal
>AP</literal
></entry
><entry
>Utiliser l'affichage AM/PM. AP sera remplacé soit par « AM », soit par « PM ».</entry
></row>
<row
><entry
><literal
>ap</literal
></entry
><entry
>Utiliser l'affichage. ap sera remplacé soit par « am », soit par « pm ».</entry
></row>

</tbody>
</tgroup>
</informaltable>

</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>char</command
><arg
>identifiant</arg
></cmdsynopsis
></term>
<listitem>
<para
>Cette commande permet d'insérer des caractères spéciaux par leur identifiant numérique, sous forme décimale, octale ou hexadécimale. Pour l'utiliser, ouvrez la boîte de dialogue Commandes d'édition, et saisissez <userinput
>char: [numéro]</userinput
> dans la zone de saisie, puis cliquez sur <guibutton
>OK</guibutton
>.</para>

<example>
<title
>Exemples avec <command
>char</command
></title>

<para
>Entrée : <userinput
>char:234</userinput
></para>
<para
>Sortie : <computeroutput
>&#234;</computeroutput
></para>
<para
>Entrée : <userinput
>char:0x1234</userinput
></para>
<para
>Sortie : <computeroutput
>&#x1234;</computeroutput
></para>
</example>

</listitem>
</varlistentry>

<varlistentry>
<term>
<indexterm
><primary
>remplacer, dans le style de sed</primary>
<secondary
>chercher, dans le style de sed</secondary
></indexterm>
<command
>s///[ig]</command
> <command
>%s///[ig]</command
></term>

<listitem>
<para
>Cette commande effectue une opération de recherche / remplacement comme sed dans la ligne actuelle, ou dans tout le fichier (<command
>%s///</command
>).</para>

<para
>En bref, on recherche dans le texte une expression qui correspond au <emphasis
>texte recherché</emphasis
>, l'expression rationnelle entre la première et la deuxième barre oblique. Lorsqu'une correspondance est trouvée, la part de texte correspondant est remplacée par l'expression entre la partie du milieu et la dernière partie de la chaîne. Les parenthèses dans le motif de recherche créent des <emphasis
>références arrière</emphasis
>, c'est-à-dire que la commande se souvient quelle part du motif correspondait dans les parenthèses ; ces chaînes peuvent être réutilisées dans le motif de remplacement, référencées par <userinput
>\1</userinput
> pour la première paire de parenthèses, <userinput
>\2</userinput
> pour la deuxième, etc.</para>

<para
>Pour rechercher une <literal
>(</literal
> ou une <literal
>)</literal
>, vous devez la faire  précéder d'un antislash, qui joue le rôle de <emphasis
>caractère d'échappement</emphasis
> : <userinput
>\(\)</userinput
>.</para>

<para
>Si vous placez un <userinput
>i</userinput
> à la fin de l'expression, l'expression correspondante sera insensible à la casse. Si vous placez un <userinput
>g</userinput
> à la fin, toutes les occurrences du motif seront remplacées, sinon seule la première occurrence est remplacée.</para>

<example>

<title
>Remplacer du texte dans la ligne actuelle</title>

<para
>Votre compilateur préféré vient de s'arrêter en vous indiquant que la classe <classname
>maClasse</classname
> mentionnée à la ligne 3902 de votre fichier source n'est pas définie.</para>

<para
>C'est évidemment <classname
>MaClasse</classname
> ! Vous allez à la ligne 3902 et, au lieu d'essayer de trouver le mot dans le texte, vous ouvrez la boîte de dialogue Commande d'édition, saisissez <userinput
>s/maClasse/MaClasse/i</userinput
>, cliquez sur le bouton <guibutton
>OK</guibutton
>, enregistrez le fichier et compilez &ndash; avec succès, sans l'erreur.</para>

</example>

<example>
<title
>Remplacer du texte dans le fichier entier</title>

<para
>Imaginez que vous avez un fichier dans lequel vous mentionnez plusieurs fois « Mlle Dupont » lorsque quelqu'un entre et vous dit qu'elle vient de se marier avec « M. Martin ». Vous voulez, bien évidemment, remplacer chaque occurrence de « Mlle Dupont » par « Mme Martin ».</para>

<para
>Sur la ligne de commande, saisissez <userinput
>%s/Melle Dupont/Mme Martin/</userinput
> et appuyez sur Entrée. Vous avez terminé.</para>

</example>

<example>
<title
>Un exemple plus avancé</title>

<para
>Cet exemple utilise les <emphasis
>références arrière</emphasis
> ainsi qu'une <emphasis
>classe de caractères</emphasis
> (si vous ne savez pas de quoi il s'agit, reportez-vous à la documentation relative à ce sujet mentionnée ci-dessous).</para>

<para
>Supposons que vous ayez la ligne suivante : <programlisting
>void MyClass::DoStringOps( String      &amp;foo, String &amp;bar String *p, int  &amp;a, int &amp;b )</programlisting>
</para>
<para
>Maintenant, vous vous rendez compte que ce n'est pas du code élégant et décidez que vous voulez utiliser le mot-clé <constant
>const</constant
> pour tous les arguments « adresse de », ceux caractérisés par l'opérateur &amp; avant le nom d'argument. Vous voulez aussi simplifier les espaces, de sorte qu'il n'y a qu'un caractère d'espace entre les mots.</para>

<para
>Ouvrez la boîte de dialogue « Commande d'édition » et saisissez : <userinput
>s/\s+(\w+)\s+(&amp;)/ const \1 \2/g</userinput
>, puis cliquez sur le bouton <guibutton
>OK</guibutton
>. Le <userinput
>g</userinput
> à la fin de l'expression fait recompiler l'expression rationnelle pour chaque occurrence, pour enregistrer les <emphasis
>références arrière</emphasis
>.</para>

<para
>Sortie : <computeroutput
>void MyClass::DoStringOps( const String &amp;foo, const String &amp;bar String *p, const int &amp;a, const int &amp;b )</computeroutput
></para>

<para
>Mission réussie ! Mais que s'est-il passé ? Nous avons recherché des blancs (<literal
>\s+</literal
>), suivis d'un ou plusieurs caractères alphabétiques (<literal
>\w+</literal
>), eux-mêmes suivis d'un autre blanc (<literal
>\s+</literal
>) suivi d'une esperluette. Le processus a enregistré le fragment alphanumérique et l'esperluette pour le réutiliser lors de l'opération de remplacement. Puis, nous avons remplacé la partie correspondante de la ligne par un blanc suivi de « const », suivi d'un blanc, suivi de notre fragment alphanumérique enregistré (<literal
>\1</literal
>), lui-même suivi d'un blanc et de notre esperluette enregistrée (<literal
>\2</literal
>).</para>

<para
>Maintenant, comme dans certains cas, le fragment alphanumérique était « String » et dans d'autres « int », l'utilisation de la classe de caractères <literal
>//w</literal
> et du quantificateur <literal
>+</literal
> a été un grand avantage.</para>

</example>

</listitem>

</varlistentry>

</variablelist>

</sect3>

<sect3 id="advanced-editing-tools-commandline-commands-navigation">
<title
>Commandes de navigation</title>

<variablelist>

<varlistentry>
<term
><cmdsynopsis
><command
>goto</command
><arg
>ENTIER ligne</arg
></cmdsynopsis
></term>
<listitem
><para
>Cette commande permet d'aller jusqu'à la ligne spécifiée.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>find</command
><arg
>motif</arg
></cmdsynopsis
></term>
<listitem
><para
>Cette commande permet d'aller à la première occurrence de <userinput
>motif</userinput
>, en fonction de la configuration. Vous pouvez trouver les occurrences suivantes à l'aide de <menuchoice
><guimenu
>Édition</guimenu
><guimenuitem
>Poursuivre la recherche</guimenuitem
></menuchoice
> (le raccourci par défaut est <keycap
>F3</keycap
>).</para>
<para
>Il est possible de configurer la commande Chercher en ajoutant à la fin un caractère « : », suivi d'une ou plusieurs options. La forme est <userinput
>find:options motif</userinput
>. Les options suivantes sont prises en charge : <variablelist>

<varlistentry>
<term
><userinput
>b</userinput
></term>
<listitem
><para
>Recherche arrière.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>c</userinput
></term>
<listitem
><para
>Recherche à partir de la position du curseur.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>e</userinput
></term>
<listitem
><para
>Recherche dans la sélection uniquement.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>r</userinput
></term>
<listitem
><para
>Recherche sur des expressions rationnelles. Si défini, vous pouvez utiliser <userinput
>\N</userinput
>, où N est un nombre réprésentant des captures dans la chaîne de remplacement.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>s</userinput
></term>
<listitem
><para
>Recherche sensible à la casse.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>w</userinput
></term>
<listitem
><para
>Correspondance de mots entiers uniquement.</para
></listitem>
</varlistentry>

</variablelist>

</para>

</listitem>

</varlistentry>

<varlistentry>
<term
><cmdsynopsis
><command
>ifind</command
><arg
>motif</arg
></cmdsynopsis
></term>
<listitem
><para
>Cette commande fournit une recherche au fur et à mesure de la saisie (« as-you-type »). Vous pouvez configurer le comportement ou la recherche en ajoutant à la fin un caractère « : », suivi d'une ou plusieurs options, comme suit : <userinput
>ifind:options motif</userinput
>. Les options autorisées sont les suivantes : <variablelist>
<varlistentry>
<term
><userinput
>b</userinput
></term>
<listitem
><para
>Recherche arrière.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>r</userinput
></term>
<listitem
><para
>Effectue une recherche sur des expressions rationnelles.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>s</userinput
></term>
<listitem
><para
>Recherche sensible à la casse.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><userinput
>c</userinput
></term>
<listitem
><para
>Recherche à partir de la position du curseur.</para
></listitem>
</varlistentry>

</variablelist>
</para
></listitem>
</varlistentry>

</variablelist>

</sect3>

</sect2>

</sect1>

<sect1 id="advanced-editing-tools-code-folding">
<title
>Utiliser le pliage du code</title>

<para
>Le pliage du code permet de cacher des parties d'un document dans l'éditeur, ce qui facilite l'affichage de la vue d'ensemble de documents volumineux. Dans &kate; les régions pliables sont calculées à l'aide de règles définies dans les définitions de coloration syntaxique, et le pliage du code n'est donc disponible que dans certains formats - en général le code source du programme, le marquage XML et similaires. La plupart des définitions de coloration syntaxique prenant en charge le pliage du code permet également de définir manuellement des régions pliables, en général à l'aide des mots-clés <userinput
>DEBUT</userinput
> et <userinput
>FIN</userinput
>.</para>

<para
>Pour utiliser la fonctionnalité de pliage du code, activez les marqueurs suivants à l'aide de l'élément de menu <menuchoice
><guimenu
>Affichage</guimenu
><guimenuitem
>Afficher les indicateurs de pliage</guimenuitem
></menuchoice
> s'ils ne sont pas déjà visibles. Le panneau des indicateurs de pliage du côté gauche de l'écran affiche une vue graphique des régions pliables, avec des signes +/- pour indiquer l'opération possible sur une région donnée : un - signifie que la région est dépliée. Un clic sur - replie la région et sur + sera affiché à la place.</para>

<para
>Quatre commandes sont prévues pour manipuler l'état des régions de pliage. Consultez la <link linkend="view-code-folding"
>documentation du menu</link
>. </para>

<para
>Si vous ne voulez pas employer la fonctionnalité de pliage du code, vous pouvez désactiver l'option <guilabel
>Afficher les indicateurs de pliage (si cette option est activée)</guilabel
> dans la page <link linkend="config-dialog-editor-appearance"
>Apparence</link
> de la configuration de l'éditeur.</para>

</sect1>

<sect1 id="advanced-editing-tools-scripting">

<title
>Scriptage du composant éditeur avec Javascript</title>

<sect2 id="advanced-editing-tools-scripting-introduction">

<title
>Introduction</title>

<para
>À partir de la version 2.5, le composant éditeur de &kate; prend en charge le scriptage avec le script ECMA, également connu sous le nom de JavaScript.</para>

<para
>Les scripts peuvent être utilisés à l'aide de la <link linkend="advanced-editing-tools-commandline"
>ligne de commande intégrée</link
> uniquement. La condition requise est que le script est placé dans un dossier où &kate; peut le trouver, ainsi qu'un fichier .desktop optionnel qui définit les propriétés associées. Le dossier pertinent est nommé <filename
>katepart/scripts</filename
> dans les dossiers de données de &kde;. Vous trouverez les dossiers de données en exécutant la commande <command
>kde-config <option
>--path</option
> <parameter
>data</parameter
></command
>. Vous aurez le plus souvent un système et un dossier de données personnel. Naturellement, les scripts contenus dans le dossier de données du système sont à la disposition de tous les utilisateurs sur le système, alors que ceux qui sont dans le dossier personnel ne sont accessibles qu'à vous.</para>

<note
><para
>Cette fonctionnalité est expérimentale et il est fort probable qu'elle subisse des changements au cours du développement futur.</para>
<para
>Nous savons que beaucoup d'entre vous seront déçus car vous ne pouvez pas ajouter vos scripts au menu ou leur affecter des raccourcis clavier. Désolé. Il se peut que dans le futur ce soit possible.</para>
<para
>Il n'est également pas encore possible de passer des arguments à vos scripts. Soyez patient, ce sera peut-être ajouté dans un futur proche !</para>
</note>

</sect2>

<sect2 id="advanced-editing-tools-scripting-reference">

<title
>L'API JavaScript de Kate</title>

<para
>Est listée ici l'ensemble complet des fonctions et propriétés disponibles dans les objets <type
>document</type
> et <type
>view</type
>. De plus, vous pouvez naturellement utiliser tous les objets standard tels que <type
>Math</type
>, <type
>String</type
> <type
>Regex</type
>, etc.</para>

<para
>Lorsqu'on exécute un script, l'objet <classname
>document</classname
> est le document actuel, et l'objet <classname
>view</classname
> est la vue actuelle.</para>

<note
><para
>Les types des arguments ne sont bien entendu pas utilisés en JavaScript à ce moment, ils ne servent qu'à indiquer quel sorte de valeur les fonctions attendent.</para
></note>

<variablelist id="advanced-editing-tools-scripting-global">
<title
>Fonctions globales</title>
<varlistentry>
<term
><function
>debug( <parameter
><replaceable
>chaîne</replaceable
></parameter
>) [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>paramètres</title>
<listitem
><para
><parameter
>chaîne</parameter
> : la chaîne à produire en sortie.</para>
</listitem>
</itemizedlist>
<para
>Sort la chaîne dans <acronym
>STDERR</acronym
> à l'aide de <function
>kdDebug()</function
>. On utilise une zone de sortie dédiée pour la sortie, qui sera préfixée par <computeroutput
>Kate (KJS Scripts)</computeroutput
>. </para>
</listitem>
</varlistentry>
</variablelist>

<variablelist id="advanced-editing-tools-scripting-document">
<title
>L'API <classname
>document</classname
></title>

<varlistentry>
<term
><function
>document.attribute( <parameter
><replaceable
>ligne</replaceable
> </parameter
>, <parameter
><replaceable
>colonne</replaceable
></parameter
>) ; [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>uint ligne</parameter
> : la ligne de la position pour laquelle trouver l'attribut.</para
></listitem>
<listitem
><para
><parameter
>uint colonne</parameter
> : la colonne de la position pour laquelle trouver l'attribut.</para
></listitem>
</itemizedlist>
<para
>Ce paramètre retourne l'ID numérique de l'attribut concernant la position du document [<parameter
>ligne</parameter
>,<parameter
>colonne</parameter
>]. L'attribut représente l'apparence visuelle ou le style du texte, et sert également à calculer la coloration syntaxique pour une partie donnée du texte dans des formats mélangés comme HTML ou PHP.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.canBreakAt( <parameter
>caractère c</parameter
>, <parameter
>uint attribut</parameter
>); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>c</parameter
> : le caractère à tester.</para
></listitem>
<listitem
><para
><parameter
>attribut</parameter
> : l'attribut à la position de <parameter
>c</parameter
>.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique s'il est permis d'interrompre la ligne à un caractère c avec l'attribut attribut. Le résultat est décidé en demandant la coloration syntaxique possédant l'attribut pour lequel les caractères permettent d'interrompre la ligne.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.canComment( <parameter
>uint attribut_début</parameter
>, <parameter
>uint attribut_fin</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>attribut_début</parameter
> : l'attribut au début de l'intervalle à transformer en commentaire.</para
></listitem>
<listitem
><para
><parameter
>attribut_fin</parameter
> : l'attribut à la fin de l'intervalle à transformer en commentaire.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique si attribut_début et attribut_fin appartiennent au même système de coloration syntaxique. Si tel est le cas, c'est correct. </para>
<example>
<title
>Utiliser canComment</title>
<programlisting
>if ( document.canComment( document.attribute(1,0), document.attribute(5,0) ) ) {
    // 1,0 et 5,0 appartiennent au même système de coloration syntaxique
}
</programlisting>
</example>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.clear(); [fonction]</function
></term>
<listitem
><para
>Efface le document.</para
></listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.commentStart( <parameter
>uint attribut</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>attribut</parameter
> : l'attribut du texte pour lequel obtenir la chaîne commentStart.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique la chaîne requise pour démarrer un commentaire multiligne pour un texte avec attribut, ou une chaîne vide si les commentaires multiligne ne sont pas pris en charge pour ce texte.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.commentMarker( <parameter
>uint attribut</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>attribut</parameter
> : l'attribut du texte pour lequel obtenir la chaîne commentMarker.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique la chaîne utilisée pour marquer le reste de la ligne en tant que commentaire pour un texte avec attribut ou une chaîne vide si les commentaires à une seule ligne ne sont pas pris en charge pour ce texte.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.commentEnd( <parameter
>uint attribut</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>attribut</parameter
> : l'attribut du texte pour lequel obtenir la chaîne commentEndg.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique la chaîne requise pour terminer un commentaire multiligne pour un texte avec attribut, ou une chaîne vide si les commentaires multilignes ne sont pas pris en charge pour ce texte.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.editBegin(); [fonction]</function
></term>
<listitem>
<para
>Démarre un groupe d'édition. Toutes les actions effectuées jusqu'à l'appel de editEnd() seront groupées en une action d'annulation.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.editEnd(); [fonction]</function
></term>
<listitem>
<para
>Termine un groupe d'édition.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.highlightMode; [propriété:lecture seule]</function
></term>
<listitem>
<para
>Le nom du mode de coloration syntaxique du document, tel que JavaScript ou C++. Si aucun mode de coloration syntaxique n'est défini pour le document, la valeur est None (Aucune). Notez que vous devez utiliser le nom anglais au cas où il diffère de celui du nom traduit.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.indentMode; [propriété:lecture seule]</function
></term>
<listitem>
<para
>Le nom du mode d'indentation du document, tel que <literal
>normal</literal
> ou <literal
>cstyle</literal
>. n'oubliez pas que si aucun mode d'indentation n'est défini, la valeur est <literal
>aucun</literal
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.indentWidth; [propriété:lecture seule]</function
></term>
<listitem>
<para
>La largeur d'indentation définie pour le document. Cette valeur est utilisée si l'indentation par espaces est activée.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.insertLine( <parameter
>uint ligne</parameter
>, <parameter
>chaîne texte</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>ligne</parameter
> : numéro de ligne du document.</para>
</listitem>
<listitem
><para
><parameter
>texte</parameter
> : texte à insérer.</para
></listitem>
</itemizedlist>
<para
>Insère une nouvelle ligne avec le texte <parameter
>texte</parameter
> à la ligne <parameter
>ligne</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.insertText( <parameter
>uint ligne</parameter
>, <parameter
>uint colonne</parameter
>, <parameter
>chaîne texte</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>ligne</parameter
> le numéro de la ligne</para
></listitem>
<listitem
><para
><parameter
>colonne</parameter
> la colonne</para
></listitem>
<listitem
><para
><parameter
>texet</parameter
> le texte qui doit être inséré</para
></listitem>
</itemizedlist>
<para
>Insère le texte <parameter
>texte</parameter
> dans la llgne <parameter
>ligne</parameter
> et la colonne <parameter
>colonne</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>document.length(); [fonction]</term>
<listitem>
<para
>La valeur restituée indique la taille du document en octets.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.lines(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique le nombre de lignes dans le document.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>document.mixedIndent; [propriété:lecture seule]</term>
<listitem>
<para
>Une propriété booléenne indiquant si le paramètre mixed-indent est activé pour le document. Si oui, l'indentation est optimisée de façon à contenir un mélange de caractères de tabulation et d'espaces comme l'utilise l'éditeur Emacs.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
>document.removeLine( <parameter
>uint ligne</parameter
> ); [fonction]</term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>ligne</parameter
> numéro de la ligne</para
></listitem>
</itemizedlist>
<para
>Supprime la ligne ligne du document.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.removeText( <parameter
>uint débutLigne</parameter
>, <parameter
>uint débutColonne</parameter
>, <parameter
>uint finLigne</parameter
>, <parameter
>uint finColonne</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>débutLigne</parameter
> : spécifie la ligne de début.</para
></listitem>
<listitem
><para
><parameter
>débutColonne</parameter
> : spécifie la colonne de début.</para
></listitem>
<listitem
><para
><parameter
>finLigne</parameter
> : spécifie la ligne de fin.</para
></listitem>
<listitem
><para
><parameter
>finColonne</parameter
> : spécifie la colonne de fin.</para
></listitem>
</itemizedlist>
<para
>Supprime l'intervalle de texte depuis la ligne <parameter
>débutLigne</parameter
> et la colonne <parameter
>débutColonne</parameter
> jusqu'à la ligne <parameter
>finLigne</parameter
> et la colonne <parameter
>finColonne</parameter
>. </para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.setText( <parameter
>chaîne texte</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>texte</parameter
> :  texte du document.</para
></listitem>
</itemizedlist>
<para
>Affecte au contenu du document entier un <parameter
>texte</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.spaceIndent; [propriété:lecture seule]</function
></term>
<listitem>
<para
>Une propriété booléenne indiquant si le paramètre space-indent est activé pour le document. Si oui, le document est indenté avec des espaces indentWidth par niveau, sinon l'indentation est un caractère de tabulation par niveau.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.textFull(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique le texte complet du document. Si le texte s'étend sur plusieurs lignes, le caractère de saut de ligne est <constant
>\n</constant
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.textLine( uint ligne ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>ligne</parameter
> : la ligne.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique le texte de la ligne <parameter
>ligne</parameter
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>document.textRange( <parameter
>uint débutLigne</parameter
>, <parameter
>uint débutColonne</parameter
>, <parameter
>uint finLigne</parameter
>, <parameter
>uint finColonne</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>débutLigne</parameter
> : spécifie la ligne de début.</para
></listitem>
<listitem
><para
><parameter
>débutColonne</parameter
> : spécifie la colonne de début.</para
></listitem>
<listitem
><para
><parameter
>finLigne</parameter
> : spécifie la ligne de fin.</para>
</listitem>
<listitem
><para
><parameter
>finColonne</parameter
> : spécifie la colonne de fin.</para
></listitem>
</itemizedlist>
<para
>La valeur restituée indique l'intervalle de texte spécifié. Si l'intervalle s'étend sur plusieurs lignes, le caractère de saut de ligne est <constant
>\n</constant
>.</para>
</listitem>
</varlistentry>

</variablelist
><!--/ document API -->

<variablelist id="advanced-editing-tools-scripting-view">
<title
>L'API <classname
>view</classname
></title>

<varlistentry>
<term
><function
>view.clearSelection(); [fonction]</function
></term>
<listitem>
<para
>Désélectionne tout le texte.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.cursorColumn(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique la colonne actuelle du curseur (les caractères de tabulation sont étendus).</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.cursorColumnReal(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique la colonne actuelle réelle du curseur (les caractères de tabulation comptent pour une colonne).</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.cursorLine(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique la ligne actuelle du curseur.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.hasSelection(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique <constant
>true</constant
> si la vue contient le texte sélectionné, sinon <constant
>false</constant
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.removeSelectedText(); [fonction]</function
></term>
<listitem>
<para
>Supprime le texte sélectionné, si la vue contient une sélection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.selectAll(); [fonction]</function
></term>
<listitem>
<para
>Sélectionne tout le texte.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.selection(); [fonction]</function
></term>
<listitem>
<para
>La valeur restituée indique le texte sélectionné. Si la sélection s'étend sur plusieurs lignes, le caractère de saut de ligne est <constant
>\n</constant
>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.selectionEndColumn; [propriété:lecture seule]</function
></term>
<listitem>
<para
>La valeur restituée indique la colonne de fin de la sélection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.selectionEndLine; [propriété:lecture seule]</function
></term>
<listitem>
<para
>La valeur restituée indique la ligne de fin de la sélection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.selectionStartColumn; [propriété:lecture seule]</function
></term>
<listitem>
<para
>La valeur restituée indique la colonne de début de la sélection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.selectionStartLine; [propriété:lecture seule]</function
></term>
<listitem>
<para
>La valeur restituée indique la ligne de début de la sélection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.setCursorPosition( <parameter
>uint ligne</parameter
>, <parameter
>uint colonne</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>ligne</parameter
> : spécifie la ligne pour le curseur.</para
></listitem>
<listitem
><para
><parameter
>colonne</parameter
> : spécifie la colonne pour le curseur.</para
></listitem>
</itemizedlist>
<para
>Définit la position du curseur d'entrée dans la vue selon [<parameter
>ligne</parameter
>, <parameter
>col</parameter
>]. Ce paramètre fixe la position du curseur de manière visuelle, c'est-à-dire que le caractère de tabulation compte jusqu'à <replaceable
>largeur tabulation</replaceable
> en fonction de la position à l'intérieur de la ligne. La position du curseur es rendue visible. La ligne ainsi que la colonne commencent à partir de zéro.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.setCursorPositionReal( <parameter
>uint ligne</parameter
>, <parameter
>uint colonne</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>ligne</parameter
> : spécifie la ligne pour le curseur.</para
></listitem>
<listitem
><para
><parameter
>colonne</parameter
> : spécifie la colonne pour le curseur.</para
></listitem>
</itemizedlist>
<para
>Définit la position du curseur d'entrée selon [<parameter
>ligne</parameter
>, <parameter
>col</parameter
>]. Ce paramètre définit la position de la chaîne, c'est-à-dire qu'un caractère de tabulation compte un caractère. La position du curseur est rendue visible. La ligne ainsi que la colonne commencent à partir de zéro.</para>
</listitem>
</varlistentry>

<varlistentry>
<term
><function
>view.setSelection( <parameter
>uint débutLigne</parameter
>, <parameter
>uint débutColonne</parameter
>, <parameter
>uint finLigne</parameter
>, <parameter
>uint finColonne</parameter
> ); [fonction]</function
></term>
<listitem>
<itemizedlist>
<title
>Paramètres</title>
<listitem
><para
><parameter
>débutLigne</parameter
> : spécifie la ligne de début.</para
></listitem>
<listitem
><para
><parameter
>débutColonne</parameter
> : spécifie la colonne de début.</para
></listitem>
<listitem
><para
><parameter
>finLigne</parameter
> : spécifie la ligne de fin.</para
></listitem>
<listitem
><para
><parameter
>finColonne</parameter
> : spécifie la colonne de fin.</para
></listitem>
</itemizedlist>
<para
>Définit une sélection à partir de la ligne <parameter
>débutLigne</parameter
> et de la colonne <parameter
>débutColonne</parameter
> jusqu'à la ligne <parameter
>finLigne</parameter
> et la colonne <parameter
>finColonne</parameter
>.</para>
</listitem>
</varlistentry>

</variablelist>

<example id="advanced-editing-tools-scripting-example">

<title
>Un exemple de script</title>
<para
>À titre d'exemple, nous allons créer un petit script qui met en majuscules la sélection. Il est évident que nous devons d'abord déterminer si une sélection existe, et si tel est le cas, il faut obtenir le texte, changer la casse puis le remplacer par le nouveau. Voici ce pourrait donner la mise en œuvre :</para>

<programlisting
>if ( view.hasSelection() )
{
  // sélection en majuscules
  column = view.selectionStartColumn;
  line = view.selectionStartLine;

  selection = view.selection().toUpperCase();

  document.editBegin();
  view.removeSelectedText();
  document.insertText( ligne, colonne, sélection );
  document.editEnd();
}
</programlisting>

<para
>Pour grouper cette action, de façon à ce qu'elle soit inversée par une seule activation de la fonction <guimenuitem
>Annuler</guimenuitem
>, on encapsule les lignes <programlisting
>view.removeSelectedText()</programlisting
> et <programlisting
>document.insertText()</programlisting
> avec un <programlisting
>document.editBegin()</programlisting
> et un <programlisting
>document.editEnd()</programlisting
></para>

</example>

<example id="advanced-editing-tools-desktop-example">
<title
>Un exemple de fichier <filename
>.desktop</filename
></title>

<para
>Voici un exemple de fichier .desktop qui accompagne le script ci-dessus :</para>

<programlisting
># Exemple de fichier .desktop
[Desktop Entry]
Encoding=UTF-8
Name=Mettre en majuscules JavaScript Kate Part
Comment=Script pour convertir en majuscules la sélection
X-Kate-Command=uppercase-selection
X-Kate-Help=&lt;p&gt;Utilisation : &lt;code&gt;uppercase-selection&lt;/code&gt;&lt;/p&gt;
</programlisting>

<para
>Comme vous le constatez, vous pouvez définir l'encodage, définir un nom, un commentaire, un texte d'aide à l'aide de X-Kate-Help et le nom de la ligne de commande à l'aide de X-Kate-Command. Les éléments « Name », « Comment » et « X-Kate-Help » sont automatiquement traduits en d'autres langues par les équipes de traduction de KDE, si les fichiers sont dans le référentiel SVN de KDE.</para>

</example>

<sect3>
<title
>En assemblant tout cela</title>

<para
>&kate; recherchera les dossiers de script (voir <link linkend="advanced-editing-tools-scripting-introduction"
>ci-dessus</link
>) pour les fichiers <filename
>*.js</filename
>. Pour chaque fichier, l'application vérifie s'il existe un fichier <filename
>.desktop</filename
> correspondant : pour uppercase.js, ce pourrait être uppercase.desktop. </para>
<para
>S'il n'est pas possible de trouver un fichier <filename
>.desktop</filename
>, le script sera enregistré dans la ligne de commande de katepart, avec le nom de fichier sans le .js de fin. Ainsi, dans notre exemple, ce serait <literal
>uppercase</literal
>. Si le nom de la commande est correct et que vous n'avez pas besoin des fonctionnalités supplémentaires, qu'offre un fichier <filename
>.desktop</filename
>, vous n'avez absolument pas besoin d'un fichier <filename
>.desktop</filename
>. </para>
<para
>S'il existe un fichier <filename
>.desktop</filename
>, katepart lit le nom sous lequel le script sera enregistré à partir de l'élément .desktop-entry de X-Kate-Command, par exemple X-Kate-Command=uppercase-selection.</para>

</sect3>

</sect2>

</sect1>

</chapter>
